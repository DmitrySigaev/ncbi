<!-- $Id$ -->
<!--#set var="TITLE" value="NCBI C++ Toolkit:  Tests" -->
<!--#set var="HEADING" value="Tests" -->
<!--#set var="DOCROOT" value="." -->
<!--#include virtual="./ssi/header.shtml" -->
<i><h1><font color="#FF0000"><span style="background-color: #FFFFFF">Warning: This HTML page is deprecated</span></font></h1>

All new changes are being made to the Toolkit Book
at the following locations:
<ul>
<li>
<i>Official Release:</i> <a href="http://www.ncbi.nlm.nih.gov/books/bv.fcgi?call=bv.View..ShowTOC&rid=toolkit.TOC&depth=2">
    C++ Toolkit Book</a>.
</li>
<li>
<i>Development Version:</i> <a href="http://xpubmed0.ncbi.nlm.nih.gov:5701/books/bv.fcgi?call=bv.View..ShowTOC&rid=toolkit.TOC&depth=2">

    C++ Toolkit Book (no search engine, accessible from inside NCBI only)</a>. </li> </ul> The Development Version is the most recent documentation before it becomes an Official Release. While the Development Version is the lastest version, it is accessible only from inside NCBI, and the search engine functionality is currently missing. Also, the location of the Development Version may change without warning! So it is suggested that you use the Official Release, and use the Development Version only when necessary.</p> </i>

<hr>
<!--EOW-->

<!--  This is the original docs 'Tests and Support' page, support.html; need major reworking -->

<a NAME="ref_Tests"></a>

<ul>
<li>
<a href="#BuildDir">Build directory</a></li>

<li>
<a href="#UpdateASN">Updating ASN.1 modules from C Toolkit</a></li>

<li>
<a href="#RegenerateObjects">Regenerating C++ objects from ASN.1 modules</a></li>

<li>
<a href="#UpdateObjects">Updating C++ objects sources</a></li>

<li>
<a href="#CommitingObjects">Commiting changed C++ objects sources</a></li>

<li>
<a href="#BuildDatatool">Building datatool program</a></li>

<li>
<a href="#BuildCorelib">Building relevant libraries</a></li>

<li>
<a href="#TestDatatool">Testing datatool</a></li>

<li>
<a href="#TestAsn2asn">Testing asn2asn</a></li>
</ul>

<hr>

<h1>
<a NAME="BuildDir"></a>Build directory</h1>
Build directory is the place where platform/configuration dependent files
(including built libs and programs) are stored.
<br>It is placed in C++ directory tree and looks like:
<blockquote><p class="ncbi_config">WorkShop6-Debug</p></blockquote>
or
<blockquote><p class="ncbi_config">GCC-Release</p></blockquote>
etc.
<p>When we mention build directory here, it means subdirectory <span class="ncbi_dir">build
</span>in the above directory.
<h1>
<a NAME="UpdateASN"></a>Updating ASN.1 modules from C Toolkit</h1>
In the updated C++ directory tree:
<ul>
<li>
<span class="ncbi_cmd">cd src/objects</span></li>

<li>
<span class="ncbi_cmd">./update_asn.sh</span></li>
</ul>
The script will report either
<blockquote><p class="ncbi_output">ASN.1 modules were unchanged</p></blockquote>
or
<blockquote><p class="ncbi_output"> ASN.1 modules were updated, run 'cvs update'</p></blockquote>
<p>In latter case you should run:
<ul>
<li>
<span class="ncbi_cmd">cvs update</span></li>
</ul>
and C++ ASN.1 module files will be copied from C Toolkit.
<br>Now you should <a href="#RegenerateObjects">regenerate C++ objects</a>.
<br>&nbsp;
<h2>
<a NAME="RegenerateObjects"></a>Regenerating C++ objects from ASN.1 modules</h2>
You should have built <a href="#BuildDatatool">datatool</a> in your build
directory.
<br>In the <a href="#BuildDir">build directory</a>:
<ul>
<li>
<span class="ncbi_cmd">cd objects</span></li>

<li>
<span class="ncbi_cmd">make all_r</span></li>
</ul>
This command will run datatool for every ASN.1 module and then rebuild
objects libraries.
<br>It will also build asn2asn - test program.
<h2>
<a NAME="UpdateObjects"></a>Updating C++ objects sources</h2>
Sometimes you can find errors from CVS&nbsp;while updating objects sources
e.g.:
<blockquote><p class="ncbi_output"> cvs: move away Object_id.cpp; it is in the way</p></blockquote>
<p>This usually means that this file was added by somone else while you
have this file generated by datatool. If you didn't modify the file (make
sure), you can simply remove it and run update again. CVS will get new
copy of file from repository.
<br>If it happens that you also made some changes to this file, you have
to add your changes again:
<br>make backup copy your file, remove it, run update again, then make
the same modifications to new file as you did before.
<h2>
<a NAME="CommitingObjects"></a>Commiting changed C++ objects sources</h2>
If you have modified some of wrapper classes for objects, you might need
to save your changes in CVS repository. Your modified files possibly was
not added to CVS yet. This can be checked by running '<span class="ncbi_cmd">cvs commit</span>'
command for every file you've modified. If file was not added to repository
yet, you'll get error message:
<blockquote><p class="ncbi_output"> cvs commit: nothing known about `Date.cpp'</p></blockquote>
<p>In this case you should run '<span class="ncbi_cmd">cvs add yourfile</span>' and commit
it again.
<h2>
<a NAME="BuildDatatool"></a>Building datatool program</h2>
You should have built <a href="#BuildCorelib" class="ncbi_lib">corelib</a> in your build
directory.
<br>In the <a href="#BuildDir">build directory</a>:
<ul>
<li>
<span class="ncbi_cmd">cd serial</span></li>

<li>
<span class="ncbi_cmd">make all_r</span></li>
</ul>
This will build serial library and datatool program.
<h2>
<a NAME="BuildCorelib"></a>Building relevant libraries</h2>
In the <a href="#BuildDir">build directory</a>:
<ul>
<li>
<span class="ncbi_cmd">cd corelib</span></li>

<li>
<span class="ncbi_cmd">make all</span></li>
</ul>
In the <a href="#BuildDir">build directory</a>:
<ul>
<li>
<span class="ncbi_cmd">cd util</span></li>

<li>
<span class="ncbi_cmd">make all</span></li>
</ul>

<h2>
<a NAME="TestDatatool"></a>Testing datatool program</h2>
After <a href="#BuildDatatool">building datatool</a> you can test its proper
operation by special script.
<br>From the <a href="#BuildDir">build directory</a>:
<ul>
<li>
<span class="ncbi_cmd">cd serial/datatool</span></li>

<li>
<span class="ncbi_cmd">./datatool.sh</span></li>
</ul>
If everything was fine this script will print at the end:
<blockquote><p><em>Done!</em></p></blockquote>
<h2>
<a NAME="TestAsn2asn"></a>Testing asn2asn program</h2>
After building objects you can test its proper operation by special script.
<br>From the <a href="#BuildDir">build directory</a>:
<ul>
<li>
<span class="ncbi_cmd">cd objects/asn2asn</span></li>

<li>
<span class="ncbi_cmd">./asn2asn.sh</span></li>
</ul>
If everything was fine this script will print at the end:
<blockquote><p><em>Done!</em></p></blockquote>

<!--#include virtual="./ssi/navlinks.shtml" -->

<table BORDER=0 CELLSPACING=0 WIDTH="100%" >
<script>
<!--
print_author('cpp-core', 'Eugene Vasilchenko', '$Date$', 'ncbi.nlm.nih.gov');
// -->
</script>
</table>

<!--#include virtual="./ssi/footer.shtml" -->
