<!--#set var="TITLE" value="NCBI C++ Object Manager library" -->
<!--#set var="DOCROOT" value="../.." -->
<!--#include virtual="../../ssi/header.shtml" -->


<div align="Center">
<H1>Setup the framework for the C++ <i>Object Manager</i> learning task</H1>
</div>

<h2>Starting point</h2>
<p>
To help jump-start your first project utilizing the new C++
<var>Object Manager </var> in the C++ Toolkit framework, we have created
a sample project (makefile and a source file), which could be used
as a starting point. In order to do so, you have to create a folder for your
new project, generate a makefile, copy sample source and compile it:
</p>

<ol>
<li>
  Create a new project called <i>app</i> in the folder <i>task</i>
  using <tt>new_project.sh</tt> shell script:
  <pre>
  $NCBI/c++/scripts/new_project.sh <i>task</i> <i>app</i>
  cd <i>task</i>
  cp -p $NCBI/c++/src/internal/objmgr_lab/sample/task.cpp .
  </pre>
</li>
<li>
  In your model makefile <tt>Makefile.<i>task_app</i></tt>, replace the whole
  <tt>settings</tt> section, exactly this way:
  <pre>
  #############################################################################
  ###  EDIT SETTINGS FOR THE DEFAULT (APPLICATION) TARGET HERE              ### 
  APP = omtask1
  SRC = task
  LIB = xobjmgr1 id1 seqset $(SEQ_LIBS) pub medline biblio general \
        xser xutil xconnect xncbi

  LIBS = $(NCBI_C_LIBPATH) $(NCBI_C_ncbi) $(NETWORK_LIBS) $(ORIG_LIBS)
  # CPPFLAGS =  $(ORIG_CPPFLAGS) $(NCBI_C_INCLUDE)
  ####################################################################
  </pre>
</li>
<li>
  Build the sample project and run the application:
  <pre>
  make -f Makefile.<i>task_app</i>
  ./omtask1 -gi 333
  </pre>
The output should look like this:
<pre>
  First ID:  emb|CAA23443.1|
  Sequence:  length=263,  data=MARFLGLCTW
  # of descriptions:  2
  # of features:
     [whole]           Any:    2
     [whole]           Genes:  0
     [0..9]            Any:    2
     [0..9, TSE-only]  Any:    2
  # of alignments:
     [whole]           Any:    0
  Done
</pre>
</li>
<li>
Now you can go ahead and convert the sample code in the <tt>task.cpp</tt>
into  the code that performs your learning task.
</li>
</ol>






<h2>How to convert the test application into CGI one?</h2>
<p>
It is a good idea to create another application, based on your original test.
In order to do this:
</p>
<ol>
  <li>
  Create copy of the source (<i>task.cpp</i>) and makefile (<i>Makefile.task_app</i>)
  <pre>
  cp task.cpp <b>task_cgi.cpp</b>
  cp Makefile.task_app <b>Makefile.task_cgiapp</b>
  </pre>
  </li>
  <li>
  Edit the makefile for the CGI application (<i>Makefile.task_cgiapp</i>):
  change application name, name of the source file,  add <tt>cgi</tt> libraries:
  <pre>
  APP = <b>omtask1.cgi</b>
  SRC = <b>task_cgi</b>
  LIB = xobjmgr1 id1 seqset $(SEQ_LIBS) pub medline biblio general \
      xser <b>xhtml xcgi</b> xutil xconnect xncbi
  LIBS = $(NCBI_C_LIBPATH) $(NCBI_C_ncbi) <b>$(FASTCGI_LIBS)</b> $(NETWORK_LIBS) $(ORIG_LIBS)
  </pre>
  </li>
  <li>
  Build the project (at this time it is not a CGI application yet):
  <pre>
  make -f Makefile.<i>task_cgiapp</i>
  </pre>
  </li>
  <li>
  Convert <i>task_cgi.cpp</i> into a CGI application.
  </li>
</ol>






<h2>How to convert CGI application into FCGI one?</h2>
<p>
Edit the CGI project makefile - <i>Makefile.task_cgiapp</i>:
</p>
<ol>
  <li>
Replace <tt>xcgi</tt> library by <tt>xfcgi</tt> one in the <tt>LIB=...</tt> section.
  <pre>
  LIB = xobjmgr1 id1 seqset $(SEQ_LIBS) pub medline biblio general \
      xser xhtml <b>xfcgi</b> xutil xconnect xncbi
  </pre>
  </li>
  <li>
Add the path to Fast-CGI header files to compilation flags: 
<pre>
CPPFLAGS =  <b>$(FASTCGI_INCLUDE)</b>
</pre>
  </li>
</ol>





<!--#include virtual="../../ssi/footer.shtml" -->
