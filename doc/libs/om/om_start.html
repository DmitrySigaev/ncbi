<!--#set var="TITLE" value="NCBI C++ Object Manager library" -->
<!--#set var="DOCROOT" value="../.." -->
<!--#include virtual="../../ssi/header.shtml" -->
<i><h1><font color="#FF0000"><span style="background-color: #FFFFFF">Warning: This HTML page is deprecated</span></font></h1>

All new changes are being made to the Toolkit Book
at the following locations:
<ul>
<li>
<i>Official Release:</i> <a href="http://www.ncbi.nlm.nih.gov/books/bv.fcgi?call=bv.View..ShowTOC&rid=toolkit.TOC&depth=2">
    C++ Toolkit Book</a>.
</li>
<li>
<i>Development Version:</i> <a href="http://xpubmed0.ncbi.nlm.nih.gov:5701/books/bv.fcgi?call=bv.View..ShowTOC&rid=toolkit.TOC&depth=2">

    C++ Toolkit Book (no search engine, accessible from inside NCBI only)</a>. </li> </ul> The Development Version is the most recent documentation before it becomes an Official Release. While the Development Version is the lastest version, it is accessible only from inside NCBI, and the search engine functionality is currently missing. Also, the location of the Development Version may change without warning! So it is suggested that you use the Official Release, and use the Development Version only when necessary.</p> </i>

<hr>
<!--EOW-->


<div align="Center">
<h1>Setup the framework for the C++ Object Manager learning task</h1>
</div>

<h2>Starting point (UNIX)</h2>
<p>
To jump-start your first project utilizing the new C++
<span class="ncbi_term">Object Manager </span> in the C++ Toolkit framework on a UNIX platform,
we suggest using <span class="ncbi_script">new_project.sh</span> shell script, which creates
a sample application and a makefile:
</p>

<ol>
<li>
  Create a new project called <span class="ncbi_proj">task</span> in the folder <span class="ncbi_dir">task</span>
  using <span class="ncbi_script">new_project.sh</span> shell script (this will create the folder, the source file and the makefile):
<pre class="ncbi_cmd">
    $NCBI/c++/scripts/new_project.sh <em>task</em> app/objmgr
</pre>
</li>
<li>
  Build the sample project and run the application:
<pre class="ncbi_cmd">
    cd <em>task</em>
    make -f Makefile.<em>task</em>_app
    ./<em>task</em> -gi 333
</pre>
The output should look like this:
<pre class="ncbi_output">
    First ID:  emb|CAA23443.1|
    Sequence:  length=263,  data=MARFLGLCTW
    # of descriptions:  2
    # of features:
       [whole]           Any:    2
       [whole]           Genes:  0
       [0..9]            Any:    2
       [0..9, TSE-only]  Any:    2
    # of alignments:
       [whole]           Any:    0
    Done
</pre>
</li>
<li>
Now you can go ahead and convert the sample code in the <span class="ncbi_file">task.cpp</span>
into  the code that performs your learning task.
</li>
</ol>


<h2>Starting point (MS Windows)</h2>
<p>
To create a project, which utilizes the C++ <span class="ncbi_term">Object Manager </span>
in the C++ Toolkit framework on Microsoft Windows platform, do the following:
</p>
<ol>
  <li>In Microsoft Visual Studio create a new project/workspace:
  choose "Win32 Console Application", then "Empty project".
  </li>
  <li>
  Copy the source file (<span class="ncbi_file">src\app\sample\objmgr\objmgr_sample.cpp</span>) into
  the project directory, then add it to the project.
  </li>
  <li>
  Modify the project settings:
    <ul>
	  <li>Enable Run-time type information (in <span class="ncbi_menu">"C/C++"->"C++ Language"</span>)
	  </li>
	  <li>Disable using precompiled headers (in <span class="ncbi_menu">"C/C++"->"Precompiled Headers"</span>)
	  </li>
	  <li>Add additional include directory (in <span class="ncbi_menu">"C/C++"->"Preprocessor"</span>).
	  Here, at NCBI, it should be <span class="ncbi_dir">\\Dizzy\public\cxx\include</span>,
      that is, the "root" of all includes.
	  </li>
	  <li>Add additional library path (<span class="ncbi_menu">"Link"->"Input"</span>).
      Here, at NCBI it may be <span class="ncbi_dir">\\Dizzy\public\cxx\Debug</span>. Please note,
	  this library path is configuration-dependent, that is it must be
	  different for each configuration you are going to build the project in.
	  </li>
	  <li>Remove all "standard" libraries in <span class="ncbi_menu">"Link"->"Input"->"Object/library modules"</span>.
	  </li>
	  <li>Add socket library there: <span class="ncbi_lib">wsock32.lib</span>
	  </li>
	  <li>Add NCBI libraries to the project:
<pre class="ncbi_code">
    objects_biblio.lib,
    objects_general.lib,
    objects_id1.lib,
    objects_medline.lib,
    objects_pub.lib,
    objects_seq.lib,
    objects_seqalign.lib,
    objects_seqblock.lib,
    objects_seqcode.lib,
    objects_seqfeat.lib,
    objects_seqloc.lib,
    objects_seqres.lib,
    objects_seqset.lib,
    xncbi.lib,
    xobjmgr.lib,
    xconnect.lib,
    xserial.lib,
    xutil.lib.
</pre>
	  </li>
	</ul>
  </li>
  <li>Build the project and run the application.
  </li>
</ol>





<h2>How to convert the test application into CGI one?</h2>
<p>
It is a good idea to create another application, based on your original test.
In order to do this:
</p>
<ol>
  <li>
  Create copy of the source (<span class="ncbi_file">task.cpp</span>) and makefile (<span class="ncbi_file">Makefile.task_app</span>)
<pre class="ncbi_cmd">
    cp task.cpp task_cgi.cpp
    cp Makefile.task_app Makefile.task_cgiapp
</pre>
  </li>
  <li>
  Edit the makefile for the CGI application (<span class="ncbi_file">Makefile.task_cgiapp</span>):
  change application name, name of the source file,  add cgi libraries:
<pre class="ncbi_code">
    APP = <em>task.cgi</em>
    SRC = <em>task_cgi</em>
    LIB = xobjmgr id1 seqset $(SEQ_LIBS) pub medline biblio general \
        xser <em>xhtml xcgi</em> xutil xconnect xncbi
    LIBS = $(NCBI_C_LIBPATH) $(NCBI_C_ncbi) <em>$(FASTCGI_LIBS)</em> $(NETWORK_LIBS) $(ORIG_LIBS)
</pre>
  </li>
  <li>
  Build the project (at this time it is not a CGI application yet):
<pre class="ncbi_cmd">
    make -f Makefile.task_cgiapp
</pre>
  </li>
  <li>
  Convert <span class="ncbi_file">task_cgi.cpp</span> into a CGI application.
  </li>
</ol>


<h2>How to convert CGI application into Fast-CGI one?</h2>
<p>
In the <span class="ncbi_make_var">LIB=...</span> section of <span class="ncbi_file">Makefile.task_cgiapp</span>, just
replace <span class="ncbi_lib">xcgi</span> library by <span class="ncbi_lib">xfcgi</span>:
<pre class="ncbi_cmd">
    LIB = xobjmgr id1 seqset $(SEQ_LIBS) pub medline biblio general \
        xser xhtml <em>xfcgi</em> xutil xconnect xncbi
</pre>
</p>

<!--#include virtual="../../ssi/navlinks.shtml" -->
<!--#include virtual="../../ssi/footer.shtml" -->
