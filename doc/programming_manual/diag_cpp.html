<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>traverseBS.cpp</title>
  </head>

  <body BGCOLOR="#FFFFFF">
  <pre><font color = "red">// File name: diag.cpp
// Description: Examples of using the CNcbiDiag Class
<font color = "green">
#include &lt;corelib/ncbiapp.hpp&gt;
#include &lt;corelib/ncbiobj.hpp&gt;
<font color = "blue">
USING_NCBI_SCOPE;
<font color = "black">
static void myHandler(const SDiagMessage& mess) { 
    cout << "Installed Handler " << mess << endl;
}

class CTestApp : public CNcbiApplication {
public:
    virtual int Run ();
};

int CTestApp::Run()
{

<font color = "red">   // Reset the global severity level to Info <font color = "black">

    EDiagSev level = SetDiagPostLevel(eDiag_Info);

<font color = "red">   // Enable diagnostic tracing <font color = "black">

    SetDiagTrace(eDT_Enable, eDT_Enable);

<font color = "red">   // Instantiate some CNcbiDiag objects with file and line
   // information and post flags set to display all fields <font color = "black">

    CNcbiDiag diagInfo      ("diag.cpp", 13, eDiag_Info, eDPF_All);
    CNcbiDiag diagWarning   ("diag.cpp", 14, eDiag_Warning, eDPF_All);
    CNcbiDiag diagError     ("diag.cpp", 15, eDiag_Error, eDPF_All);
    CNcbiDiag diagTrace     ("diag.cpp", 16, eDiag_Trace, eDPF_All);
    CNcbiDiag diagCritical  ("diag.cpp", 17, eDiag_Critical, eDPF_All);

    string Msg = "This is a test message\n\n";

<font color = "red">   // Insert a message into the buffers and flush all but one <font color = "black">

    diagInfo << Msg << Endm;
    diagWarning << Msg;
    diagError << Msg << Endm;

<font color = "red">   // Install a new handler for all subsequent messages <font color = "black">

    SetDiagHandler (myHandler, 0, 0);
  
    diagTrace << Msg;
    diagCritical << Msg;

<font color = "red">   // Allow the class destructors to force flushing of remaining messages <font color = "black">
    return 0;
}

int main(int argc, const char* argv[]) 
{
    CTestApp theTestApp;
    return theTestApp.AppMain(argc, argv);
}

