(function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},_create:function(){var b=this.options,d=this;this.running=0;this.element.addClass("ui-accordion ui-widget ui-helper-reset");
this.element[0].nodeName=="UL"&&this.element.children("li").addClass("ui-accordion-li-fix");this.headers=this.element.find(b.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){a(this).removeClass("ui-state-focus")});
this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(b.navigation){var e=this.element.find("a").filter(b.navigationFilter);if(e.length){var c=e.closest(".ui-accordion-header");this.active=c.length?c:e.closest(".ui-accordion-content").prev()}}this.active=this._findActive(this.active||b.active).toggleClass("ui-state-default").toggleClass("ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");this.active.next().addClass("ui-accordion-content-active");
this._createIcons();a.browser.msie&&this.element.find("a").css("zoom","1");this.resize();this.element.attr("role","tablist");this.headers.attr("role","tab").bind("keydown",function(f){return d._keydown(f)}).next().attr("role","tabpanel");this.headers.not(this.active||"").attr("aria-expanded","false").attr("tabIndex","-1").next().hide();this.active.length?this.active.attr("aria-expanded","true").attr("tabIndex","0"):this.headers.eq(0).attr("tabIndex","0");a.browser.safari||this.headers.find("a").attr("tabIndex",
"-1");b.event&&this.headers.bind(b.event+".accordion",function(f){d._clickHandler.call(d,f,this);f.preventDefault()})},_createIcons:function(){var b=this.options;if(b.icons){a("<span/>").addClass("ui-icon "+b.icons.header).prependTo(this.headers);this.active.find(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected);this.element.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},
destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role").unbind(".accordion").removeData("accordion");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabindex");this.headers.find("a").removeAttr("tabindex");this._destroyIcons();var d=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active");
if(b.autoHeight||b.fillHeight)d.css("height","");return this},_setOption:function(b,d){a.Widget.prototype._setOption.apply(this,arguments);b=="active"&&this.activate(d);if(b=="icons"){this._destroyIcons();d&&this._createIcons()}},_keydown:function(b){var d=a.ui.keyCode;if(!(this.options.disabled||b.altKey||b.ctrlKey)){var e=this.headers.length,c=this.headers.index(b.target),f=false;switch(b.keyCode){case d.RIGHT:case d.DOWN:f=this.headers[(c+1)%e];break;case d.LEFT:case d.UP:f=this.headers[(c-1+e)%
e];break;case d.SPACE:case d.ENTER:this._clickHandler({target:b.target},b.target);b.preventDefault()}if(f){a(b.target).attr("tabIndex","-1");a(f).attr("tabIndex","0");f.focus();return false}return true}},resize:function(){var b=this.options,d;if(b.fillSpace){if(a.browser.msie){var e=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}d=this.element.parent().height();a.browser.msie&&this.element.parent().css("overflow",e);this.headers.each(function(){d-=a(this).outerHeight(true)});
this.headers.next().each(function(){a(this).height(Math.max(0,d-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else if(b.autoHeight){d=0;this.headers.next().each(function(){d=Math.max(d,a(this).height())}).height(d)}return this},activate:function(b){this.options.active=b;b=this._findActive(b)[0];this._clickHandler({target:b},b);return this},_findActive:function(b){return b?typeof b=="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===false?a([]):
this.headers.filter(":eq(0)")},_clickHandler:function(b,d){var e=this.options;if(!e.disabled)if(b.target){b=a(b.currentTarget||d);d=b[0]==this.active[0];e.active=e.collapsible&&d?false:a(".ui-accordion-header",this.element).index(b);if(!(this.running||!e.collapsible&&d)){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(e.icons.headerSelected).addClass(e.icons.header);if(!d){b.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").find(".ui-icon").removeClass(e.icons.header).addClass(e.icons.headerSelected);
b.next().addClass("ui-accordion-content-active")}g=b.next();c=this.active.next();f={options:e,newHeader:d&&e.collapsible?a([]):b,oldHeader:this.active,newContent:d&&e.collapsible?a([]):g,oldContent:c};e=this.headers.index(this.active[0])>this.headers.index(b[0]);this.active=d?a([]):b;this._toggle(g,c,f,d,e)}}else if(e.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(e.icons.headerSelected).addClass(e.icons.header);
this.active.next().addClass("ui-accordion-content-active");var c=this.active.next(),f={options:e,newHeader:a([]),oldHeader:e.active,newContent:a([]),oldContent:c},g=this.active=a([]);this._toggle(g,c,f)}},_toggle:function(b,d,e,c,f){var g=this.options,h=this;this.toShow=b;this.toHide=d;this.data=e;var i=function(){if(h)return h._completed.apply(h,arguments)};this._trigger("changestart",null,this.data);this.running=d.size()===0?b.size():d.size();if(g.animated){e={};e=g.collapsible&&c?{toShow:a([]),
toHide:d,complete:i,down:f,autoHeight:g.autoHeight||g.fillSpace}:{toShow:b,toHide:d,complete:i,down:f,autoHeight:g.autoHeight||g.fillSpace};if(!g.proxied)g.proxied=g.animated;if(!g.proxiedDuration)g.proxiedDuration=g.duration;g.animated=a.isFunction(g.proxied)?g.proxied(e):g.proxied;g.duration=a.isFunction(g.proxiedDuration)?g.proxiedDuration(e):g.proxiedDuration;c=a.ui.accordion.animations;var j=g.duration,k=g.animated;if(k&&!c[k]&&!a.easing[k])k="slide";c[k]||(c[k]=function(l){this.slide(l,{easing:k,
duration:j||700})});c[k](e)}else{if(g.collapsible&&c)b.toggle();else{d.hide();b.show()}i(true)}d.prev().attr("aria-expanded","false").attr("tabIndex","-1").blur();b.prev().attr("aria-expanded","true").attr("tabIndex","0").focus()},_completed:function(b){var d=this.options;this.running=b?0:--this.running;if(!this.running){d.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""});this.toHide.removeClass("ui-accordion-content-active");this._trigger("change",null,this.data)}}});a.extend(a.ui.accordion,
{version:"1.8",animations:{slide:function(b,d){b=a.extend({easing:"swing",duration:300},b,d);if(b.toHide.size())if(b.toShow.size()){var e=b.toShow.css("overflow"),c=0,f={},g={},h;d=b.toShow;h=d[0].style.width;d.width(parseInt(d.parent().width(),10)-parseInt(d.css("paddingLeft"),10)-parseInt(d.css("paddingRight"),10)-(parseInt(d.css("borderLeftWidth"),10)||0)-(parseInt(d.css("borderRightWidth"),10)||0));a.each(["height","paddingTop","paddingBottom"],function(i,j){g[j]="hide";i=(""+a.css(b.toShow[0],
j)).match(/^([\d+-.]+)(.*)$/);f[j]={value:i[1],unit:i[2]||"px"}});b.toShow.css({height:0,overflow:"hidden"}).show();b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(g,{step:function(i,j){if(j.prop=="height")c=j.end-j.start===0?0:(j.now-j.start)/(j.end-j.start);b.toShow[0].style[j.prop]=c*f[j.prop].value+f[j.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height","");b.toShow.css("width",h);b.toShow.css({overflow:e});b.complete()}})}else b.toHide.animate({height:"hide"},
b);else b.toShow.animate({height:"show"},b)},bounceslide:function(b){this.slide(b,{easing:b.down?"easeOutBounce":"swing",duration:b.down?1E3:200})}}})})(jQuery);
(function(a){var b=0,d=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'},_create:function(){this._tabify(true)},_setOption:function(e,c){if(e=="selected")this.options.collapsible&&c==this.options.selected||
this.select(c);else{this.options[e]=c;this._tabify()}},_tabId:function(e){return e.title&&e.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+ ++b},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var e=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++d);return a.cookie.apply(null,[e].concat(a.makeArray(arguments)))},_ui:function(e,c){return{tab:e,panel:c,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var e=
a(this);e.html(e.data("label.tabs")).removeData("label.tabs")})},_tabify:function(e){function c(o,n){o.css({display:""});!a.support.opacity&&n.opacity&&o[0].style.removeAttribute("filter")}this.list=this.element.find("ol,ul").eq(0);this.lis=a("li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return a("a",this)[0]});this.panels=a([]);var f=this,g=this.options,h=/^#.+/;this.anchors.each(function(o,n){var q=a(n).attr("href"),s=q.split("#")[0],x;if(s&&(s===location.toString().split("#")[0]||
(x=a("base")[0])&&s===x.href)){q=n.hash;n.href=q}if(h.test(q))f.panels=f.panels.add(f._sanitizeSelector(q));else if(q!="#"){a.data(n,"href.tabs",q);a.data(n,"load.tabs",q.replace(/#.*$/,""));q=f._tabId(n);n.href="#"+q;n=a("#"+q);if(!n.length){n=a(g.panelTemplate).attr("id",q).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(f.panels[o-1]||f.list);n.data("destroy.tabs",true)}f.panels=f.panels.add(n)}else g.disabled.push(o)});if(e){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");
this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(g.selected===undefined){location.hash&&this.anchors.each(function(o,n){if(n.hash==location.hash){g.selected=o;return false}});if(typeof g.selected!="number"&&g.cookie)g.selected=parseInt(f._cookie(),10);if(typeof g.selected!="number"&&this.lis.filter(".ui-tabs-selected").length)g.selected=
this.lis.index(this.lis.filter(".ui-tabs-selected"));g.selected=g.selected||(this.lis.length?0:-1)}else if(g.selected===null)g.selected=-1;g.selected=g.selected>=0&&this.anchors[g.selected]||g.selected<0?g.selected:0;g.disabled=a.unique(g.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(o){return f.lis.index(o)}))).sort();a.inArray(g.selected,g.disabled)!=-1&&g.disabled.splice(a.inArray(g.selected,g.disabled),1);this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");
if(g.selected>=0&&this.anchors.length){this.panels.eq(g.selected).removeClass("ui-tabs-hide");this.lis.eq(g.selected).addClass("ui-tabs-selected ui-state-active");f.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[g.selected],f.panels[g.selected]))});this.load(g.selected)}a(window).bind("unload",function(){f.lis.add(f.anchors).unbind(".tabs");f.lis=f.anchors=f.panels=null})}else g.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));this.element[g.collapsible?"addClass":
"removeClass"]("ui-tabs-collapsible");g.cookie&&this._cookie(g.selected,g.cookie);e=0;for(var i;i=this.lis[e];e++)a(i)[a.inArray(e,g.disabled)!=-1&&!a(i).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");g.cache===false&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if(g.event!="mouseover"){var j=function(o,n){n.is(":not(.ui-state-disabled)")&&n.addClass("ui-state-"+o)},k=function(o,n){n.removeClass("ui-state-"+o)};this.lis.bind("mouseover.tabs",
function(){j("hover",a(this))});this.lis.bind("mouseout.tabs",function(){k("hover",a(this))});this.anchors.bind("focus.tabs",function(){j("focus",a(this).closest("li"))});this.anchors.bind("blur.tabs",function(){k("focus",a(this).closest("li"))})}var l,m;if(g.fx)if(a.isArray(g.fx)){l=g.fx[0];m=g.fx[1]}else l=m=g.fx;var p=m?function(o,n){a(o).closest("li").addClass("ui-tabs-selected ui-state-active");n.hide().removeClass("ui-tabs-hide").animate(m,m.duration||"normal",function(){c(n,m);f._trigger("show",
null,f._ui(o,n[0]))})}:function(o,n){a(o).closest("li").addClass("ui-tabs-selected ui-state-active");n.removeClass("ui-tabs-hide");f._trigger("show",null,f._ui(o,n[0]))},r=l?function(o,n){n.animate(l,l.duration||"normal",function(){f.lis.removeClass("ui-tabs-selected ui-state-active");n.addClass("ui-tabs-hide");c(n,l);f.element.dequeue("tabs")})}:function(o,n){f.lis.removeClass("ui-tabs-selected ui-state-active");n.addClass("ui-tabs-hide");f.element.dequeue("tabs")};this.anchors.bind(g.event+".tabs",
function(){var o=this,n=a(this).closest("li"),q=f.panels.filter(":not(.ui-tabs-hide)"),s=a(f._sanitizeSelector(this.hash));if(n.hasClass("ui-tabs-selected")&&!g.collapsible||n.hasClass("ui-state-disabled")||n.hasClass("ui-state-processing")||f._trigger("select",null,f._ui(this,s[0]))===false){this.blur();return false}g.selected=f.anchors.index(this);f.abort();if(g.collapsible)if(n.hasClass("ui-tabs-selected")){g.selected=-1;g.cookie&&f._cookie(g.selected,g.cookie);f.element.queue("tabs",function(){r(o,
q)}).dequeue("tabs");this.blur();return false}else if(!q.length){g.cookie&&f._cookie(g.selected,g.cookie);f.element.queue("tabs",function(){p(o,s)});f.load(f.anchors.index(this));this.blur();return false}g.cookie&&f._cookie(g.selected,g.cookie);if(s.length){q.length&&f.element.queue("tabs",function(){r(o,q)});f.element.queue("tabs",function(){p(o,s)});f.load(f.anchors.index(this))}else throw"jQuery UI Tabs: Mismatching fragment identifier.";a.browser.msie&&this.blur()});this.anchors.bind("click.tabs",
function(){return false})},destroy:function(){var e=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var c=a.data(this,"href.tabs");if(c)this.href=c;var f=a(this).unbind(".tabs");a.each(["href","load","cache"],function(g,h){f.removeData(h+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,
"destroy.tabs")?a(this).remove():a(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});e.cookie&&this._cookie(null,e.cookie);return this},add:function(e,c,f){if(f===undefined)f=this.anchors.length;var g=this,h=this.options;c=a(h.tabTemplate.replace(/#\{href\}/g,e).replace(/#\{label\}/g,c));e=!e.indexOf("#")?e.replace("#",""):this._tabId(a("a",c)[0]);c.addClass("ui-state-default ui-corner-top").data("destroy.tabs",
true);var i=a("#"+e);i.length||(i=a(h.panelTemplate).attr("id",e).data("destroy.tabs",true));i.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(f>=this.lis.length){c.appendTo(this.list);i.appendTo(this.list[0].parentNode)}else{c.insertBefore(this.lis[f]);i.insertBefore(this.panels[f])}h.disabled=a.map(h.disabled,function(j){return j>=f?++j:j});this._tabify();if(this.anchors.length==1){h.selected=0;c.addClass("ui-tabs-selected ui-state-active");i.removeClass("ui-tabs-hide");
this.element.queue("tabs",function(){g._trigger("show",null,g._ui(g.anchors[0],g.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[f],this.panels[f]));return this},remove:function(e){var c=this.options,f=this.lis.eq(e).remove(),g=this.panels.eq(e).remove();if(f.hasClass("ui-tabs-selected")&&this.anchors.length>1)this.select(e+(e+1<this.anchors.length?1:-1));c.disabled=a.map(a.grep(c.disabled,function(h){return h!=e}),function(h){return h>=e?--h:h});this._tabify();this._trigger("remove",
null,this._ui(f.find("a")[0],g[0]));return this},enable:function(e){var c=this.options;if(a.inArray(e,c.disabled)!=-1){this.lis.eq(e).removeClass("ui-state-disabled");c.disabled=a.grep(c.disabled,function(f){return f!=e});this._trigger("enable",null,this._ui(this.anchors[e],this.panels[e]));return this}},disable:function(e){var c=this.options;if(e!=c.selected){this.lis.eq(e).addClass("ui-state-disabled");c.disabled.push(e);c.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))}return this},
select:function(e){if(typeof e=="string")e=this.anchors.index(this.anchors.filter("[href$="+e+"]"));else if(e===null)e=-1;if(e==-1&&this.options.collapsible)e=this.options.selected;this.anchors.eq(e).trigger(this.options.event+".tabs");return this},load:function(e){var c=this,f=this.options,g=this.anchors.eq(e)[0],h=a.data(g,"load.tabs");this.abort();if(!h||this.element.queue("tabs").length!==0&&a.data(g,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(e).addClass("ui-state-processing");
if(f.spinner){var i=a("span",g);i.data("label.tabs",i.html()).html(f.spinner)}this.xhr=a.ajax(a.extend({},f.ajaxOptions,{url:h,success:function(j,k){a(c._sanitizeSelector(g.hash)).html(j);c._cleanup();f.cache&&a.data(g,"cache.tabs",true);c._trigger("load",null,c._ui(c.anchors[e],c.panels[e]));try{f.ajaxOptions.success(j,k)}catch(l){}},error:function(j,k){c._cleanup();c._trigger("load",null,c._ui(c.anchors[e],c.panels[e]));try{f.ajaxOptions.error(j,k,e,g)}catch(l){}}}));c.element.dequeue("tabs");return this}},
abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},url:function(e,c){this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",c);return this},length:function(){return this.anchors.length}});a.extend(a.ui.tabs,{version:"1.8"});a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(e,c){var f=this,g=this.options,h=f._rotate||(f._rotate=
function(i){clearTimeout(f.rotation);f.rotation=setTimeout(function(){var j=g.selected;f.select(++j<f.anchors.length?j:0)},e);i&&i.stopPropagation()});c=f._unrotate||(f._unrotate=!c?function(i){i.clientX&&f.rotate(null)}:function(){t=g.selected;h()});if(e){this.element.bind("tabsshow",h);this.anchors.bind(g.event+".tabs",c);h()}else{clearTimeout(f.rotation);this.element.unbind("tabsshow",h);this.anchors.unbind(g.event+".tabs",c);delete this._rotate;delete this._unrotate}return this}})})(jQuery);
(function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var e=this,c=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){/relative/.test(this.element.css("position"))&&a.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),
top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=
this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=c.handles||(!a(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",
nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var f=this.handles.split(",");this.handles={};for(var g=0;g<f.length;g++){var h=a.trim(f[g]),i=a('<div class="ui-resizable-handle '+("ui-resizable-"+h)+'"></div>');/sw|se|ne|nw/.test(h)&&i.css({zIndex:++c.zIndex});"se"==h&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[h]=".ui-resizable-"+h;this.element.append(i)}}this._renderAxis=function(j){j=j||this.element;for(var k in this.handles){if(this.handles[k].constructor==
String)this.handles[k]=a(this.handles[k],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var l=a(this.handles[k],this.element),m=0;m=/sw|ne|nw|se|n|s/.test(k)?l.outerHeight():l.outerWidth();l=["padding",/ne|nw|n/.test(k)?"Top":/se|sw|s/.test(k)?"Bottom":/^e$/.test(k)?"Right":"Left"].join("");j.css(l,m);this._proportionallyResize()}a(this.handles[k])}};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){if(!e.resizing){if(this.className)var j=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);e.axis=j&&j[1]?j[1]:"se"}});if(c.autoHide){this._handles.hide();a(this.element).addClass("ui-resizable-autohide").hover(function(){a(this).removeClass("ui-resizable-autohide");e._handles.show()},function(){if(!e.resizing){a(this).addClass("ui-resizable-autohide");e._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var e=function(f){a(f).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){e(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);e(this.originalElement);return this},_mouseCapture:function(e){var c=false;for(var f in this.handles)if(a(this.handles[f])[0]==e.target)c=true;return!this.options.disabled&&c},_mouseStart:function(e){var c=this.options,f=this.element.position(),
g=this.element;this.resizing=true;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};if(g.is(".ui-draggable")||/absolute/.test(g.css("position")))g.css({position:"absolute",top:f.top,left:f.left});a.browser.opera&&/relative/.test(g.css("position"))&&g.css({position:"relative",top:"auto",left:"auto"});this._renderProxy();f=b(this.helper.css("left"));var h=b(this.helper.css("top"));if(c.containment){f+=a(c.containment).scrollLeft()||0;h+=a(c.containment).scrollTop()||0}this.offset=
this.helper.offset();this.position={left:f,top:h};this.size=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()};this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()};this.originalPosition={left:f,top:h};this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-g.height()};this.originalMousePosition={left:e.pageX,top:e.pageY};this.aspectRatio=typeof c.aspectRatio=="number"?c.aspectRatio:
this.originalSize.width/this.originalSize.height||1;c=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor",c=="auto"?this.axis+"-resize":c);g.addClass("ui-resizable-resizing");this._propagate("start",e);return true},_mouseDrag:function(e){var c=this.helper,f=this.originalMousePosition,g=this._change[this.axis];if(!g)return false;f=g.apply(this,[e,e.pageX-f.left||0,e.pageY-f.top||0]);if(this._aspectRatio||e.shiftKey)f=this._updateRatio(f,e);f=this._respectSize(f,e);this._propagate("resize",
e);c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(f);this._trigger("resize",e,this.ui());return false},_mouseStop:function(e){this.resizing=false;var c=this.options;if(this._helper){var f=this._proportionallyResizeElements,g=f.length&&/textarea/i.test(f[0].nodeName);f=g&&a.ui.hasScroll(f[0],"left")?0:this.sizeDiff.height;
g={width:this.size.width-(g?0:this.sizeDiff.width),height:this.size.height-f};f=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null;var h=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;c.animate||this.element.css(a.extend(g,{top:h,left:f}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!c.animate&&this._proportionallyResize()}a("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");
this._propagate("stop",e);this._helper&&this.helper.remove();return false},_updateCache:function(e){this.offset=this.helper.offset();if(d(e.left))this.position.left=e.left;if(d(e.top))this.position.top=e.top;if(d(e.height))this.size.height=e.height;if(d(e.width))this.size.width=e.width},_updateRatio:function(e){var c=this.position,f=this.size,g=this.axis;if(e.height)e.width=f.height*this.aspectRatio;else if(e.width)e.height=f.width/this.aspectRatio;if(g=="sw"){e.left=c.left+(f.width-e.width);e.top=
null}if(g=="nw"){e.top=c.top+(f.height-e.height);e.left=c.left+(f.width-e.width)}return e},_respectSize:function(e){var c=this.options,f=this.axis,g=d(e.width)&&c.maxWidth&&c.maxWidth<e.width,h=d(e.height)&&c.maxHeight&&c.maxHeight<e.height,i=d(e.width)&&c.minWidth&&c.minWidth>e.width,j=d(e.height)&&c.minHeight&&c.minHeight>e.height;if(i)e.width=c.minWidth;if(j)e.height=c.minHeight;if(g)e.width=c.maxWidth;if(h)e.height=c.maxHeight;var k=this.originalPosition.left+this.originalSize.width,l=this.position.top+
this.size.height,m=/sw|nw|w/.test(f);f=/nw|ne|n/.test(f);if(i&&m)e.left=k-c.minWidth;if(g&&m)e.left=k-c.maxWidth;if(j&&f)e.top=l-c.minHeight;if(h&&f)e.top=l-c.maxHeight;if((c=!e.width&&!e.height)&&!e.left&&e.top)e.top=null;else if(c&&!e.top&&e.left)e.left=null;return e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e=this.helper||this.element,c=0;c<this._proportionallyResizeElements.length;c++){var f=this._proportionallyResizeElements[c];if(!this.borderDif){var g=
[f.css("borderTopWidth"),f.css("borderRightWidth"),f.css("borderBottomWidth"),f.css("borderLeftWidth")],h=[f.css("paddingTop"),f.css("paddingRight"),f.css("paddingBottom"),f.css("paddingLeft")];this.borderDif=a.map(g,function(i,j){i=parseInt(i,10)||0;j=parseInt(h[j],10)||0;return i+j})}a.browser.msie&&(a(e).is(":hidden")||a(e).parents(":hidden").length)||f.css({height:e.height()-this.borderDif[0]-this.borderDif[2]||0,width:e.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var e=
this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var c=a.browser.msie&&a.browser.version<7,f=c?1:0;c=c?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+c,height:this.element.outerHeight()+c,position:"absolute",left:this.elementOffset.left-f+"px",top:this.elementOffset.top-f+"px",zIndex:++e.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,
c){return{width:this.originalSize.width+c}},w:function(e,c){return{left:this.originalPosition.left+c,width:this.originalSize.width-c}},n:function(e,c,f){return{top:this.originalPosition.top+f,height:this.originalSize.height-f}},s:function(e,c,f){return{height:this.originalSize.height+f}},se:function(e,c,f){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,c,f]))},sw:function(e,c,f){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,c,
f]))},ne:function(e,c,f){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,c,f]))},nw:function(e,c,f){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,c,f]))}},_propagate:function(e,c){a.ui.plugin.call(this,e,[c,this.ui()]);e!="resize"&&this._trigger(e,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,
originalPosition:this.originalPosition}}});a.extend(a.ui.resizable,{version:"1.8"});a.ui.plugin.add("resizable","alsoResize",{start:function(){var e=a(this).data("resizable").options,c=function(f){a(f).each(function(){a(this).data("resizable-alsoresize",{width:parseInt(a(this).width(),10),height:parseInt(a(this).height(),10),left:parseInt(a(this).css("left"),10),top:parseInt(a(this).css("top"),10)})})};if(typeof e.alsoResize=="object"&&!e.alsoResize.parentNode)if(e.alsoResize.length){e.alsoResize=
e.alsoResize[0];c(e.alsoResize)}else a.each(e.alsoResize,function(f){c(f)});else c(e.alsoResize)},resize:function(){var e=a(this).data("resizable"),c=e.options,f=e.originalSize,g=e.originalPosition,h={height:e.size.height-f.height||0,width:e.size.width-f.width||0,top:e.position.top-g.top||0,left:e.position.left-g.left||0},i=function(j,k){a(j).each(function(){var l=a(this),m=a(this).data("resizable-alsoresize"),p={};a.each((k&&k.length?k:["width","height","top","left"])||["width","height","top","left"],
function(r,o){if((r=(m[o]||0)+(h[o]||0))&&r>=0)p[o]=r||null});if(/relative/.test(l.css("position"))&&a.browser.opera){e._revertToRelativePosition=true;l.css({position:"absolute",top:"auto",left:"auto"})}l.css(p)})};typeof c.alsoResize=="object"&&!c.alsoResize.nodeType?a.each(c.alsoResize,function(j,k){i(j,k)}):i(c.alsoResize)},stop:function(){var e=a(this).data("resizable");if(e._revertToRelativePosition&&a.browser.opera){e._revertToRelativePosition=false;el.css({position:"relative"})}a(this).removeData("resizable-alsoresize-start")}});
a.ui.plugin.add("resizable","animate",{stop:function(e){var c=a(this).data("resizable"),f=c.options,g=c._proportionallyResizeElements,h=g.length&&/textarea/i.test(g[0].nodeName),i=h&&a.ui.hasScroll(g[0],"left")?0:c.sizeDiff.height;h={width:c.size.width-(h?0:c.sizeDiff.width),height:c.size.height-i};i=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null;var j=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(h,j&&
i?{top:j,left:i}:{}),{duration:f.animateDuration,easing:f.animateEasing,step:function(){var k={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};g&&g.length&&a(g[0]).css({width:k.width,height:k.height});c._updateCache(k);c._propagate("resize",e)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var e=a(this).data("resizable"),c=e.element,f=e.options.containment;if(c=f instanceof
a?f.get(0):/parent/.test(f)?c.parent().get(0):f){e.containerElement=a(c);if(/document/.test(f)||f==document){e.containerOffset={left:0,top:0};e.containerPosition={left:0,top:0};e.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}}else{var g=a(c),h=[];a(["Top","Right","Left","Bottom"]).each(function(k,l){h[k]=b(g.css("padding"+l))});e.containerOffset=g.offset();e.containerPosition=g.position();e.containerSize={height:g.innerHeight()-
h[3],width:g.innerWidth()-h[1]};f=e.containerOffset;var i=e.containerSize.height,j=e.containerSize.width;j=a.ui.hasScroll(c,"left")?c.scrollWidth:j;i=a.ui.hasScroll(c)?c.scrollHeight:i;e.parentData={element:c,left:f.left,top:f.top,width:j,height:i}}}},resize:function(e){var c=a(this).data("resizable"),f=c.options,g=c.containerOffset,h=c.position;e=c._aspectRatio||e.shiftKey;var i={top:0,left:0},j=c.containerElement;if(j[0]!=document&&/static/.test(j.css("position")))i=g;if(h.left<(c._helper?g.left:
0)){c.size.width+=c._helper?c.position.left-g.left:c.position.left-i.left;if(e)c.size.height=c.size.width/f.aspectRatio;c.position.left=f.helper?g.left:0}if(h.top<(c._helper?g.top:0)){c.size.height+=c._helper?c.position.top-g.top:c.position.top;if(e)c.size.width=c.size.height*f.aspectRatio;c.position.top=c._helper?g.top:0}c.offset.left=c.parentData.left+c.position.left;c.offset.top=c.parentData.top+c.position.top;f=Math.abs((c._helper?c.offset.left-i.left:c.offset.left-i.left)+c.sizeDiff.width);g=
Math.abs((c._helper?c.offset.top-i.top:c.offset.top-g.top)+c.sizeDiff.height);h=c.containerElement.get(0)==c.element.parent().get(0);i=/relative|absolute/.test(c.containerElement.css("position"));if(h&&i)f-=c.parentData.left;if(f+c.size.width>=c.parentData.width){c.size.width=c.parentData.width-f;if(e)c.size.height=c.size.width/c.aspectRatio}if(g+c.size.height>=c.parentData.height){c.size.height=c.parentData.height-g;if(e)c.size.width=c.size.height*c.aspectRatio}},stop:function(){var e=a(this).data("resizable"),
c=e.options,f=e.containerOffset,g=e.containerPosition,h=e.containerElement,i=a(e.helper),j=i.offset(),k=i.outerWidth()-e.sizeDiff.width;i=i.outerHeight()-e.sizeDiff.height;e._helper&&!c.animate&&/relative/.test(h.css("position"))&&a(this).css({left:j.left-g.left-f.left,width:k,height:i});e._helper&&!c.animate&&/static/.test(h.css("position"))&&a(this).css({left:j.left-g.left-f.left,width:k,height:i})}});a.ui.plugin.add("resizable","ghost",{start:function(){var e=a(this).data("resizable"),c=e.options,
f=e.size;e.ghost=e.originalElement.clone();e.ghost.css({opacity:0.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof c.ghost=="string"?c.ghost:"");e.ghost.appendTo(e.helper)},resize:function(){var e=a(this).data("resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=a(this).data("resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}});
a.ui.plugin.add("resizable","grid",{resize:function(){var e=a(this).data("resizable"),c=e.options,f=e.size,g=e.originalSize,h=e.originalPosition,i=e.axis;c.grid=typeof c.grid=="number"?[c.grid,c.grid]:c.grid;var j=Math.round((f.width-g.width)/(c.grid[0]||1))*(c.grid[0]||1);c=Math.round((f.height-g.height)/(c.grid[1]||1))*(c.grid[1]||1);if(/^(se|s|e)$/.test(i)){e.size.width=g.width+j;e.size.height=g.height+c}else if(/^(ne)$/.test(i)){e.size.width=g.width+j;e.size.height=g.height+c;e.position.top=h.top-
c}else{if(/^(sw)$/.test(i)){e.size.width=g.width+j;e.size.height=g.height+c}else{e.size.width=g.width+j;e.size.height=g.height+c;e.position.top=h.top-c}e.position.left=h.left-j}}});var b=function(e){return parseInt(e,10)||0},d=function(e){return!isNaN(parseInt(e,10))}})(jQuery);
(function(a){var b=a.fn.remove;a.fn.remove=function(d,e){return this.each(function(){if(!e)if(!d||a.filter(d,[this]).length)a("*",this).add(this).each(function(){a(this).triggerHandler("remove")});return b.call(a(this),d,e)})};a.widget=function(d,e,c){var f=d.split(".")[0],g;d=d.split(".")[1];g=f+"-"+d;if(!c){c=e;e=a.Widget}a.expr[":"][g]=function(h){return!!a.data(h,d)};a[f]=a[f]||{};a[f][d]=function(h,i){arguments.length&&this._createWidget(h,i)};e=new e;e.options=a.extend({},e.options);a[f][d].prototype=
a.extend(true,e,{namespace:f,widgetName:d,widgetEventPrefix:a[f][d].prototype.widgetEventPrefix||d,widgetBaseClass:g},c);a.widget.bridge(d,a[f][d])};a.widget.bridge=function(d,e){a.fn[d]=function(c){var f=typeof c==="string",g=Array.prototype.slice.call(arguments,1),h=this;c=!f&&g.length?a.extend.apply(null,[true,c].concat(g)):c;if(f&&c.substring(0,1)==="_")return h;f?this.each(function(){var i=a.data(this,d),j=i&&a.isFunction(i[c])?i[c].apply(i,g):i;if(j!==i&&j!==undefined){h=j;return false}}):this.each(function(){var i=
a.data(this,d);if(i){c&&i.option(c);i._init()}else a.data(this,d,new e(c,this))});return h}};a.Widget=function(d,e){arguments.length&&this._createWidget(d,e)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(d,e){this.element=a(e).data(this.widgetName,this);this.options=a.extend(true,{},this.options,a.metadata&&a.metadata.get(e)[this.widgetName],d);var c=this;this.element.bind("remove."+this.widgetName,function(){c.destroy()});this._create();
this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled")},widget:function(){return this.element},option:function(d,e){var c=d,f=this;if(arguments.length===0)return a.extend({},f.options);if(typeof d==="string"){if(e===undefined)return this.options[d];c={};c[d]=e}a.each(c,
function(g,h){f._setOption(g,h)});return f},_setOption:function(d,e){this.options[d]=e;if(d==="disabled")this.widget()[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",e);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(d,e,c){var f=this.options[d];e=a.Event(e);e.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase();
c=c||{};if(e.originalEvent){d=a.event.props.length;for(var g;d;){g=a.event.props[--d];e[g]=e.originalEvent[g]}}this.element.trigger(e,c);return!(a.isFunction(f)&&f.call(this.element[0],e,c)===false||e.isDefaultPrevented())}}})(jQuery);
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(d){return b._mouseDown(d)}).bind("click."+this.widgetName,function(d){if(b._preventClickEvent){b._preventClickEvent=false;d.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(b){b.originalEvent=b.originalEvent||{};if(!b.originalEvent.mouseHandled){this._mouseStarted&&
this._mouseUp(b);this._mouseDownEvent=b;var d=this,e=b.which==1,c=typeof this.options.cancel=="string"?a(b.target).parents().add(b.target).filter(this.options.cancel).length:false;if(!e||c||!this._mouseCapture(b))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==false;if(!this._mouseStarted){b.preventDefault();
return true}}this._mouseMoveDelegate=function(f){return d._mouseMove(f)};this._mouseUpDelegate=function(f){return d._mouseUp(f)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.browser.safari||b.preventDefault();return b.originalEvent.mouseHandled=true}},_mouseMove:function(b){if(a.browser.msie&&!b.button)return this._mouseUp(b);if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault()}if(this._mouseDistanceMet(b)&&
this._mouseDelayMet(b))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==false)?this._mouseDrag(b):this._mouseUp(b);return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=b.target==this._mouseDownEvent.target;this._mouseStop(b)}return false},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-
b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(b){var d=
this.options;if(this.helper||d.disabled||a(b.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(b);if(!this.handle)return false;return true},_mouseStart:function(b){var d=this.options;this.helper=this._createHelper(b);this._cacheHelperProportions();if(a.ui.ddmanager)a.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-
this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);d.containment&&this._setContainment();if(this._trigger("start",b)===false){this._clear();return false}this._cacheHelperProportions();
a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(b,true);return true},_mouseDrag:function(b,d){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!d){d=this._uiHash();if(this._trigger("drag",b,d)===false){this._mouseUp({});return false}this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||
this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return false},_mouseStop:function(b){var d=false;if(a.ui.ddmanager&&!this.options.dropBehaviour)d=a.ui.ddmanager.drop(this,b);if(this.dropped){d=this.dropped;this.dropped=false}if(!this.element[0]||!this.element[0].parentNode)return false;if(this.options.revert=="invalid"&&!d||this.options.revert=="valid"&&d||this.options.revert===true||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,
d)){var e=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){e._trigger("stop",b)!==false&&e._clear()})}else this._trigger("stop",b)!==false&&this._clear();return false},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){var d=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==
b.target)d=true});return d},_createHelper:function(b){var d=this.options;b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],[b])):d.helper=="clone"?this.element.clone():this.element;b.parents("body").length||b.appendTo(d.appendTo=="parent"?this.element[0].parentNode:d.appendTo);b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){if(typeof b=="string")b=b.split(" ");if(a.isArray(b))b={left:+b[0],top:+b[1]||
0};if("left"in b)this.offset.click.left=b.left+this.margins.left;if("right"in b)this.offset.click.left=this.helperProportions.width-b.right+this.margins.left;if("top"in b)this.offset.click.top=b.top+this.margins.top;if("bottom"in b)this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],
this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if(b.containment==
"parent")b.containment=this.helper[0].parentNode;if(b.containment=="document"||b.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&
b.containment.constructor!=Array){var d=a(b.containment)[0];if(d){b=a(b.containment).offset();var e=a(d).css("overflow")!="hidden";this.containment=[b.left+(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,b.left+(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),
10)||0)-this.helperProportions.width-this.margins.left,b.top+(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}}else if(b.containment.constructor==Array)this.containment=b.containment},_convertPositionTo:function(b,d){if(!d)d=this.position;b=b=="absolute"?1:-1;var e=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],
this.offsetParent[0]))?this.offsetParent:this.scrollParent,c=/(html|body)/i.test(e[0].tagName);return{top:d.top+this.offset.relative.top*b+this.offset.parent.top*b-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():c?0:e.scrollTop())*b),left:d.left+this.offset.relative.left*b+this.offset.parent.left*b-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():
c?0:e.scrollLeft())*b)}},_generatePosition:function(b){var d=this.options,e=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,c=/(html|body)/i.test(e[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){if(this.containment){if(b.pageX-this.offset.click.left<this.containment[0])f=this.containment[0]+this.offset.click.left;if(b.pageY-this.offset.click.top<this.containment[1])g=this.containment[1]+
this.offset.click.top;if(b.pageX-this.offset.click.left>this.containment[2])f=this.containment[2]+this.offset.click.left;if(b.pageY-this.offset.click.top>this.containment[3])g=this.containment[3]+this.offset.click.top}if(d.grid){g=this.originalPageY+Math.round((g-this.originalPageY)/d.grid[1])*d.grid[1];g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:!(g-this.offset.click.top<this.containment[1])?g-d.grid[1]:g+d.grid[1]:g;f=this.originalPageX+
Math.round((f-this.originalPageX)/d.grid[0])*d.grid[0];f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-d.grid[0]:f+d.grid[0]:f}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():c?0:e.scrollTop()),left:f-this.offset.click.left-
this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():c?0:e.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(b,d,e){e=e||this._uiHash();a.ui.plugin.call(this,b,[d,e]);if(b=="drag")this.positionAbs=
this._convertPositionTo("absolute");return a.Widget.prototype._trigger.call(this,b,d,e)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8"});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,d){var e=a(this).data("draggable"),c=e.options,f=a.extend({},d,{item:e.element});e.sortables=[];a(c.connectToSortable).each(function(){var g=a.data(this,"sortable");
if(g&&!g.options.disabled){e.sortables.push({instance:g,shouldRevert:g.options.revert});g._refreshItems();g._trigger("activate",b,f)}})},stop:function(b,d){var e=a(this).data("draggable"),c=a.extend({},d,{item:e.element});a.each(e.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;e.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(b);this.instance.options.helper=this.instance.options._helper;
e.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",b,c)}})},drag:function(b,d){var e=a(this).data("draggable"),c=this;a.each(e.sortables,function(){this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=
1;this.instance.currentItem=a(c).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return d.helper[0]};b.target=this.instance.currentItem[0];this.instance._mouseCapture(b,true);this.instance._mouseStart(b,true,true);this.instance.offset.click.top=e.offset.click.top;this.instance.offset.click.left=e.offset.click.left;this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left;
this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top;e._trigger("toSortable",b);e.dropped=this.instance.element;e.currentItem=e.element;this.instance.fromOutside=e}this.instance.currentItem&&this.instance._mouseDrag(b)}else if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",b,this.instance._uiHash(this.instance));this.instance._mouseStop(b,true);this.instance.options.helper=
this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();e._trigger("fromSortable",b);e.dropped=false}})}});a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),d=a(this).data("draggable").options;if(b.css("cursor"))d._cursor=b.css("cursor");b.css("cursor",d.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","iframeFix",{start:function(){var b=
a(this).data("draggable").options;a(b.iframeFix===true?"iframe":b.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")})},stop:function(){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});a.ui.plugin.add("draggable","opacity",{start:function(b,d){b=a(d.helper);d=a(this).data("draggable").options;
if(b.css("opacity"))d._opacity=b.css("opacity");b.css("opacity",d.opacity)},stop:function(b,d){b=a(this).data("draggable").options;b._opacity&&a(d.helper).css("opacity",b._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML")b.overflowOffset=b.scrollParent.offset()},drag:function(b){var d=a(this).data("draggable"),e=d.options,c=false;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!=
"HTML"){if(!e.axis||e.axis!="x")if(d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity)d.scrollParent[0].scrollTop=c=d.scrollParent[0].scrollTop+e.scrollSpeed;else if(b.pageY-d.overflowOffset.top<e.scrollSensitivity)d.scrollParent[0].scrollTop=c=d.scrollParent[0].scrollTop-e.scrollSpeed;if(!e.axis||e.axis!="y")if(d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity)d.scrollParent[0].scrollLeft=c=d.scrollParent[0].scrollLeft+e.scrollSpeed;else if(b.pageX-
d.overflowOffset.left<e.scrollSensitivity)d.scrollParent[0].scrollLeft=c=d.scrollParent[0].scrollLeft-e.scrollSpeed}else{if(!e.axis||e.axis!="x")if(b.pageY-a(document).scrollTop()<e.scrollSensitivity)c=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed);else if(a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity)c=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed);if(!e.axis||e.axis!="y")if(b.pageX-a(document).scrollLeft()<e.scrollSensitivity)c=a(document).scrollLeft(a(document).scrollLeft()-
e.scrollSpeed);else if(a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity)c=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed)}c!==false&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}});a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("draggable"),d=b.options;b.snapElements=[];a(d.snap.constructor!=String?d.snap.items||":data(draggable)":d.snap).each(function(){var e=a(this),c=e.offset();this!=b.element[0]&&b.snapElements.push({item:this,
width:e.outerWidth(),height:e.outerHeight(),top:c.top,left:c.left})})},drag:function(b,d){for(var e=a(this).data("draggable"),c=e.options,f=c.snapTolerance,g=d.offset.left,h=g+e.helperProportions.width,i=d.offset.top,j=i+e.helperProportions.height,k=e.snapElements.length-1;k>=0;k--){var l=e.snapElements[k].left,m=l+e.snapElements[k].width,p=e.snapElements[k].top,r=p+e.snapElements[k].height;if(l-f<g&&g<m+f&&p-f<i&&i<r+f||l-f<g&&g<m+f&&p-f<j&&j<r+f||l-f<h&&h<m+f&&p-f<i&&i<r+f||l-f<h&&h<m+f&&p-f<j&&
j<r+f){if(c.snapMode!="inner"){var o=Math.abs(p-j)<=f,n=Math.abs(r-i)<=f,q=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;if(o)d.position.top=e._convertPositionTo("relative",{top:p-e.helperProportions.height,left:0}).top-e.margins.top;if(n)d.position.top=e._convertPositionTo("relative",{top:r,left:0}).top-e.margins.top;if(q)d.position.left=e._convertPositionTo("relative",{top:0,left:l-e.helperProportions.width}).left-e.margins.left;if(s)d.position.left=e._convertPositionTo("relative",{top:0,left:m}).left-e.margins.left}var x=
o||n||q||s;if(c.snapMode!="outer"){o=Math.abs(p-i)<=f;n=Math.abs(r-j)<=f;q=Math.abs(l-g)<=f;s=Math.abs(m-h)<=f;if(o)d.position.top=e._convertPositionTo("relative",{top:p,left:0}).top-e.margins.top;if(n)d.position.top=e._convertPositionTo("relative",{top:r-e.helperProportions.height,left:0}).top-e.margins.top;if(q)d.position.left=e._convertPositionTo("relative",{top:0,left:l}).left-e.margins.left;if(s)d.position.left=e._convertPositionTo("relative",{top:0,left:m-e.helperProportions.width}).left-e.margins.left}if(!e.snapElements[k].snapping&&
(o||n||q||s||x))e.options.snap.snap&&e.options.snap.snap.call(e.element,b,a.extend(e._uiHash(),{snapItem:e.snapElements[k].item}));e.snapElements[k].snapping=o||n||q||s||x}else{e.snapElements[k].snapping&&e.options.snap.release&&e.options.snap.release.call(e.element,b,a.extend(e._uiHash(),{snapItem:e.snapElements[k].item}));e.snapElements[k].snapping=false}}}});a.ui.plugin.add("draggable","stack",{start:function(){var b=a(this).data("draggable").options;b=a.makeArray(a(b.stack)).sort(function(e,c){return(parseInt(a(e).css("zIndex"),
10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(b.length){var d=parseInt(b[0].style.zIndex)||0;a(b).each(function(e){this.style.zIndex=d+e});this[0].style.zIndex=d+b.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(b,d){b=a(d.helper);d=a(this).data("draggable").options;if(b.css("zIndex"))d._zIndex=b.css("zIndex");b.css("zIndex",d.zIndex)},stop:function(b,d){b=a(this).data("draggable").options;b._zIndex&&a(d.helper).css("zIndex",b._zIndex)}})})(jQuery);
jQuery.ui||function(a){a.ui={version:"1.8",plugin:{add:function(b,d,e){b=a.ui[b].prototype;for(var c in e){b.plugins[c]=b.plugins[c]||[];b.plugins[c].push([d,e[c]])}},call:function(b,d,e){if((d=b.plugins[d])&&b.element[0].parentNode)for(var c=0;c<d.length;c++)b.options[d[c][0]]&&d[c][1].apply(b.element,e)}},contains:function(b,d){return document.compareDocumentPosition?b.compareDocumentPosition(d)&16:b!==d&&b.contains(d)},hasScroll:function(b,d){if(a(b).css("overflow")=="hidden")return false;d=d&&
d=="left"?"scrollLeft":"scrollTop";var e=false;if(b[d]>0)return true;b[d]=1;e=b[d]>0;b[d]=0;return e},isOverAxis:function(b,d,e){return b>d&&b<d+e},isOver:function(b,d,e,c,f,g){return a.ui.isOverAxis(b,e,f)&&a.ui.isOverAxis(d,c,g)},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,
RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};a.fn.extend({_focus:a.fn.focus,focus:function(b,d){return typeof b==="number"?this.each(function(){var e=this;setTimeout(function(){a(e).focus();d&&d.call(e)},b)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","").unbind("selectstart.ui")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})},scrollParent:function(){var b;
b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||
!b.length?a(document):b},zIndex:function(b){if(b!==undefined)return this.css("zIndex",b);if(this.length){b=a(this[0]);for(var d;b.length&&b[0]!==document;){d=b.css("position");if(d=="absolute"||d=="relative"||d=="fixed"){d=parseInt(b.css("zIndex"));if(!isNaN(d)&&d!=0)return d}b=b.parent()}}return 0}});a.extend(a.expr[":"],{data:function(b,d,e){return!!a.data(b,e[3])},focusable:function(b){var d=b.nodeName.toLowerCase(),e=a.attr(b,"tabindex");return(/input|select|textarea|button|object/.test(d)?!b.disabled:
"a"==d||"area"==d?b.href||!isNaN(e):!isNaN(e))&&!a(b)["area"==d?"parents":"closest"](":hidden").length},tabbable:function(b){var d=a.attr(b,"tabindex");return(isNaN(d)||d>=0)&&a(b).is(":focusable")}})}(jQuery);
(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--)this.items[b].item.removeData("sortable-item");return this},_mouseCapture:function(b,d){if(this.reverting)return false;if(this.options.disabled||this.options.type==
"static")return false;this._refreshItems(b);var e=null,c=this;a(b.target).parents().each(function(){if(a.data(this,"sortable-item")==c){e=a(this);return false}});if(a.data(b.target,"sortable-item")==c)e=a(b.target);if(!e)return false;if(this.options.handle&&!d){var f=false;a(this.options.handle,e).find("*").andSelf().each(function(){if(this==b.target)f=true});if(!f)return false}this.currentItem=e;this._removeCurrentsFromItems();return true},_mouseStart:function(b,d,e){d=this.options;this.currentContainer=
this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});
this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();d.containment&&this._setContainment();if(d.cursor){if(a("body").css("cursor"))this._storedCursor=a("body").css("cursor");a("body").css("cursor",d.cursor)}if(d.opacity){if(this.helper.css("opacity"))this._storedOpacity=
this.helper.css("opacity");this.helper.css("opacity",d.opacity)}if(d.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",d.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",b,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!e)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));
if(a.ui.ddmanager)a.ui.ddmanager.current=this;a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(b);return true},_mouseDrag:function(b){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var d=this.options,e=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!=
"HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity)this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop+d.scrollSpeed;else if(b.pageY-this.overflowOffset.top<d.scrollSensitivity)this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop-d.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity)this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft+d.scrollSpeed;else if(b.pageX-this.overflowOffset.left<
d.scrollSensitivity)this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft-d.scrollSpeed}else{if(b.pageY-a(document).scrollTop()<d.scrollSensitivity)e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed);else if(a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity)e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed);if(b.pageX-a(document).scrollLeft()<d.scrollSensitivity)e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed);else if(a(window).width()-
(b.pageX-a(document).scrollLeft())<d.scrollSensitivity)e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)}e!==false&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(d=this.items.length-1;d>=0;d--){e=this.items[d];var c=
e.item[0],f=this._intersectsWithPointer(e);if(f)if(c!=this.currentItem[0]&&this.placeholder[f==1?"next":"prev"]()[0]!=c&&!a.ui.contains(this.placeholder[0],c)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],c):true)){this.direction=f==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(e))this._rearrange(b,e);else break;this._trigger("change",b,this._uiHash());break}}this._contactContainers(b);a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);this._trigger("sort",
b,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(b,d){if(b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var e=this;d=e.placeholder.offset();e.reverting=true;a(this.helper).animate({left:d.left-this.offset.parent.left-e.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:d.top-this.offset.parent.top-e.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},
parseInt(this.options.revert,10)||500,function(){e._clear(b)})}else this._clear(b,d);return false}},cancel:function(){if(this.dragging){this._mouseUp();this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--){this.containers[b]._trigger("deactivate",null,this._uiHash(this));if(this.containers[b].containerCache.over){this.containers[b]._trigger("out",null,this._uiHash(this));this.containers[b].containerCache.over=
0}}}this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();a.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem);return this},serialize:function(b){var d=this._getItemsAsjQuery(b&&b.connected),e=[];b=b||{};a(d).each(function(){var c=
(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);if(c)e.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))});return e.join("&")},toArray:function(b){var d=this._getItemsAsjQuery(b&&b.connected),e=[];b=b||{};d.each(function(){e.push(a(b.item||this).attr(b.attribute||"id")||"")});return e},_intersectsWith:function(b){var d=this.positionAbs.left,e=d+this.helperProportions.width,c=this.positionAbs.top,f=c+this.helperProportions.height,g=b.left,h=g+b.width,i=
b.top,j=i+b.height,k=this.offset.click.top,l=this.offset.click.left;k=c+k>i&&c+k<j&&d+l>g&&d+l<h;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>b[this.floating?"width":"height"]?k:g<d+this.helperProportions.width/2&&e-this.helperProportions.width/2<h&&i<c+this.helperProportions.height/2&&f-this.helperProportions.height/2<j},_intersectsWithPointer:function(b){var d=a.ui.isOverAxis(this.positionAbs.top+
this.offset.click.top,b.top,b.height);b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width);d=d&&b;b=this._getDragVerticalDirection();var e=this._getDragHorizontalDirection();if(!d)return false;return this.floating?e&&e=="right"||b=="down"?2:1:b&&(b=="down"?2:1)},_intersectsWithSides:function(b){var d=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height);b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width);
var e=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection();return this.floating&&c?c=="right"&&b||c=="left"&&!b:e&&(e=="down"&&d||e=="up"&&!d)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){this._refreshItems(b);this.refreshPositions();return this},_connectWith:function(){var b=
this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(b){var d=[],e=[],c=this._connectWith();if(c&&b)for(b=c.length-1;b>=0;b--)for(var f=a(c[b]),g=f.length-1;g>=0;g--){var h=a.data(f[g],"sortable");if(h&&h!=this&&!h.options.disabled)e.push([a.isFunction(h.options.items)?h.options.items.call(h.element):a(h.options.items,h.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),h])}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,
null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=e.length-1;b>=0;b--)e[b][0].each(function(){d.push(this)});return a(d)},_removeCurrentsFromItems:function(){for(var b=this.currentItem.find(":data(sortable-item)"),d=0;d<this.items.length;d++)for(var e=0;e<b.length;e++)b[e]==this.items[d].item[0]&&this.items.splice(d,1)},_refreshItems:function(b){this.items=[];this.containers=[this];var d=this.items,
e=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],c=this._connectWith();if(c)for(var f=c.length-1;f>=0;f--)for(var g=a(c[f]),h=g.length-1;h>=0;h--){var i=a.data(g[h],"sortable");if(i&&i!=this&&!i.options.disabled){e.push([a.isFunction(i.options.items)?i.options.items.call(i.element[0],b,{item:this.currentItem}):a(i.options.items,i.element),i]);this.containers.push(i)}}for(f=e.length-1;f>=0;f--){b=e[f][1];
c=e[f][0];h=0;for(g=c.length;h<g;h++){i=a(c[h]);i.data("sortable-item",b);d.push({item:i,instance:b,width:0,height:0,left:0,top:0})}}},refreshPositions:function(b){if(this.offsetParent&&this.helper)this.offset.parent=this._getParentOffset();for(var d=this.items.length-1;d>=0;d--){var e=this.items[d],c=this.options.toleranceElement?a(this.options.toleranceElement,e.item):e.item;if(!b){e.width=c.outerWidth();e.height=c.outerHeight()}c=c.offset();e.left=c.left;e.top=c.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);
else for(d=this.containers.length-1;d>=0;d--){c=this.containers[d].element.offset();this.containers[d].containerCache.left=c.left;this.containers[d].containerCache.top=c.top;this.containers[d].containerCache.width=this.containers[d].element.outerWidth();this.containers[d].containerCache.height=this.containers[d].element.outerHeight()}return this},_createPlaceholder:function(b){var d=b||this,e=d.options;if(!e.placeholder||e.placeholder.constructor==String){var c=e.placeholder;e.placeholder={element:function(){var f=
a(document.createElement(d.currentItem[0].nodeName)).addClass(c||d.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!c)f.style.visibility="hidden";return f},update:function(f,g){if(!(c&&!e.forcePlaceholderSize)){g.height()||g.height(d.currentItem.innerHeight()-parseInt(d.currentItem.css("paddingTop")||0,10)-parseInt(d.currentItem.css("paddingBottom")||0,10));g.width()||g.width(d.currentItem.innerWidth()-parseInt(d.currentItem.css("paddingLeft")||0,10)-parseInt(d.currentItem.css("paddingRight")||
0,10))}}}}d.placeholder=a(e.placeholder.element.call(d.element,d.currentItem));d.currentItem.after(d.placeholder);e.placeholder.update(d,d.placeholder)},_contactContainers:function(b){for(var d=null,e=null,c=this.containers.length-1;c>=0;c--)if(!a.ui.contains(this.currentItem[0],this.containers[c].element[0]))if(this._intersectsWith(this.containers[c].containerCache)){if(!(d&&a.ui.contains(this.containers[c].element[0],d.element[0]))){d=this.containers[c];e=c}}else if(this.containers[c].containerCache.over){this.containers[c]._trigger("out",
b,this._uiHash(this));this.containers[c].containerCache.over=0}if(d)if(this.containers.length===1){this.containers[e]._trigger("over",b,this._uiHash(this));this.containers[e].containerCache.over=1}else if(this.currentContainer!=this.containers[e]){d=1E4;c=null;for(var f=this.positionAbs[this.containers[e].floating?"left":"top"],g=this.items.length-1;g>=0;g--)if(a.ui.contains(this.containers[e].element[0],this.items[g].item[0])){var h=this.items[g][this.containers[e].floating?"left":"top"];if(Math.abs(h-
f)<d){d=Math.abs(h-f);c=this.items[g]}}if(c||this.options.dropOnEmpty){this.currentContainer=this.containers[e];c?this._rearrange(b,c,null,true):this._rearrange(b,null,this.containers[e].element,true);this._trigger("change",b,this._uiHash());this.containers[e]._trigger("change",b,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[e]._trigger("over",b,this._uiHash(this));this.containers[e].containerCache.over=1}}},_createHelper:function(b){var d=
this.options;b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],[b,this.currentItem])):d.helper=="clone"?this.currentItem.clone():this.currentItem;b.parents("body").length||a(d.appendTo!="parent"?d.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]);if(b[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(b[0].style.width==
""||d.forceHelperSize)b.width(this.currentItem.width());if(b[0].style.height==""||d.forceHelperSize)b.height(this.currentItem.height());return b},_adjustOffsetFromHelper:function(b){if(typeof b=="string")b=b.split(" ");if(a.isArray(b))b={left:+b[0],top:+b[1]||0};if("left"in b)this.offset.click.left=b.left+this.margins.left;if("right"in b)this.offset.click.left=this.helperProportions.width-b.right+this.margins.left;if("top"in b)this.offset.click.top=b.top+this.margins.top;if("bottom"in b)this.offset.click.top=
this.helperProportions.height-b.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b=
{top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),
10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if(b.containment=="parent")b.containment=this.helper[0].parentNode;if(b.containment=="document"||b.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment=="document"?
document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var d=a(b.containment)[0];b=a(b.containment).offset();var e=a(d).css("overflow")!="hidden";this.containment=[b.left+(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(d).css("borderTopWidth"),
10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,b.left+(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,d){if(!d)d=
this.position;b=b=="absolute"?1:-1;var e=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,c=/(html|body)/i.test(e[0].tagName);return{top:d.top+this.offset.relative.top*b+this.offset.parent.top*b-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():c?0:e.scrollTop())*b),left:d.left+this.offset.relative.left*b+this.offset.parent.left*b-(a.browser.safari&&
this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():c?0:e.scrollLeft())*b)}},_generatePosition:function(b){var d=this.options,e=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,c=/(html|body)/i.test(e[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();
var f=b.pageX,g=b.pageY;if(this.originalPosition){if(this.containment){if(b.pageX-this.offset.click.left<this.containment[0])f=this.containment[0]+this.offset.click.left;if(b.pageY-this.offset.click.top<this.containment[1])g=this.containment[1]+this.offset.click.top;if(b.pageX-this.offset.click.left>this.containment[2])f=this.containment[2]+this.offset.click.left;if(b.pageY-this.offset.click.top>this.containment[3])g=this.containment[3]+this.offset.click.top}if(d.grid){g=this.originalPageY+Math.round((g-
this.originalPageY)/d.grid[1])*d.grid[1];g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:!(g-this.offset.click.top<this.containment[1])?g-d.grid[1]:g+d.grid[1]:g;f=this.originalPageX+Math.round((f-this.originalPageX)/d.grid[0])*d.grid[0];f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-d.grid[0]:f+d.grid[0]:f}}return{top:g-
this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():c?0:e.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():c?0:e.scrollLeft())}},_rearrange:function(b,d,e,c){e?e[0].appendChild(this.placeholder[0]):d.item[0].parentNode.insertBefore(this.placeholder[0],
this.direction=="down"?d.item[0]:d.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var f=this,g=this.counter;window.setTimeout(function(){g==f.counter&&f.refreshPositions(!c)},0)},_clear:function(b,d){this.reverting=false;var e=[];!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var c in this._storedCSS)if(this._storedCSS[c]=="auto"||this._storedCSS[c]=="static")this._storedCSS[c]=
"";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!d&&e.push(function(f){this._trigger("receive",f,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!d)e.push(function(f){this._trigger("update",f,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){d||e.push(function(f){this._trigger("remove",
f,this._uiHash())});for(c=this.containers.length-1;c>=0;c--)if(a.ui.contains(this.containers[c].element[0],this.currentItem[0])&&!d){e.push(function(f){return function(g){f._trigger("receive",g,this._uiHash(this))}}.call(this,this.containers[c]));e.push(function(f){return function(g){f._trigger("update",g,this._uiHash(this))}}.call(this,this.containers[c]))}}for(c=this.containers.length-1;c>=0;c--){d||e.push(function(f){return function(g){f._trigger("deactivate",g,this._uiHash(this))}}.call(this,
this.containers[c]));if(this.containers[c].containerCache.over){e.push(function(f){return function(g){f._trigger("out",g,this._uiHash(this))}}.call(this,this.containers[c]));this.containers[c].containerCache.over=0}}this._storedCursor&&a("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!d){this._trigger("beforeStop",
b,this._uiHash());for(c=0;c<e.length;c++)e[c].call(this,b);this._trigger("stop",b,this._uiHash())}return false}d||this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!d){for(c=0;c<e.length;c++)e[c].call(this,b);this._trigger("stop",b,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},
_uiHash:function(b){var d=b||this;return{helper:d.helper,placeholder:d.placeholder||a([]),position:d.position,originalPosition:d.originalPosition,offset:d.positionAbs,item:d.currentItem,sender:b?b.element:null}}});a.extend(a.ui.sortable,{version:"1.8"})})(jQuery);
jQuery.widget("ui.ncbiautocomplete",{options:{webserviceUrl:"/portal/utils/autocomp.fcgi",isUrlRelative:false,dictionary:"",responseFormat:"old",disableUrl:null,prefUrl:null,zIndex:1001,isEnabled:true,hasRelatedMatches:false,minLength:2,expandPauseTime:400,maxListLimit:null,isCrossDomain:false},_create:function(){this._createOptionsBox();this._setHandlers();this._setWebServicePath();this._lastEnteredTerm="";this._setSGData()},_activeRequest:null,_keys:{up:38,down:40,enter:13,escape:27,tab:9,shift:16},
_setSGData:function(){this.sgData={jsevent:"autocomplete",userTyped:"",hasScrolled:false,usedArrows:false,selectionAction:"",optionSelected:"",optionIndex:-1,optionsCount:-1}},_setHandlers:function(){var a=this;jQuery(this.element).focus(function(){a._focused()}).keypress(function(d){a._keyPress(d)}).keydown(function(d){a._keyPress(d)}).keyup(function(d){a._keyUp(d)}).attr("AUTOCOMPLETE","OFF");var b=jQuery(this.element)[0];b.autocomplete="off";b.AUTOCOMPLETE="OFF";jQuery(window).resize(function(){a._isActive&&
a._positionOptionsBox()});jQuery(document).click(function(d){a._checkClickEvent(d)});jQuery(this._gol.optionsBox).hover(function(){if(a._isActive)a._isOptionsBoxFocused=true},function(){if(a._isActive)a._isOptionsBoxFocused=false})},_isOptionsBoxFocused:false,_createOptionsBox:function(){if(jQuery.ui.ncbiautocomplete._globalOptionsList===null){jQuery.ui.ncbiautocomplete._globalOptionsList={};jQuery.ui.ncbiautocomplete._globalOptionsList.optionsBox=jQuery("<div class='ui-ncbiautocomplete-holder'></div>").appendTo(document.body);
jQuery.ui.ncbiautocomplete._globalOptionsList.optionsList=jQuery("<ul class='ui-ncbiautocomplete-options' role='menu' aria-live='assertive'></ul>").appendTo(jQuery(jQuery.ui.ncbiautocomplete._globalOptionsList.optionsBox));jQuery.ui.ncbiautocomplete._globalOptionsList.optionsActions=jQuery("<div class='ui-ncbiautocomplete-actions'></div>").appendTo(jQuery(jQuery.ui.ncbiautocomplete._globalOptionsList.optionsBox));jQuery.ui.ncbiautocomplete._globalOptionsList.prefLink=jQuery("<a href='#' class='ui-ncbiautocomplete-link-pref'>Preferences</a>").appendTo(jQuery(jQuery.ui.ncbiautocomplete._globalOptionsList.optionsActions));
jQuery.ui.ncbiautocomplete._globalOptionsList.turnOffLink=jQuery("<a href='#' class='ui-ncbiautocomplete-link-off'>Turn off</a>").appendTo(jQuery(jQuery.ui.ncbiautocomplete._globalOptionsList.optionsActions));jQuery.ui.ncbiautocomplete._globalOptionsList.isIE6=jQuery.browser.msie&&parseInt(jQuery.browser.version,10)<7;if(jQuery.ui.ncbiautocomplete._globalOptionsList.isIE6)jQuery.ui.ncbiautocomplete._globalOptionsList.optionsBox.iframe=jQuery("<iframe src='javascript:\"\";' class='ui-ncbiautocomplete-iframe' marginwidth='0' marginheight='0' align='bottom' scrolling='no' frameborder='0'></iframe>").appendTo(document.body)}this._gol=
jQuery.ui.ncbiautocomplete._globalOptionsList},_positionOptionsBox:function(){if(this._gol.activeElement){var a=jQuery(this.element),b=jQuery(this._gol.activeElement);a=a.attr("id")||a[0];b=b.attr("id")||b[0];a!==b&&this._hideOptions()}var d=this;if(this._gol.activeElement!==this.element){b=this.options.prefUrl!==null?"block":"none";a=this.options.disableUrl!==null?"block":"none";var e=b==="block"||a==="block"?"block":"none";jQuery(this._gol.prefLink).css("display",b).attr("href",this.options.prefUrl).unbind("click").click(function(){d._prefLinkClick()});
jQuery(this._gol.turnOffLink).css("display",a).unbind("click").click(function(j){d.turnOff();j.preventDefault()});jQuery(this._gol.optionsActions).css("display",e)}else this._gol.activeElement=this.element;e=jQuery(this.element);b=e.outerWidth();a=e.outerHeight()-2;e=e.offset();var c=jQuery(this._gol.optionsBox);if(jQuery.browser.msie)var f=0,g=0,h=0;else{f=parseInt(c.css("borderLeftWidth"),10);g=parseInt(c.css("borderRightWidth"),10);h=-1}c.css("top",e.top+a+"px").css("left",e.left+"px").width(b-
f-g+h+"px");var i=parseInt(this.options.zIndex,10);c.css("zIndex",i);c=jQuery(this._gol.optionsList);c[0].onscroll=function(){};c.scrollTop(0);c[0].onscroll=function(){d.sgData.hasScrolled=true};if(this._gol.isIE6){c=jQuery(this._gol.optionsBox.iframe);c.css("top",e.top+a+"px").css("left",e.left+"px").width(b-f-g+h+"px");c.css("zIndex",i-1)}},_isActive:false,_focused:function(){this._gol.activeElement!==this.element&&this._hideOptions();this._positionOptionsBox();if(this.options.isEnabled){this._isActive=
true;this._hasBeenEscaped=false}},_lastEnteredTerm:null,_isCached:false,_hasBeenEscaped:false,_lastKeyPressDwnUpScroll:new Date,_lastFoundMatch:null,_findMatchInCache:function(a){this._lastFoundMatch=null;if(typeof this._localCache[this.options.dictionary]==="undefined")return false;var b="l"+(this.options.maxListLimit||"n");if(typeof this._localCache[this.options.dictionary][b]==="undefined")return false;for(var d=0;a.length>1||d<10;){a=a.substr(0,a.length-1);var e=this._localCache[this.options.dictionary][b][a];
if(e)if(e.isCompleteList){this._lastFoundMatch=a;return true}else break;d++}return false},_cloneMatchObject:function(a){var b={};b.matchedText=a.matchedText.toString();b.matches=a.matches.join("~~**~~**~~").split("~~**~~**~~");b.isCompleteList=a.isCompleteList===true;return b},_timerTriggerEnterEvent:null,_clearTriggerEnterEvent:function(){this._timerTriggerEnterEvent=null},_triggerEnterEvent:function(){var a=this;if(!this._timerTriggerEnterEvent){this.element.trigger("ncbiautocompleteenter",this.sgData);
this.element.trigger("ncbiautocompletechange",this.sgData);this._sgSend();this._timerTriggerEnterEvent=window.setTimeout(function(){a._clearTriggerEnterEvent()},10)}},_keyPress:function(a){if(a.keyCode===this._keys.enter){if(this._isActive&&this._isOptionsBoxOpen())if(this._currIndex===this.options.maxListLimit&&jQuery("li:eq("+this._currIndex+")",this._gol.optionsList).hasClass("ui-ncbiautocomplete-show-more")){this._hideOptions(true);this._gotoShowAll()}else if(this.sgData.optionSelected===jQuery(this.element).val()){if(!this._timerTriggerEnterEvent){this.sgData.selectionAction=
"enter";this._hideOptions(true);this._triggerEnterEvent()}a.stopPropagation();a.preventDefault();return false}}else if(a.keyCode===this._keys.tab){this.sgData.selectionAction="tab";this._sgSend();this._isActive=this._isOptionsBoxFocused=false;this._hideOptions(true)}else if(jQuery(this.element).val().length===0)this._hideOptions(true);else if(a.keyCode===this._keys.up)this._scrollUpDownRateLimiter(-1);else a.keyCode===this._keys.down&&!a.shiftKey&&this._scrollUpDownRateLimiter(1)},_scrollUpDownRateLimiter:function(a){if(!(new Date-
this._lastKeyPressDwnUpScroll<90)){this._moveSelection(a);this._lastKeyPressDwnUpScroll=new Date}},_keyUp:function(a){if(!(!this.options.isEnabled||this._hasBeenEscaped)){var b=jQuery(this.element).val().toLowerCase().replace(/^\s+/,"").replace(/\s+$/," "),d="l"+(this.options.maxListLimit||"n");if(a.keyCode!==this._keys.up)if(a.keyCode!==this._keys.down)if(a.keyCode!==this._keys.enter)if(a.keyCode===this._keys.tab){this._isActive=this._isOptionsBoxFocused=false;this._hideOptions(true)}else if(a.keyCode===
this._keys.escape){this._isActive=this._isOptionsBoxFocused=false;this._hasBeenEscaped=true;this._hideOptions()}else if(!(this._lastEnteredTerm===b||a.keyCode===this._keys.shift))if(this._localCache[this.options.dictionary]&&this._localCache[this.options.dictionary][d]&&this._localCache[this.options.dictionary][d][b]){this._isActive=true;this._lastEnteredTerm=b;this._displayOptions(this._localCache[this.options.dictionary][d][b])}else if(this._isCached&&this._findMatchInCache(b)){this._isActive=true;
this._localCache[this.options.dictionary][d][b]=this._cloneMatchObject(this._localCache[this.options.dictionary][d][this._lastFoundMatch]);this._lastEnteredTerm=b;this._filteredCache(b)}else if(b.length>=this.options.minLength){if(!this._isActive){this._isActive=true;this._focused()}if(this._lastEnteredTerm!==b){this._lastEnteredTerm=b;this._fecthOptions(b)}}else this._hideOptions()}},_webSerivcePath:null,_setWebServicePath:function(){var a=this.options.webserviceUrl,b="";if(this.options.isCrossDomain)this._webSerivcePath=
"http://www.ncbi.nlm.nih.gov/portal/utils/autocomp.fcgi";else{if(!this.options.isUrlRelative){b=window.location.protocol+"//"+window.location.host;if(!a.charAt(0)==="/")a="/"+a}this._webSerivcePath=b+a}},_fecthOptions:function(a){this._activeRequest!==null&&this._activeRequest.abort();var b=this,d=this.options.responseFormat==="old"?"text":"json";a={dict:this.options.dictionary,q:a};if(this.options.isCrossDomain){this._addGlobalListener("NSuggest_CreateData");jQuery.ajax({url:this._webSerivcePath,
dataType:"script",data:a,cache:true})}else this._activeRequest=jQuery.get(this._webSerivcePath,a,function(e,c){b._handleResponse(e,c)},d)},_handleResponse:function(a,b){this._activeRequest=null;if(b==="success")this.options.responseFormat==="old"?this._oldFormat(a):this._displayOptions(a);else this.turnOff()},_addGlobalListener:function(a){var b=this;window[a]=function(d,e,c){b._displayOptions({matchedText:d,matches:e,isCompleteList:c===1})}},_oldFormat:function(a){if(a.indexOf("_dictionary_error")!==
-1)this.turnOff(true);else if(jQuery.trim(a).indexOf("NSuggest_CreateData")!==-1){this._addGlobalListener("NSuggest_CreateData_new");eval(a.replace("NSuggest_CreateData","NSuggest_CreateData_new"))}else this._hideOptions()},_localCache:{},_putInCache:function(a){var b="l"+(this.options.maxListLimit||"n");this._localCache[this.options.dictionary]||(this._localCache[this.options.dictionary]={});this._localCache[this.options.dictionary][b]||(this._localCache[this.options.dictionary][b]={});this._localCache[this.options.dictionary][b][this._lastEnteredTerm]||
(this._localCache[this.options.dictionary][b][this._lastEnteredTerm]=a)},_displayOptions:function(a){this._putInCache(a);if(a.matchedText!==this._lastEnteredTerm){a.isCompleteList=true;this._filteredCache(this._lastEnteredTerm,a)}else{this.sgData.userTyped=this._lastEnteredTerm;this.sgData.optionsCount=a.matches.length;this._positionOptionsBox();var b=this;if(a.matchedText==="_dictionary_error")this.turnOff(true);else{var d=a.matches;this._isCached=a.isCompleteList;var e=a.previousFormat;if(!e){var c=
this.options.maxListLimit;e=0;if(c===null||d.length<=c)var f=d.length;else{f=c;e=d.length-f}c=(this._lastEnteredTerm||"").replace(/([\^\$\\\?\(\)\[\]\*\+\{\}\|\/\.\,])/g,"\\$1");var g=new RegExp("("+c+")","i");c=new Array(d.length);var h=this.options.hasRelatedMatches;for(f=f-1;f>=0;f--){var i=d[f],j="",k=i.indexOf("@");if(k!==-1){j='valueId="'+i.substr(k+1)+'"';i=i.substr(0,k);h=true}c[f]="<li role='menuitem' "+j+">"+i.replace(g,"<span>$1</span>").replace(/\\"/g,'"')+"</li>"}e>0&&c.push("<li class='ui-ncbiautocomplete-show-more' role='menuitem' moreOption='true'>See all results</li>");
e=c.join("");if(c.length===0||!h&&e.indexOf("<span>")===-1){this._hideOptions();return}a.previousFormat=e}d=jQuery(this._gol.optionsBox);a=jQuery(this._gol.optionsList);a.scrollTop(0);a.html(e);if(d.css("display")!=="block"&&this._isActive){d.css("display","block");if(this._gol.isIE6){e=jQuery(this._gol.optionsBox.iframe).css("display","block");e.height(e.height()+jQuery(this._gol.optionsActions).height())}}else this._isActive||this._hideOptions();e=jQuery(".ui-ncbiautocomplete-options li");c=(e.eq(0).outerHeight()||
20)*e.length;h="hidden";if(!this.options.maxListLimit){c=218;h="auto"}e.closest(".ui-ncbiautocomplete-holder").height(c).css("min-height",c+"px");e.closest(".ui-ncbiautocomplete-options").height(c).css("overflow-y",h);e=d.width();jQuery("li",a).hover(function(){b._addHightlightMouse(this)},function(){b._removeHighlight("mouse")}).click(function(){b._optionClicked(this);return false});jQuery(a).mouseout(function(){b._removeHighlight("mouse");b._resetCurrentIndex()});this._resetCurrentIndex();d=jQuery("li",
d);e=jQuery(this._gol.optionsBox).width();var l=jQuery.browser.msie&&!this._gol.isIE6||jQuery.browser.safari||jQuery.browser.opera;c=d.eq(0);parseFloat(c.css("padding-left"));h=c.html();c.html("<span>MMMMMMMMM.</span>");g=c.children("span:first").width()/10;c.html("<span>&hellip;<span>");c.children("span:first").width();c.html(h);var m=a.width(),p=Math.floor(e/g);d.each(function(){var r=jQuery(this);r.css("white-space","nowrap");var o=r.html();r.attr("fullText",o).attr("acValue",o.replace(/<\/?span>/gi,
""));if(r.width()/r.attr("acValue").length<9)if(l)r.attr("partialText",r.html()).attr("isIEExpand",true).css("width",m-28+"px");else{var n=o.toLowerCase().indexOf("<span>"),q=o.toLowerCase().indexOf("</span>"),s=function(u){var v=false;if(u>=n&&u<n+6){u=u-n;u=n+u;v=true}if(u>=q&&u<q+7){u=u-q;u=q+u}return{cutLoc:u,addSpan:v}},x=function(u,v,y,H,E){o.indexOf("Journal of magnetic");u=s(u);var C=o.substr(0,u.cutLoc)+(u.addCloseSpan?"</span>":"")+"&hellip;";r.html(C);if(C===H){if(r.height()!==A&&typeof E!==
"undefined")C=E;r.attr("partialText",C).css("white-space","nowrap")}else if(r.height()===A){v=C.toString()+"";E=Math.floor((u.cutLoc+y)/2);x(E,u.cutLoc,y,C,v)}else{y=Math.floor((parseInt(u.cutLoc)+parseInt(v))/2);x(y,v,u.cutLoc,C,E)}};r.css("white-space","normal").css("width",m-22+"px");var w=r.height();r.html(".");var A=r.height();r.html(o);w>A&&x(p,0,o.length)}});a.scrollTop(0);this._removeHighlight("mouse");this._hideOptionsIfOffPage()}}},_filteredCache:function(a,b){var d=true,e="l"+(this.options.maxListLimit||
"n");if(a===null)d=false;else{if(b){b=b;if(typeof this._localCache[this.options.dictionary]==="undefined")this._localCache[this.options.dictionary]={};else if(typeof this._localCache[this.options.dictionary][e]==="undefined")this._localCache[this.options.dictionary][e]={}}else b=this._localCache[this.options.dictionary][e][a];b.matchedText=a;if(!this.options.hasRelatedMatches){d=a.replace(/([\^\$\\\?\(\)\[\]\*\+\{\}\|\/\.\,])/g,"\\$1");d=new RegExp(d,"ig");for(var c=b.matches.join("!!!~~~!!!").split("!!!~~~!!!"),
f=c.length-1;f>=0;f--)c[f].match(d)===null&&c.splice(f,1);b.matches=c;this._localCache[this.options.dictionary][e][a]=b;d=c.length>0}}d?this._displayOptions(this._localCache[this.options.dictionary][e][a]):this._hideOptions()},_removeHighlight:function(a){if(!(a==="mouse"&&new Date-this._lastKeyPressDwnUpScroll<100)){var b=this;jQuery("li",this._gol.optionsList).removeClass("ui-ncbiautocomplete-options-high").each(function(){b._collapseOption(this)})}},_addHightlightMouse:function(a){if(new Date-
this._lastKeyPressDwnUpScroll>100){this._resetCurrentIndex();this._currIndex=jQuery(a).prevAll("li").length;this._addHightlight(a)}},_addHightlight:function(a){this._removeHighlight();jQuery(a).addClass("ui-ncbiautocomplete-options-high");var b=this;this._expandTimer&&window.clearTimeout(this._expandTimer);this._expandTimer=window.setTimeout(function(){b._expandOption(a)},this.options.expandPauseTime)},_expandOption:function(a){if(jQuery(a).hasClass("ui-ncbiautocomplete-options-high")){a=jQuery(a).attr("isExpanded",
true);var b=a.attr("fullText");if(a.html()!==b||a.attr("isIEExpand")){a.html(b).css("text-overflow","").css("white-space","normal").css("-o-text-overflow","");this._scrollIntoView()}}},_collapseOption:function(a){a=jQuery(a);a.attr("isIEExpand")?a.css("text-overflow","ellipsis").css("white-space","nowrap").css("-o-text-overflow","ellipsis"):a.css("white-space","nowrap").html(a.attr("partialText"))},_optionClicked:function(a){a=jQuery(a);if(a.hasClass("ui-ncbiautocomplete-show-more"))this._gotoShowAll();
else{var b=this._cleanUpSelectionText(a);a=a.attr("valueId")||null;this.sgData.optionSelected=b;this.sgData.optionIndex=this._currIndex;this.sgData.valueId=a;this.sgData.selectionAction="click";this._sgSend();b=jQuery(this.element).val(b);b.attr("valueid",a);b.trigger("ncbiautocompleteoptionclick",this.sgData);b.trigger("ncbiautocompletechange",this.sgData)}this._isOptionsBoxFocused=false;this._hideOptions()},_isOptionsBoxOpen:function(){return jQuery(this._gol.optionsBox).css("display")==="block"},
_hideOptions:function(a){this._gol.activeElement=null;if(!(this._isOptionsBoxFocused&&!a)){var b=jQuery(this._gol.optionsBox);a&&jQuery(this._gol.optionsBox).css("display","none");this._gol.isIE6&&jQuery(this._gol.optionsBox.iframe).css("display","none");this._resetCurrentIndex();this._isActive=false;this._lastEnteredTerm=null;b=jQuery(this._gol.optionsBox);a=jQuery(this._gol.optionsList);b.css("display","none");a.html("")}},_setTextCursorToEnd:function(a){var b=this.element;jQuery(b).val(a);if(b.createTextRange){a=
b.createTextRange();a.moveStart("character",b.value.length);a.collapse();a.select()}},_resetCurrentIndex:function(){this._currIndex=-1},_cleanUpSelectionText:function(a){return jQuery.trim(a.attr("acValue")).replace(/&amp;/gi,"&").replace(/\\"/g,'"')},_currIndex:-1,_moveSelection:function(a){if(this._isActive){this.sgData.usedArrows=true;var b=jQuery("li",this._gol.optionsList).length;this._currIndex+=a;this._removeHighlight();a=this._lastEnteredTerm;var d="";if(!(a===null||a.length<2)){if(this._currIndex<
0||this._currIndex>=b)this._currIndex=this._currIndex===-2?b-1:-1;if(this._currIndex!==-1){b=jQuery("li:eq("+this._currIndex+")",this._gol.optionsList);this._addHightlight(b);if(this._currIndex===this.options.maxListLimit){this.sgData.optionSelected="";this.sgData.valueId=""}else{a=this._cleanUpSelectionText(b);d=b.attr("valueId")||null;this.sgData.optionSelected=a;this.sgData.valueId=d}}else{this.sgData.optionSelected="";this.sgData.valueId=""}this._setTextCursorToEnd(a);this._scrollIntoView();this.sgData.optionIndex=
this._currIndex}}},_scrollIntoView:function(){var a=jQuery("li:eq("+this._currIndex+")",this._gol.optionsList);if(a.length!==0){var b=jQuery(this._gol.optionsList),d=b.height(),e=b.scrollTop(),c=a[0].offsetTop;a=a.height();if(c-d+a>e){e=jQuery("li:eq("+(this._currIndex+1)+")",this._gol.optionsList);b.scrollTop((e.length===1?e[0].offsetTop:c+a+10)-d)}else c<e&&b.scrollTop(c)}},turnOff:function(a){this._setOption("isEnabled",false);this._isOptionsBoxFocused=false;this._hideOptions();if(!a){typeof ncbi!==
"undefined"&&ncbi.sg&&ncbi.sg.ping&&ncbi.sg.ping(this.element[0],"autocompleteoffclick","dictionary="+this.options.dictionary);a=this.options.disableUrl;if(a!==null&&a.length>0){var b=jQuery.ui.jig._getFncFromStr(a);typeof b==="function"?b():jQuery.get(a)}}},_prefLinkClick:function(){typeof ncbi!=="undefined"&&ncbi.sg&&ncbi.sg.ping&&ncbi.sg.ping(this.element[0],"autocompleteprefclick","dictionary="+this.options.dictionary)},_checkClickEvent:function(a){if(this._isActive)if(jQuery(this.element)[0]!=
a.target){this._isActive=this._isOptionsBoxFocused=false;this._hideOptions()}},_sgSend:function(){typeof ncbi!=="undefined"&&typeof ncbi.sg!=="undefined"&&typeof ncbi.sg.ping!=="undefined"&&ncbi.sg.ping(this.sgData,false)},getSgData:function(){return this.sgData},_gotoShowAll:function(){var a=jQuery(this.element),b=a.val();a.trigger("ncbiautocompleteshowall",{value:b,dictionary:this.options.dictionary})},_hideOptionsIfOffPage:function(){if(this.options.maxListLimit){var a=this,b=jQuery(".ui-ncbiautocomplete-options li"),
d=b.eq(0).outerHeight()||20,e=jQuery(this._gol.optionsBox),c=jQuery(window).height(),f=e.position().top,g=f+e.outerHeight()-(document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset||0);if(b.last().hasClass("ui-ncbiautocomplete-show-more")){var h=f+"-"+c+"-"+g;if(!this.choppedDetails)this.choppedDetails={};var i=this.choppedDetails[h],j=0,k=function(){g=f+e.outerHeight()-(document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset||0);if(g>c){b=jQuery(".ui-ncbiautocomplete-options li");
var m=b.length-2;if(m>=0){b.eq(m).remove();sz=d*(b.length-1);b.closest(".ui-ncbiautocomplete-holder").height(sz).css("min-height",sz+"px");b.closest(".ui-ncbiautocomplete-options").height(sz).css("overflow-y","hidden");j++;k()}}else a.choppedDetails[h].count=j};if(i){var l=i.count;if(l>0){i=2*i.length-l-b.length-2;b.filter(":lt("+(b.length-1)+")").filter(":gt("+i+")").remove();b=jQuery(".ui-ncbiautocomplete-options li");sz=d*b.length;b.closest(".ui-ncbiautocomplete-holder").height(sz).css("min-height",
sz+"px");b.closest(".ui-ncbiautocomplete-options").height(sz).css("overflow-y","hidden")}j=l}else this.choppedDetails[h]={count:0,length:b.length};k()}else{l=Math.floor((c-f)/d)*d;i=b.length*d;if(l>i)l=i;b.closest(".ui-ncbiautocomplete-holder").height(l).css("min-height",l+"px");b.closest(".ui-ncbiautocomplete-options").height(l).css("overflow-y","auto")}}}});jQuery.ui.ncbiautocomplete._globalOptionsList=null;
jQuery.widget("ui.ncbiaccordion",{_create:function(){this.element.hasClass("jig-accordion")&&typeof console!=="undefined"&&console.warn&&console.warn("The classname widget identifier jig-accordion has been depreciated, please change it to jig-ncbiaccordion");var a={};jQuery.extend(a,this.options,jQuery.ui.accordion.prototype.options);this.element.accordion(a)}});
jQuery.widget("ui.ncbitabs",{_create:function(){this.element.hasClass("jig-tabs")&&typeof console!=="undefined"&&console.warn&&console.warn("The classname widget identifier jig-tabs has been depreciated, please change it to jig-ncbitabs");var a={};jQuery.extend(a,this.options,jQuery.ui.tabs.prototype.options);this.element.tabs(a)}});
jQuery.widget("ui.ncbigrid",{options:{isPageable:false,pageSize:5,currentPage:1,isPageToolbarHideable:true,isSortable:false,columnTypes:[],sortRowIndex:0,isPresorted:false,sortColumn:-1,sortColumnDir:1,titleAscending:"sort ascending",titleDescending:"sort descending",isScrollable:false,width:null,height:"10em",usesPercentage:true,hasFilterControl:false,filterIsCaseInsensitive:false,filterColumnIndex:null,filterIsInverse:null,filterAsUserTypes:false,isLoadingMessageShown:false,loadingText:"Loading",
isZebra:true},_init:function(){},_create:function(){this._cleanUpLegacyMarkUp();if(this.options.isPageable){this.options.currentPage-=1;this.createPagingElements();this.addPagingEvents();this.addPagingListeners();this._gotoPage(this._getCurrentPage())}if(this.options.isSortable){this.applySortClasses();this.createHeaderLinks();this.addHeaderEvents();this.sortDefaults()}jQuery(this.element).addClass("ui-ncbigrid");this.options.isScrollable=this.options.isScrollable||jQuery(this.element).hasClass("jig-ncbigrid-scroll")||
this.element.parent().hasClass("jig-ncbigrid-scroll");if(this.options.isScrollable){this._setupScrollMarkup();if(jQuery.browser.mozilla)this._setupScrollFirefox();else if(jQuery.browser.safari)this._setupScrollSafariChrome();else if(jQuery.browser.msie&&parseInt(jQuery.browser.version)>=8||jQuery.browser.opera)this._setupScrollIE8();else jQuery.browser.msie&&parseInt(jQuery.browser.version)<8&&this._setupScrollIE6_7();this._addResetScrollListener();this.options.isPageable&&this.setPagingElementsWidth();
if(!jQuery.browser.mozilla){var a=this;jQuery.ui.jig.registerPageHeightWatcher();jQuery(document.body).bind("ncbijigpageheightchanged",function(){a.forceRedraw()})}}else jQuery(this.element).addClass("ui-ncbigrid-nonscroll");this.options.hasFilterControl&&this._addFilterControl();this._addLoadingBar();this._makeZebraStripped();this._addZebraWatcher();this._addCaptionCurves();this._addRowClickWatcher();this.element.trigger("ncbigridpreready")},destroy:function(){if(this.options.isPageable){this.removePagingEvents();
this.removePagingElements();this.removePagingListeners()}if(this.options.isSortable){this.removeSortClasses();this.removeHeaderEvents();this.removeHeaderLinks()}if(this.options.isScrollable){if(jQuery.browser.mozilla)this._destroyScrollFirefox();else if(jQuery.browser.safari||jQuery.browser.opera)this._destroyScrollSafariChrome();else if(jQuery.browser.msie&&parseInt(jQuery.browser.version)>=8)this._destroyScrollIE8();else jQuery.browser.msie&&parseInt(jQuery.browser.version)<8&&this._destroyScrollIE6_7();
this._removeResetScrollListener();this._destroyScrollMarkup()}this.options.hasFilterControl&&this._destroyFilterControl();jQuery.Widget.prototype.destroy.apply(this,arguments)},_cleanUpLegacyMarkUp:function(){var a=this.element.parent();if(a.hasClass("ui-ncbigrid-inner-div")){a.parent();a.children().clone(true);this.element=a.children().eq(0).unwrap()}a=this.element.parent();if(a.hasClass("jig-ncbigrid-scroll")||this.element.hasClass("jig-ncbigrid-scroll"))this.element.addClass("ui-ncbigrid-scroll");
a.hasClass("jig-ncbigrid")&&this.element.addClass("ui-ncbigrid");if(this.options.isPagable)this.options.isPageable=this.options.isPagable},controlsHTML:'                                         <div class="ui-ncbigrid-paged-toolbar">                                                <div class="ui-ncbigrid-paged-gotoControl">                        Go To Page <input type="text" value="1" size="2"/>                        </div>                                                <div class="ui-ncbigrid-paged-countItems">                        Items <span class="ui-ncbigrid-paged-startRow">1</span> - <span class="ui-ncbigrid-paged-endRow">10</span>                        </div>                                                <div class="ui-ncbigrid-paged-pageControl">                        <button>previous</button>                        Page <span class="ui-ncbigrid-paged-startPage">1</span> of <span class="ui-ncbigrid-paged-endPage">2</span>                        <button>next</button>                        </div>                                            </div>',
createPagingElements:function(){this.controlBar=jQuery(this.controlsHTML).insertAfter(this.element);this._showHidePageToolbar();this._addResizeListener();this.setPagingElementsWidth()},_showHidePageToolbar:function(){if(this.options.isPageToolbarHideable)this.getRowCount()<=this.options.pageSize?this.controlBar.hide():this.controlBar.show()},_addResizeListener:function(){var a=this;jQuery(window).resize(function(){a.setPagingElementsWidth()});if(jQuery.browser.mozilla){jQuery(window).bind("DOMMouseScroll",
function(d){d.ctrlKey&&window.setTimeout(function(){a.setPagingElementsWidth()},5)});jQuery(document).keypress(function(d){if(d.ctrlKey&&(d.which===48||d.which===96))window.setTimeout(function(){a.setPagingElementsWidth()},5)})}var b=function(){window.setTimeout(function(){a.setPagingElementsWidth()},10);window.setTimeout(function(){a.setPagingElementsWidth()},500)};this.element.bind("ncbigridpreready",b).bind("ncbigridupdated",b).bind("ncbigridupdated",function(){a._showHidePageToolbar()})},setPagingElementsWidth:function(){if(this.options.isPageable){if(jQuery.browser.msie&&
parseFloat(jQuery.browser.version)<7)newWidth=this.options.isScrollable?this.element.parent().outerWidth():this.element.outerWidth();else{if(!jQuery.browser.mozilla&&this.element.parent().hasClass("ui-ncbigrid-scroll"))var a=this.element.parent().outerWidth(),b=this.element.parent().width();else{a=this.element.outerWidth();b=this.element.width()}a=a-b;a=this.controlBar.outerWidth()-this.controlBar.width()-a;newWidth=b-a}this.controlBar.width(newWidth)}},removePagingElements:function(){this.controlBar.remove();
this.controlBar=null},addPagingEvents:function(){var a=this,b=this.controlBar.find("div.ui-ncbigrid-paged-pageControl button");b.eq(0).click(function(d){a.gotoPrevPage();d.preventDefault()});b.eq(1).click(function(d){a.gotoNextPage();d.preventDefault()});this.element.parent().find("div.ui-ncbigrid-paged-gotoControl input").keypress(function(d){if(d.keyCode===13){a.gotoPage(this.value);d.preventDefault()}})},removePagingEvents:function(){this.controlBar.find("div.ui-ncbigrid-paged-pageControl button").unbind("click");
this.controlBar.find("div.ui-ncbigrid-paged-gotoControl input").unbind("keypress")},addPagingListeners:function(){var a=this;this.element.bind("ncbigridcolumnsorted",function(){a.gotoPage(1)})},removePagingListeners:function(){this.element.unbind("ncbigridcolumnsorted")},setPage:function(){var a=this._getCurrentPage(),b=this.getMaxPage();this.updateRows(a,b);this._updatePagingMargin();this.updateButtons(a,b);this.updatePagingText(a,b);this.updateGoto(a,b);this.updateItemRange(a,b);this._notifyGridUpdated()},
updateRows:function(a){this.element.trigger("ncbigridresetscroll");var b=this.options.pageSize,d=this.getRowCount();a=a*b;var e=a+b;b="";if(e<d)b+=":lt("+e+")";if(a>0)b+=":gt("+(a-1)+")";a=d=jQuery("tbody tr:not(.ncbigrid-row-filtered)",this.element);if(b.length>0){d.not(".ui-ncbigrid-rowHidden").addClass("ui-ncbigrid-rowHidden");a=d.filter(b)}a.removeClass("ui-ncbigrid-rowHidden");this._notifyGridUpdated()},updateButtons:function(a,b){var d=a===0;a=a===b-1;b=this.controlBar.find("div.ui-ncbigrid-paged-pageControl button");
b.eq(0).attr("disabled",d);b.eq(1).attr("disabled",a)},updatePagingText:function(a,b){var d=this.controlBar.find("div.ui-ncbigrid-paged-pageControl");d.find("span.ui-ncbigrid-paged-startPage").html(a+1);d.find("span.ui-ncbigrid-paged-endPage").html(b)},updateGoto:function(a){this.controlBar.find("div.ui-ncbigrid-paged-gotoControl input").val(a+1)},updateItemRange:function(a){var b=this.options.pageSize,d=this.getRowCount();a=a*b;b=a+b;if(b>d)b=d;d=this.controlBar.find("div.ui-ncbigrid-paged-countItems");
d.find("span.ui-ncbigrid-paged-startRow").html(a+1);d.find("span.ui-ncbigrid-paged-endRow").html(b)},_getCurrentPage:function(){return this.options.currentPage},getCurrentPage:function(){return this._getCurrentPage()+1},getMaxPage:function(){return Math.ceil(this.getRowCount()/this.options.pageSize)},getRowCount:function(){return jQuery(this.element).find("tbody tr:not(.ncbigrid-row-filtered)").length},gotoFirstPage:function(){this._gotoPage(0)},gotoLastPage:function(){this._gotoPage(this.getMaxPage())},
gotoNextPage:function(){this._gotoPage(this._getCurrentPage()+1)},gotoPrevPage:function(){this._gotoPage(this._getCurrentPage()-1)},gotoPage:function(a){this._gotoPage(parseInt(a,10)-1)},_gotoPage:function(a){if(isNaN(a)||a<0)a=0;else if(a>=this.getMaxPage())a=this.getMaxPage()-1;this.options.currentPage=a;this.setPage()},_stndHeightTbody:null,_hasSpacerSet:false,_updatePagingMargin:function(){if(this._stndHeightTbody===null){this._stndHeightTable=this.element.outerHeight();this._stndHeightTbody=
this.element.find("tbody:eq(0)").outerHeight();this._stndScrollHeight=this.element.find("tbody:eq(0)")[0].scrollHeight}if(jQuery.browser.mozilla)this.options.isScrollable?this._updatePagingMarginFirefox_Scroll():this._updatePagingMarginFirefox_NonScroll();else this.options.isScrollable?this._updatePagingMarginIE6_7_Scroll():this._updatePagingMarginIE6_7_NonScroll()},_updatePagingMarginFirefox_Scroll:function(){var a=this.element.find("tbody:eq(0)"),b=a.find("tr.ui-ncbigrid-spacerElement"),d=a.height(),
e=this._stndHeightTbody-d;if(d===a[0].scrollHeight&&this.getMaxPage()==this._getCurrentPage()+1&&this._getCurrentPage()!==0){if(b.length===0){b="<td>&nbsp;</td>";for(d=this.getColumnCount(true);d>1;d--)b+="<td>&nbsp;</td>";b=jQuery("<tr class='ui-ncbigrid-spacerElement'>"+b+"</tr>");a.append(b)}else b.show();b.height(e);a.css("overflow-y","hidden")}else if(b.length===1){a.css("overflow-y","scroll");b.hide().remove()}},_updatePagingMarginFirefox_NonScroll:function(){if(!this.options.isScrollable)if(this._stndHeightTbody){var a=
this.element;a.find("tbody:eq(0)");a.find("tfoot th:eq(0)").outerHeight();a.outerHeight()}},_updatePagingMarginIE6_7_Scroll:function(){var a=this.element.find("tbody:eq(0)"),b=a.find("tr.ui-ncbigrid-spacerElement"),d=a.height(),e=this.element.parent().outerHeight();this.element.parent();var c=this.element.find("thead:eq(0)").outerHeight()||0,f=this.element.find("thead:eq(0)").outerHeight()||0,g=this.element.find("caption:eq(0)").outerHeight()||0;d=e-d-c-f-g-8;if(d>0&&this.getMaxPage()==this._getCurrentPage()+
1&&this._getCurrentPage()!==0){if(b.length===0){b="<td>&nbsp;</td>";for(e=this.getColumnCount(true);e>1;e--)b+="<td>&nbsp;</td>";b=jQuery("<tr class='ui-ncbigrid-spacerElement'>"+b+"</tr>");a.append(b)}else b.show();b.height(d);a.css("overflow-y","hidden")}else if(b.length===1){a.css("overflow-y","scroll");b.hide().remove()}},_updatePagingMarginIE6_7_NonScroll:function(){if(!this.options.isScrollable){var a=this._stndHeightTbody;if(a){var b=this.element,d=b.find("tbody:eq(0)"),e=d.outerHeight(),c=
b.find("thead:eq(0)").outerHeight()||0,f=b.find("caption:eq(0)").outerHeight()||0,g=0;if(parseFloat(jQuery.browser.version)<7)g=d.find("tr:has(td:visible)").height()||0;a=a-e-c-f-3+g;d=this._hasSpacerSet;if(a>0&&!d&&this.getMaxPage()==this._getCurrentPage()+1&&this._getCurrentPage()!==0){b.css("margin-bottom",a);this._hasSpacerSet=true}else if(d){b.css("margin-bottom",0);this._hasSpacerSet=false}else this._stndHeightTbody=e}}},applySortClasses:function(){var a=this.options.columnTypes;if(a.length===
0)jQuery("th",this.element).addClass("sortNone");else{var b=function(d){a[d]!=="none"&&jQuery(this).addClass("sortNone")};jQuery("thead th",this.element).each(b);jQuery("tfoot th",this.element).each(b)}},removeSortClasses:function(){jQuery("th",this.table).removeClass("sortNone sortAsc sortDsc")},createHeaderLinks:function(){var a=this.options.titleAscending,b=this.options.columnTypes,d=b.length>0,e=function(c){if(!d||b[c]!=="none"){var f=jQuery(this);f.data("colIndex",c);c=f.html()||f.text();f.html("<a href='#'>"+
c+"</a>").find("a").attr("title",a)}};jQuery(this.element).find("thead tr").eq(this.options.sortRowIndex).find("th").each(e);jQuery(this.element).find("tfoot tr").eq(this.options.sortRowIndex).find("th").each(e)},removeHeaderLinks:function(){jQuery("th").each(function(){var a=jQuery(this);a.removeData("colIndex");var b=a.find("a");b=b.html()||b.text();a.html(b)})},addHeaderEvents:function(){var a=this;jQuery("th a",this.element).mousedown(function(){a._sort(jQuery(this).parent().data("colIndex"));
return false}).click(function(){return false})},removeHeaderEvents:function(){jQuery("th a",this.element).die("click")},sort:function(a,b){a--;this._sort(a,b)},_sort:function(a,b){this.element.trigger("ncbigridshowloadingbar");this._killActiveSort();this.isPageable||this.element.trigger("ncbigridresetscroll");var d=this.element.find("tbody tr.ui-ncbigrid-spacerElement");d.lenght===1&&d.remove();if(typeof a==="object")a=a.data("colIndex");else{jQuery("thead th").eq(a);a=a}this._setColumnDirection(a,
b);this._sortData()},_killActiveSort:function(){this._killSort=true;this._sortTimer&&window.clearTimeout(this._sortTimer);this._sortTimer=null},_setColumnDirection:function(a,b){var d=typeof b!=="undefined"&&b!==null;b=d?b:1;var e=this.options.sortColumn;if(e===a)d||(b=this.options.sortColumnDir*-1);else if(e!==-1){d=jQuery(this.element).find("thead:not(.cloned):not([cloned]) tr").eq(this.options.sortRowIndex).find("th").eq(e);var c=jQuery(this.element).find("tfoot tr").eq(this.options.sortRowIndex).find("th").eq(e);
d.add(c).addClass("sortNone").removeClass("sortAsc sortDsc").find("a").attr("title",this.options.titleAscending);jQuery(this.element).find("tbody tr:not(.ui-ncbigrid-spacerElement) td:nth-child("+(e+1)+")").removeClass("sorted")}this.options.sortColumn=a;this.options.sortColumnDir=b;e=b===1?"sortAsc":"sortDsc";b=b===1?this.options.titleDescending:this.options.titleAscending;d=jQuery(this.element).find("thead:not(.cloned):not([cloned]) tr").eq(this.options.sortRowIndex).find("th").eq(a);c=jQuery(this.element).find("tfoot tr").eq(this.options.sortRowIndex).find("th").eq(a);
d.add(c).removeClass("sortAsc sortDsc sortNone").addClass(e).find("a").attr("title",b);jQuery(this.element).find("tbody tr:not(.ui-ncbigrid-spacerElement) td:nth-child("+(a+1)+")").addClass("sorted")},_killSort:true,_sortData:function(){this._killSort=false;var a=jQuery("tbody",this.element),b=this.options.sortColumn,d=this.options.sortColumnDir,e=this.getColumnType(b+1),c=this,f=[];jQuery("tr",a).each(function(){var i=jQuery(this),j=c._columnTypeConversion(i.find("td").eq(b),e);f.push({data:j,row:i.clone()})});
f=typeof e==="function"?f.sort(function(i,j){return e.call(c,i,j,d)}):f.sort(function(i,j){return c._defaultSortFnc(i,j,d)});var g=a.clone().children().remove().end(),h=function(){for(var i=0;f.length>0&&i<10;){if(c._killSort)break;var j=f.shift();g.append(j.row);i++}if(c._killSort)c._killSort=false;else if(f.length>0)c._sortTimer=window.setTimeout(function(){h()},0);else{a.after(g);a.remove();c.element.trigger("ncbigridcolumnsorted",[c.options.sortColumn+1,c.options.sortColumnDir]).trigger("ncbigridhideloadingbar");
c.options.isPageable||c._notifyGridUpdated()}};h()},_defaultSortFnc:function(a,b,d){return a.data>b.data?d:a.data<b.data?-d:0},_columnTypeConversion:function(a,b,d){var e="";e=d?a.html():a.text();e=jQuery.trim(e);switch(b){case "int":aCell=parseInt(e,10);break;case "float":case "num":aCell=parseFloat(e);break;case "date":aCell=new Date(e);break;case "str-sensitive":aCell=e;break;case "str-insensitive":aCell=e.toLowserCase();break;default:aCell=e.toLowerCase();break}return aCell},getColumnType:function(a){return this.options.columnTypes[a]||
"str"},sortDefaults:function(){if(this.options.sortColumn!==-1){var a=this;this.element.bind("ncbigridpreready",function(){a.sort(a.options.sortColumn,a.options.sortColumnDir)})}},_setupScrollMarkup:function(){var a=jQuery(this.element);if(a.parent().hasClass("jig-ncbigrid-scroll"))a.parent().addClass("ui-ncbigrid-scroll");else{a.wrap("<div class='ui-ncbigrid-scroll'></div>");a.data("addedWrapper",true)}var b=a.attr("cellpadding")||"",d=a.attr("cellspacing")||"";if(b.length===0||d.length===0){a.data("addedCellPadding",
true);a.attr("cellpadding","0")}if(d.length===0){a.data("addedCellSpacing",true);a.attr("cellspacing","0")}if(!this.options.usesPercentage||jQuery.browser.msie)if(b=this.options.width||typeof a[0].currentStyle!=="undefined"?a[0].currentStyle.width:jQuery(parseFloat(a[0].style.width||a.css("width"),10)).toEm()){a.css("width","100%").data("ncbigrid_orgWidth",b);a.parent().css("width",b)}if(this.options.scrollHeight)this.options.height=this.options.scrollHeight;b=this.options.height;if(jQuery.browser.mozilla){b=
jQuery("tbody",a);d=jQuery("caption",a).height()||0;var e=jQuery("thead",a).height()||0;a=jQuery("tfoot",a).height()||0;d=d+e+a;a=parseFloat(this.options.height);if(this.options.height&&this.options.height.toString().indexOf("em")>0){d=parseFloat(jQuery(d).toEm());a=a-d+"em"}else a=a+"px";b.css("max-height",a);b.css("height",a)}else{a.css("height","auto");a.parent().css("height",b)}},_setupScrollFirefox:function(){var a=jQuery(this.element);a.parent().addClass("firefox");jQuery("thead tr th:last-child",
a).css("border-right","0px")},_setupScrollSafariChrome:function(){function a(){var w=jQuery(d).find("thead");if(w.length==2&&w.eq(0).position().top!==w.eq(1).position().top)s();else if(w.eq(0).position().top==0&&x<10){window.setTimeout(a,10);x++}}function b(){d.find("tbody td").length===0?window.setTimeout(b,5):s()}var d=jQuery(this.element),e=d.parent();e.addClass("sa_ch");var c=jQuery("thead",d),f=jQuery("th",c),g=jQuery("caption",d);c=jQuery("thead",d);f=jQuery("th",c);var h=jQuery("tfoot",d),
i=jQuery("th",h),j=jQuery("tbody",d);jQuery("td",j);var k=c.clone().prependTo(d).attr("cloned","true"),l=h.clone().appendTo(d).attr("cloned","true");g.position();c.position();c.height();var m=c.height();jQuery("col",d);e.position();e.height();var p=c.position();p=p&&p.left?p.left:0;c.css("position","absolute").css("top",k.position().top+0+"px").css("left",p+"px").height(0);var r=false;if(h.length>0){h.css("position","absolute").css("top",e.height()-1+"px").css("left",p+"px").height(m);r=true}jQuery("tr:eq(0) td",
j);var o=jQuery("th",k),n=o.length;j=k.find("th");parseInt(j.eq(0).css("padding-top"),10);var q=null,s=function(){f.each(function(v){var y=v+1===n?0:1;y=o.eq(v).width()+y;jQuery(this).width(y);r&&i.eq(v).width(y)});var w=e.width()-d.outerWidth();if(w!==16&&w!==15){e.css("min-width",d.outerWidth()+16);k.css("min-width",d.outerWidth()+16);r&&l.css("min-width",d.outerWidth()+16)}w=e.position().top;var A=k.position().left;if(r){var u=w+e.height()-o.eq(0).outerHeight()+1;h.css("top",u+"px")}c.css("position",
"absolute").css("top",w+g.height()+"px").css("left",A+"px");q&&jQuery("tbody tr td.lastRowGrid",d).removeClass("lastRowGrid").css("border-bottom-color",q);w=jQuery("tbody tr:has(td:visible):last-child td",d);q=w.css("border-bottom-color");w.css("border-bottom-color",w.css("background-color")).addClass("lastRowGrid")};this.forceRedraw=this._resizeListener=function(){s()};this.renderingWatcher();jQuery(window).resize(this._resizeListener);jQuery(this.element).bind("ncbigridupdated",this._resizeListener);
var x=0;jQuery(window).load(a);b()},forceRedraw:function(){},renderingWatcher:function(){var a=false,b=this,d=false,e=jQuery.browser.safari,c=function(){function f(){if(h<g.height()){h=g.height();b.forceRedraw()}if(i<100)a=window.setTimeout(f,100);if(e)if(i===1){var j=b.element.find("thead");if(j.length==2)if(j.eq(0).find("tr").width()!==j.eq(1).find("tr").width()){j.hide();d=true}}else{if(i===2&&d){b.element.find("thead").show();b.forceRedraw();d=false}}else if(i===13){b.element.hide();window.setTimeout(function(){b.element.show()},
2);i=100}i++}a&&window.clearTimeout(a);var g=jQuery(document.body),h=g.height(),i=0;f()};jQuery(window).resize(c);c()},_setupScrollIE8:function(){function a(c){var f=jQuery(b.element),g=jQuery("caption:visible",f).not(d),h=f.parent(),i=jQuery("thead.orginal",f);i.css("display","none");if(i.length!==0){var j=jQuery("tfoot",f),k=jQuery("tbody",f),l=k.find("tr:not(.ui-ncbigrid-rowHidden):has(td:visible):eq(0) td"),m=k.find("tr:not(.ui-ncbigrid-rowHidden):has(td:visible):last td"),p=jQuery("th",i),r=
jQuery("th",j);b.ie8Reset=function(){var u=jQuery(this.element).find("tbody");u.find("td[addedTopPadding=true]").attr("addedTopPadding","false").eq(0).attr("orgPaddingTop");u=u.find("td[addedBotPadding=true]").attr("addedBotPadding","false");var v=u.eq(0).attr("orgPaddingBot");u.css("padding-bottom",v)};c&&b.ie8Reset();var o=i.outerHeight();p.eq(0).attr("orgHeight",p.eq(0).height());r.eq(0).attr("orgHeight",r.eq(0).height());c=b.element.find("thead.clone");var n=c.find("th"),q=c.position(),s=b.element.find("tbody").position();
b.element.position();c=q&&q.left?q.left:0;var x=q&&q.top?q.top:0;if(q.top>s.top){c=s.left;x=s.top-p.eq(0).height()-1}if(q.top===0){i.css("display","none");var w=function(){if(b.element.position().top===0)b.genFix=window.setTimeout(w,1);else a()};w()}p=0;if(x>0){p=b.options.isSortable?0:1;i.css("position","absolute").css("left",c+"px").css("top",x-p+"px")}i.find("th").each(function(u){var v=0;if(u===0)v=b.element.width%2===0?1:0.5;u=n.eq(u);jQuery(this).width(u.outerWidth()-0.6+v-parseFloat(u.css("padding-left"))).height(u.height()+
4)});p=b.options.isPageable?2:3;j.outerHeight();j.css("position","absolute").css("left",c-1+"px").css("top",x+h.outerHeight()-i.outerHeight()-j.outerHeight()+p);var A=function(){return 0};A=function(u,v){return l.eq(v).outerWidth()-1};r.each(function(u){jQuery(this).width(A(this,u)).height(o)});r=(r=m.eq(0).css("padding-bottom"))||0;m.eq(0).attr("orgPaddingBot",r);r=parseInt(r)-1;if(j.length>0&&h.height()<k.height()+j.height()){j=j.height()+parseInt(r,10)+"px";m.css("padding-bottom",j).attr("addedBotPadding",
"true")}if(d.length>0){d.css("top",h.position().top+"px").css("left",h.position().left+"px").attr("cloned","true");(g=g.width())&&d.width(g)}i.css("display","block");f.trigger("ncbigridieresize")}}var b=this,d=jQuery("caption:visible",this.element).clone().prependTo(this.element).css("position","absolute");jQuery(this.element).parent().addClass("ie8");a();var e=this.element.find("thead");e.clone().addClass("clone").appendTo(this.element);e.addClass("orginal").hide();this.resetScroll=a;this._resizeListener=
function(){a(true)};jQuery(window).resize(function(){b._resizeListener();window.setTimeout(b._resizeListener,20)});jQuery(this.element).bind("ncbigridcolumnsorted",this._resizeListener).bind("ncbigridupdated",this._resizeListener).bind("ncbigridpreready",this._resizeListener);this.forceRedraw=this._resizeListener;this.renderingWatcher()},_setupScrollIE6_7:function(){function a(){d[0].style.width="100%";d.width(d.outerWidth()-6);var l=h.find("th"),m=g.find("th");m.each(function(){jQuery(this).css("width",
"auto")});m.each(function(p){jQuery(this).width(l.eq(p).width())});j.element.trigger("ncbigridieresize")}function b(l){if(e[0].scrollTop>0){j.element.find("thead").hide();window.setTimeout(function(){j.element.find("thead").show()},2);l&&window.setTimeout(b,130)}}var d=jQuery(this.element),e=d.parent();e.addClass("ie6_7");parseFloat(jQuery.browser.version)<7&&document.all[0].text.indexOf("<?xml")!==-1&&e.addClass("ie6_docIgnored");var c=jQuery("caption",d),f=c.html();c.css("height",c.outerHeight());
c.html("<div class='ui-ncbigrid-scroll-caption'>"+f+"</div>");var g=d.find("thead"),h=g.clone(true).addClass("orginal").appendTo(d);g.addClass("cloned");var i=g.find("th");h.find("th").each(function(l){l=i.eq(l).data("colIndex");l!==null&&jQuery(this).data("colIndex",l)});if(jQuery.browser.version>=7){d.width(d.width()-14);f=jQuery("thead.orginal tr th:last-child, tfoot tr th:last-child");f.css("border-right-color",f.css("background-color"));c.length===0&&g.children().height(f.height()+1).css("top",
"-1px")}else{c=jQuery("thead.orginal tr th:first-child",d);c.css("padding-left",(parseInt(c.css("padding-left"),10)||0)+1+"px")}var j=this,k=function(l){window._scrollredrawIssueHeight=l;j.element.hide();j.element.show()};this.element.bind("ncbigridfilterapplied",function(){k(-1)}).bind("ncbigridfilterremoved",function(){k(0)});this.forceRedraw=function(){k(0);setTimeout(b,100)};if(this.options.usesPercentage){jQuery(window).resize(a);this.renderingWatcher()}j.element.bind("ncbigridcolumnsorted",
b);j.renderingWatcher();parseFloat(jQuery.browser.version)==7&&a()},_destroyScrollMarkup:function(){var a=jQuery(this.element);if(a.data("addedWrapper")){var b=a.data("ncbigrid_orgWidth");b&&a.css("width",b);a.unwrap()}a.data("addedCellPadding")&&a.removeAttr("cellpadding");a.data("addedCellSpacing")&&a.removeAttr("cellspacing");this.element.removeData("addedWrapper").removeData("ncbigrid_orgWidth").removeData("addedCellPadding").removeData("addedCellSpacing")},_destroyScrollFirefox:function(){var a=
jQuery(this.element);a.parent().addClass("firefox");jQuery("thead tr th:last-child",a).css("border-right","1px")},_destroyScrollSafariChrome:function(){var a=jQuery(this.element);a.parent().addClass("sa_ch");jQuery("caption",a).css("position","").css("top","").width("").height("");jQuery("thead",a).not("[cloned=true]").remove().end().removeAttr("cloned");jQuery("tfoot",a).not("[cloned=true]").remove().end().removeAttr("cloned");if(this._resizeListener){jQuery(window).unbind("resize",this._resizeListener);
this._resizeListener=null}},_destroyScrollIE8:function(){jQuery(this.element).parent().addClass("ie8");jQuery("caption[cloned=true]").remove();if(this._resizeListener){jQuery(window).unbind("resize",this._resizeListener);this._resizeListener=null}this.ie8Reset()},_destroyScrollIE6_7:function(){jQuery(this.element).parent().removeClass("ie6_7")},_addResetScrollListener:function(){var a=this;this.element.bind("ncbigridresetscroll",function(){a.resetScrollPosition()})},_removeResetScrollListener:function(){this.element.unbind("ncbigridresetscroll")},
resetScrollPosition:function(){(jQuery.browser.mozilla?jQuery(this.element).find("tbody")[0]:jQuery(this.element).parent()[0]).scrollTop=0},_filterControlMarkUp:'<div class="filter"><label for="filter-list">Filter:</label><input id="filter-list" type="text" /><button>Search</button></div>',_addFilterControl:function(){var a=this.element.parent(),b=this.element;if(a.length>0&&(a.hasClass("ui-ncbigrid-scroll")||a.hasClass("ui-ncbigrid")))b=a;this._filterControl=jQuery(this._filterControlMarkUp).insertBefore(b);
var d=this;this._filterControl.find("button").click(function(){d._runFilter()});this.options.filterAsUserTypes?this._filterControl.find("input").keyup(function(){d._runFilter()}):this._filterControl.find("input").keyup(function(e){e.keyCode===13&&d._runFilter()})},_destroyFilterControl:function(){this._filterControl&&this._filterControl.find("button").unbind("click").end().find("input").unbind("keyup").end().remove()},_runFilter:function(){var a=this._filterControl.find("input").val(),b=this.options.filterIsCaseInsensitive||
null,d=this.options.filterColumnIndex||null,e=this.options.filterIsInverse||null;this.removeFilterRows();a.length>0&&this.filterRows(a,b,d,e)},_addCaptionCurves:function(){jQuery(this.element).find("caption").addClass("ui-corner-top");jQuery.browser.safari&&this.element.find("caption").css("margin-right","-1px")},_makeZebraStripped:function(){if(this.options.isZebra){var a=jQuery(this.element).find("tbody tr:has(td:visible):not(.ui-ncbigrid-spacerElement)");a.filter(":even").addClass("ui-ncbigrid-row-even").removeClass("ui-ncbigrid-row-odd");
a.filter(":odd").addClass("ui-ncbigrid-row-odd").removeClass("ui-ncbigrid-row-even")}},_addZebraWatcher:function(){var a=this;this.element.bind("ncbigridupdated",function(){a._makeZebraStripped()})},_removeZebraWatcher:function(){},_addRowClickWatcher:function(){var a=this;jQuery(this.element).find("tbody").click(function(b){b=jQuery(b.originalTarget).closest("td");var d=b.closest("tr");a.element.trigger("ncbigridrowclick",[{row:d,cell:b}])})},_removeRowClickWatcher:function(){},_notifyGridUpdated:function(){this.element.trigger("ncbigridupdated")},
_deleteRowHelper:function(a){a=a||"";jQuery("tbody tr"+a,this.element).remove()},_getCellDataHelper:function(a,b){if(a<=0||a>this.getRowCount()||b<0||b>this.getColumnCount())return null;if(a=jQuery("tbody tr:nth-child("+a+") td:nth-child("+b+")",this.element)){b=this._getColumnType(b-1);if(b==="str"||!b)b="str-sensitive";return this._csColumnTypeConversion(a[0],b,true)}},_getColumnType:function(a){var b=this.options.columnTypes,d=b.length;if(!(a>=d&&d.length!==0))if(d===0)return"str";else{a=b[a];
if(typeof a==="string"&&a.indexOf("fnc:")===0){b=a.substr(4,a.length).split(".");a=window[b[0]];for(d=1;d<b.length;d++)a=a[b[d]]}return a}},_csColumnTypeConversion:function(a,b,d){var e="";e=d?a.innerHTML:jQuery(a).text();e=jQuery.trim(e);switch(b){case "int":aCell=parseInt(e,10);break;case "float":case "num":aCell=parseFloat(e);break;case "date":aCell=new Date(e);break;case "str-sensitive":aCell=e;break;case "str-insensitive":aCell=e.toLowserCase();break;default:aCell=e.toLowerCase();break}return aCell},
_getColumnDataHelper:function(a){var b=[],d=this,e=this._getColumnType(a-1);if(e==="str"||!e)e="str-sensitive";jQuery("tbody tr td:nth-child("+a+")",this.element).each(function(c,f){b.push(d._csColumnTypeConversion(f,e,true))});if(b.length!==0)return b},_getRowDataHelper:function(a){var b=[],d=this;jQuery("tbody tr:nth-child("+a+") td",this.element).each(function(e,c){e=d._getColumnType(e);if(e==="str"||!e)e="str-sensitive";b.push(d._csColumnTypeConversion(c,e,true))});if(b.length!==0)return b},addHTMLRowData:function(a,
b,d){var e=this.getRowCount(),c="";if(typeof b=="undefined")c=":last-child";else{if(b>e)b=e;else if(b<0){b=1;d="before"}c=":nth-child("+b+")"}e===0&&jQuery("tbody"+c,this.element).append(a);d&&d.toLowerCase()==="before"?jQuery("tbody tr"+c,this.element).before(a):jQuery("tbody tr"+c,this.element).after(a);this.options.isPageable?this._gotoPage(this.options.currentPage):this._notifyGridUpdated()},deleteAllRows:function(){this._deleteRowHelper();this.options.isPageable&&this._gotoPage(0)},deleteRow:function(a){if(typeof a!=
"undefined"){a=jQuery.isArray(a)?a.sort():[a];for(var b=a.length-1;b>=0;b--)this._deleteRowHelper(":nth-child("+a[b]+")");this.options.isPageable&&this._gotoPage(this.options.currentPage)}},_custFilterCnt:0,filterRows:function(a,b,d,e){if(!(typeof a=="undefined"||a.length===0)){this.element.trigger("ncbigridshowloadingbar");if(!jQuery.isArray(a)){orgTxt=a;a=[[a,b,d,e]]}e=f=jQuery("tbody tr:not(.ncbigrid-row-filtered)",this.element);for(var c,f,g=0;g<a.length;g++){var h=a[g],i=h[0],j=h[2],k=h[3];h=
"";if(typeof j!="undefined"&&j!==null)h=":nth-child("+j+")";k=k?"not-":"";var l="",m=null;if(typeof i==="function"){l="-fnctionTest";m=this._custFilterCnt;this._custFilterCnt=m+1;m="filter_temp_"+m;jQuery.ui.jig[m]=i;i="jQuery.ui.jig."+m}else if(i.constructor&&i.constructor.toString().indexOf("RegExp")>0)l="-regexp";else if(b)l="-insensitive";f=j!==null?f.find("td"+h+":"+k+"contains"+l+"("+i+")").parent():f.filter(":"+k+"contains"+l+"("+i+")");if(m)jQuery.ui.jig[m]=null}if(e)c=e.not(f).each(function(p,
r){jQuery(r).addClass("ncbigrid-row-filtered").attr("isfiltered","true")});this.options.isPageable&&this._gotoPage(0);this.element.trigger("ncbigridfilterapplied",[a,b,d,c,f]).trigger("ncbigridhideloadingbar");this.options.isPageable?this._gotoPage(this.options.currentPage):this._notifyGridUpdated();return{filteredRows:c,remainingRows:f}}},getCellData:function(a,b){if(!(typeof a=="undefined"||typeof b=="undefined"))return this._getCellDataHelper(a,b)},getColumnCount:function(a){a=a===false?":visible":
"";a=jQuery(this.element).find("tbody tr:not(.ui-ncbigrid-rowHidden):eq(0) td"+a).length;if(a===0)a=jQuery(this.element).find("thead tr:last th").length;return a},getColumnData:function(a){if(typeof a==="undefined")return null;else if(jQuery.isArray(a)){for(var b=[],d=0;d<a.length;d++){if(a[d]<=0||a[d]>this.getColumnCount())b.push(null);b.push(this._getColumnDataHelper(a[d]))}return b}else{if(a<=0||a>this.getColumnCount())return null;return this._getColumnDataHelper(a)}},getColumnType:function(a){return this._getColumnType(a-
1)},getRowData:function(a){if(typeof a!=="undefined")if(jQuery.isArray(a)){for(var b=[],d=0;d<a.length;d++)b.push(this._getRowDataHelper(a[d]));return b}else return this._getRowDataHelper(a)},highlightRows:function(a,b,d,e){var c=jQuery.browser.msie&&parseFloat(jQuery.browser.version)<7;if(!(typeof a=="undefined"||a.length===0)){this.element.trigger("ncbigridshowloadingbar");var f=[],g=b?"-insensitive":"";e=e?"not-":"";if(a.constructor&&a.constructor.toString().indexOf("RegExp")>0){g="-regexp";e=
""}typeof d!="undefined"?jQuery("tbody tr td"+(":nth-child("+d+")")+":"+e+"contains"+g+"("+a+")",this.element).each(function(h,i){h=jQuery(i).parent();i="ui-ncbigrid-high";if(c)i=h.hasClass("ui-ncbigrid-row-even")?"ui-ncbigrid-row-even-high-IE6":"ui-ncbigrid-row-odd-high-IE6";h.addClass(i);jQuery.inArray(h,f)===-1&&f.push(h)}):jQuery("tbody tr:"+e+"contains"+g+"("+a+")",this.element).each(function(h,i){h=jQuery(i);i="ui-ncbigrid-high";if(c)i=h.hasClass("ui-ncbigrid-row-even")?"ui-ncbigrid-row-even-high-IE6":
"ui-ncbigrid-row-odd-high-IE6";h.addClass(i);f.push(h)});this.element.trigger("ncbigridhighlightapplied",[a,b,d,f]).trigger("ncbigridhideloadingbar");return{highlightedRows:f}}},removeFilterRows:function(a,b,d,e,c){if(typeof a!="undefined"&&a.length>0){if(typeof e==="undefined")e=true;var f="",g="";if(e||c){f=":not(";g=")"}var h=e="",i=null;if(typeof a==="function"){e="-fnctionTest";h=this._custFilterCnt;this._custFilterCnt=h+1;i="filter_temp_"+h;h=jQuery.ui.jig[i]=a;a="jQuery.ui.jig."+i}else if(a.constructor&&
a.constructor.toString().indexOf("RegExp")>0)e="-regexp";else if(b)e="-insensitive";c=c?"not-":"";if(typeof d!="undefined"&&d!==null){f="tbody tr[isfiltered='true'] td:nth-child("+d+")"+f+":"+c+"contains"+e+"("+a+")"+g;jQuery(f,this.element).parents().each(function(j,k){jQuery(k).removeClass("ncbigrid-row-filtered").attr("isfiltered","false")})}else{f="tbody tr[isfiltered='true']"+f+":contains"+e+"("+a+")"+g;jQuery(f,this.element).each(function(j,k){jQuery(k).removeClass("ncbigrid-row-filtered").attr("isfiltered",
"false")})}}else jQuery("tr.ncbigrid-row-filtered",this.element).removeClass("ncbigrid-row-filtered").attr("isfiltered","false");if(i){jQuery.ui.jig[i]=null;a=h}this.options.isPageable&&this._gotoPage(0);this.element.trigger("ncbigridfilterremoved",[a,b,d]);this.options.isPageable?this._gotoPage(this.options.currentPage):this._notifyGridUpdated()},removeHighlightRows:function(a,b,d,e){var c=jQuery.browser.msie&&parseFloat(jQuery.browser.version)<7;if(typeof a!="undefined"&&a.length>0){var f=[],g=
b?"-insensitive":"";e=e?"not-":"";if(a.constructor&&a.constructor.toString().indexOf("RegExp")>0){g="-regexp";e=""}typeof d!="undefined"?jQuery("tbody tr td"+(":nth-child("+d+")")+":"+e+"contains"+g+"("+a+")",this.element).each(function(h,i){h=jQuery(i).parent().removeClass("ui-ncbigrid-high");c&&h.removeClass("ui-ncbigrid-row-odd-high-IE6").removeClass("ui-ncbigrid-row-even-high-IE6");jQuery.inArray(h,f)===-1&&f.push(h)}):jQuery("tbody tr:"+e+"contains"+g+"("+a+")",this.element).each(function(h,
i){h=jQuery(i).removeClass("ui-ncbigrid-high");c&&h.removeClass("ui-ncbigrid-row-odd-high-IE6").removeClass("ui-ncbigrid-row-even-high-IE6");f.push(h)})}else{jQuery(".ui-ncbigrid-high",this.element).removeClass("ui-ncbigrid-high");c&&jQuery(".ui-ncbigrid-row-odd-high-IE6, .ui-ncbigrid-row-even-high-IE6",this.element).removeClass("ui-ncbigrid-row-odd-high-IE6").removeClass("ui-ncbigrid-row-even-high-IE6")}this.element.trigger("ncbigridhighlightremoved",[a,b,d])},setCellData:function(a,b,d){jQuery("tbody tr:nth-child("+
a+") td:nth-child("+b+")",this.element).text(d);this.element.trigger("ncbigridcellchange",[a,b,this.getCellData(a,b)])},setRowData:function(a,b){jQuery("tbody tr:nth-child("+a+") td",this.element).each(function(d,e){jQuery(e).text(b[d])});this.element.trigger("ncbigridrowchange",[a,this.getRowData(a)])},showColumn:function(a){jQuery("tr *:nth-child("+a+")",this.element).removeClass("ui-ncbigrid-column-hidden")},hideColumn:function(a){jQuery("tr *:nth-child("+a+")",this.element).addClass("ui-ncbigrid-column-hidden")},
_loadingBar:null,_loadingElem:null,_addLoadingBar:function(){if(this.options.isLoadingMessageShown){this._loadingBar=jQuery("<div class='ui-ncbigrid-loadingbar ncbipopper-wrapper ui-corner-all'>"+this.options.loadingText+"</div>").appendTo(document.body).css("display","none");this._loadingElem=!jQuery.browser.mozilla&&this.options.isScrollable?this.element.parent():this.element;jQuery(this._loadingElem).ncbipopper({targetPosition:"middle center",sourcePosition:"middle center",sourceSelector:this._loadingBar,
hasArrow:false,openMethod:"custom",closeMethod:"custom",isSourceElementCloseClick:false,isTriggerElementCloseClick:false,isDocumentCloseClick:false,addCloseButton:false,openAnimation:"show",closeAnimation:"hide"});var a=this;this.element.bind("ncbigridshowloadingbar",function(){a._showLoadingBar()}).bind("ncbigridhideloadingbar",function(){a._hideLoadingBar()})}},_showLoadingBar:function(){if(this.options.isLoadingMessageShown){this._loadingBar||this._addLoadingBar();this.loadingCloseTimer&&window.clearTimeout(this.loadingCloseTimer);
this._loadingElem.ncbipopper("open")}},_hideLoadingBar:function(){if(this.options.isLoadingMessageShown){var a=this;this.loadingCloseTimer=window.setTimeout(function(){a._loadingElem.ncbipopper("close")},200)}}});
jQuery.fn.toEm=function(a){a=jQuery.extend({scope:"body"},a);var b=parseInt(this[0],10);a=jQuery('<div style="display: none; font-size: 1em; margin: 0; padding:0; height: auto; line-height: 1; border:0;">&nbsp;</div>').appendTo(a.scope);var d=a.height();a.remove();return(b/d).toFixed(8)+"em"};
jQuery.fn.toPx=function(a){a=jQuery.extend({scope:"body"},a);var b=parseFloat(this[0]);a=jQuery('<div style="display: none; font-size: 1em; margin: 0; padding:0; height: auto; line-height: 1; border:0;">&nbsp;</div>').appendTo(a.scope);var d=a.height();a.remove();return Math.round(b*d)+"px"};jQuery.extend(jQuery.expr[":"],{"contains-insensitive":function(a,b,d){return(a.textContent||a.innerText||"").toLowerCase().indexOf((d[3]||"").toLowerCase())>=0}});
jQuery.extend(jQuery.expr[":"],{"contains-regexp":function(a,b,d){a=jQuery.trim(a.textContent||a.innerText||"");d=d[3];b=d.match(/\/([gi]+)$/);b=b!==null?b[1]:"";d=d.replace(/\/[gi]?$/,"").replace(/^\//,"");return a.match(new RegExp(d,b))!==null}});jQuery.extend(jQuery.expr[":"],{"contains-fnctionTest":function(a,b,d){a=a.textContent||a.innerText||"";return jQuery.ui.jig._getFncFromStr(d[3])(a)}});
jQuery.extend(jQuery.expr[":"],{"not-contains":function(a,b,d){return(a.textContent||a.innerText||"").indexOf(d[3]||"")===-1}});jQuery.extend(jQuery.expr[":"],{"not-contains-insensitive":function(a,b,d){return(a.textContent||a.innerText||"").toLowerCase().indexOf((d[3]||"").toLowerCase())===-1}});
(function(){var a=jQuery.ui.ncbigrid.prototype.options;a.webservice=null;a.webserviceParams=null;a.isServersideLoad=false;a.isServersidePaging=false;a.isServersidePagingCached=false;a.isServersideSort=false;a.maxRowCount=null;a.columnNames=null;var b=jQuery.ui.ncbigrid.prototype._create,d=jQuery.ui.ncbigrid.prototype.sortDefaults,e=jQuery.ui.ncbigrid.prototype._killActiveSort,c=jQuery.ui.ncbigrid.prototype._sortData,f=jQuery.ui.ncbigrid.prototype.updateRows,g=jQuery.ui.ncbigrid.prototype.getRowCount,
h=jQuery.ui.ncbigrid.prototype.getMaxPage;jQuery.widget("ui.ncbiservergrid",jQuery.ui.ncbigrid,{_loadCreateCallback:false,_create:function(){if(this.options.isServersidePaging)this.options.isPageable=true;if(this.options.isServersideSort)this.options.isSortable=true;if(this.options.isServersideLoad&&!this.options.isServersidePaging){this._loadCreateCallback=true;this._fetchData()}else b.apply(this,arguments)},getMaxPage:function(){return this.options.isServersidePaging?Math.ceil(this.getRowCount()/
this.options.pageSize):h.apply(this,arguments)},getRowCount:function(){return this.options.isServersidePaging?this.options.maxRowCount||0:g.apply(this,arguments)},updateRows:function(){if(this.options.isServersidePaging||this.options.isServersideSort)this.updateRowsServer();else return f.apply(this,arguments)},updateRowsServer:function(){var i=null;if(this.options.isServersidePagingCached)i=this.isInCache();if(i)this._displayTheRows(i);else if(this._isInitialFetch&&!this.options.isServersideLoad){this.addToCache(this.element.find("tbody").html());
this._isInitialFetch=false}else this._fetchData()},_isInitialFetch:true,_fetchData:function(){var i=this;this.element.trigger("ncbigridshowloadingbar");this._activeRequest&&this._activeRequest.readyState<4&&this._activeRequest.abort();var j=this._handlewebserviceParams();if(this.options.isServersidePaging){j.parameters.page=this.getCurrentPage();j.parameters.pageSize=this.options.pageSize}if(this.options.isServersideSort&&this.options.sortColumn!==-1){var k=this.options.columnNames;j.parameters.sortCol=
k?k[this.options.sortColumn]:this.options.sortColumn+1;j.parameters.sortDir=this.options.sortColumnDir}this._activeRequest=jQuery.ajax({url:j.url,data:j.parameters,success:function(l,m,p){i._processData(l,m,p)},error:function(l,m,p){i._processError(l,m,p)}})},_handlewebserviceParams:function(){var i=this.options.webservice,j=this.options.webserviceParams||this.options.webServiceParams,k={};if(j)if(typeof j==="string"){var l=j.charAt(0)!=="?"||i.indexof("?")===-1?"?":"";i=i+l+j}else for(l in j)k[l]=
j[l];return{url:i,parameters:k}},_activeRequest:null,_processData:function(i,j){if(j==="success"){this._displayTheRows(i);this.addToCache(i)}this._loadCreateCallback&&b.apply(this)},_processError:function(i,j,k){if(typeof console!=="undefined"&&console.error){console.group&&console.group("Failed Request");console.error("The request failed to retrieve the rows");if(console.info){console.info(i);console.info(j);console.info(k)}console.group&&console.groupEnd("Failed Request")}},_displayTheRows:function(i){this.element.trigger("ncbigridresetscroll");
this.element.trigger("ncbigridhideloadingbar");this.element.find("tbody").html(i);this._notifyGridUpdated()},_cachedRows:{},getCacheKey:function(){var i=this.getCurrentPage().toString(),j=this.options.pageSize.toString(),k=this.options.sortColumn.toString(),l=this.options.sortColumnDir.toString();return i+"_"+j+"_"+k+"_"+l},addToCache:function(i){if(this.options.isServersidePagingCached)this._cachedRows[this.getCacheKey()]=i},isInCache:function(){return this._cachedRows[this.getCacheKey()]||null},
sortDefaults:function(){this.options.isServersideSort||d.apply(this,arguments)},_killActiveSort:function(){this.options.isServersideSort||e.apply(this,arguments)},_sortData:function(){this.options.isServersideSort?this.updateRows():c.apply(this,arguments)}})})();
(function(a){a.widget("ui.ncbielastictextarea",{styles:{copy:["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight"]},_create:function(){function b(i,j){curratedHeight=Math.floor(parseInt(i,10));e.height()!=curratedHeight&&e.css({height:curratedHeight+"px",overflow:j})}function d(i){var j=e.val().replace(/&/g,"&amp;").replace(/  /g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),k=c.html();if(j+"&nbsp;"!=k||i=="force"){c.html(j+
"&nbsp;");if(Math.abs(c.height()+f-e.height())>3){i=c.height()+f;if(i>=h)b(h,"auto");else i<=g?b(g,"hidden"):b(i,"hidden")}}}var e=this.element;if(e.attr("type")!="textarea")return false;this.elastic_uid=a.ui.jig._generateId("ncbielastictextarea");e.css("word-wrap","break-word");var c=a("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}).attr("id",this.elastic_uid),f=parseInt(e.css("line-height"),10)||parseInt(e.css("font-size"),"10"),g=parseInt(e.css("height"),10)||f*3,
h=parseInt(e.css("max-height"),10)||Number.MAX_VALUE;if(h<0)h=Number.MAX_VALUE;c.appendTo(e.parent());a(this.styles.copy).each(function(){c.css(this.toString(),e.css(this.toString()))});a(window).bind("resize."+this.elastic_uid,function(){c.css("width",e.width()+"px");d("force")});e.css({overflow:"hidden"});c.css("width",e.width()+"px");e.bind("keyup."+this.elastic_uid,function(){d()});e.bind("input."+this.elastic_uid+" paste."+this.elastic_uid,function(){setTimeout(d,250)});d()},destroy:function(){this.element.unbind("."+
this.elastic_uid);a("#"+this.elastic_uid).remove();this.element.css({"word-wrap":"",overflow:"",height:""});a(window).unbind("resize."+this.elastic_uid);a.Widget.prototype.destroy.apply(this,arguments)}});a.ui.ncbielastictextarea.prototype.options={};a.ui.ncbielastictextarea.prototype.version="1.2"})(jQuery);
(function(a){a.widget("ui.ncbilinkedselects",{_selectEls:[],_paramObj:{},_localMap:null,options:{firstPopulatedFromDs:true,localData:null,localDataCallback:null,selects:null,webservice:null},_create:function(){if(this.options.localData)this._localMap=eval(this.options.localData);this.options.firstPopulatedFromDs&&this._populateFirstSelect();this._selectEls=this.getSelects();this._setEvents()},_populateFirstSelect:function(){if(this.options.localData)for(var b=this._getFirstOptionsFromLocalDs(),d=
this._isArrayOfStrings(b),e=0;e<b.length;e++){var c=b[e];if(d)this.element.append('<option value="'+c+'">'+c+"</option>");else for(var f in c)this.element.append('<option value="'+c[f]+'">'+f+"</option>")}else this._getAndAppendFromWebService(this.element,{})},_getFirstOptionsFromLocalDs:function(){var b=[];if(this.options.localDataCallback)b=this.options.localDataCallback.apply(this,[this._localMap]);else for(var d=0;d<this._localMap.length;d++){var e=this._localMap[d];if(typeof e==="string")b.push(e);
else a.isPlainObject(e)&&b.push(e)}return b},getSelects:function(){if(this.options.selects)var b=a(this.options.selects);else{b=this.element.closest("fieldset, form");b.length===0&&a.ui.jig._isConsole("warn")&&console.warn("jig warning: ncbilinkedselects. Your select elements must be within either a fieldset or a form element");b=b.find("select");for(var d=false,e=[],c=0;c<b.length;c++){var f=b[c];if(f==this.element[0])d=true;d&&!a(f).hasClass("ui-ncbilinkedselects-ignore")&&e.push(f)}return a(e)}return this.element.add(b)},
_setEvents:function(){var b=this;this._selectEls.each(function(){var d=a(this),e=this.name;b._isLastSelect(e)||d.bind("change",function(c){b._resetNextSelects(e);b._populateNext(c)})})},_resetNextSelects:function(b){for(var d=false,e=0;e<this._selectEls.length;e++){var c=a(this._selectEls[e]);if(c.attr("name")==b)d=true;else d&&c.children("option").each(function(){var f=a(this);f.hasClass("ui-ncbilinkedselects-perm")||f.remove()})}},_getParamObj:function(b,d){if(this._isFirstSelect(b))this._paramObj=
{};this._paramObj[b]=d;return this._paramObj},_populateNext:function(b){var d=a(b.target),e=d.children("option:selected");if(!e.hasClass("ui-ncbilinkedselects-perm")){var c=d.attr("name"),f=d.val();b=this._getNextSelect(d.attr("name"));if(this.options.webservice){d=this._getParamObj(c,f);this._getAndAppendFromWebService(b,d)}else this.options.localData&&this._populateSelectFromLocalMap(d,e,b)}},_getAndAppendFromWebService:function(b,d){a.get(this.options.webservice,d,function(e,c,f){response=f.responseText;
b.append(response)},"HTML")},queryLocalService:function(b){function d(c){for(var f in c){var g=c[f];for(var h in g)if(g[h]===b){c=c[parseInt(f)+1];for(f=0;f<c.length;f++)a.isArray(c[f])||e.push(c[f]);return}jQuery.isArray(g)&&d(g)}}var e=[];d(this._localMap);return e},_populateSelectFromLocalMap:function(b,d,e){var c=this.options.localDataCallback;b=c?c.apply(this,[this._localMap,b,d,this._selectEls]):this.queryLocalService(b.val());d=this._isArrayOfStrings(b);for(c=0;c<b.length;c++){var f=b[c];if(d)e.append('<option value="'+
f+'">'+f+"</option>");else{var g,h;for(var i in f){g=i;h=f[i]}e.append('<option value="'+h+'">'+g+"</option>")}}},_isArrayOfStrings:function(b){return typeof b[0]==="string"},_isLastSelect:function(b){els=this._selectEls;return b===els[els.length-1].name?true:false},_isFirstSelect:function(b){els=this._selectEls;return b===els[0].name?true:false},_getNextSelect:function(b){for(var d=0;d<this._selectEls.length;d++)if(this._selectEls[d].name==b)return a(this._selectEls[d+1])}})})(jQuery);
(function(a){var b=a.browser.msie,d=b&&a.browser.version=="6.0"||false,e=a.browser.safari||false,c=null,f=function(g){if(typeof g!=="undefined")return Math.max.apply(Math,g)};a.widget("ui.ncbimenu",{styles:{hilited:"ui-ncbimenu-item-active",item:"ui-ncbimenu-item",itemFirst:"ui-ncbimenu-item-first",itemFirstHilited:"ui-ncbimenu-item-first-active",itemHasSubmenu:"ui-ncbimenu-item-has-submenu",itemLeaf:"ui-ncbimenu-item-leaf",itemNoHilite:"ui-ncbimenu-item-no-hlt",itemSkip:"ui-ncbimenu-item-skip",randClass:a.ui.jig._generateId("ncbimenu"),
submenu:"ui-ncbimenu-submenu",submenuOpen:"ui-ncbimenu-submenu-open"},_init:function(){a.ui.ncbimenu._rootNodes.push(this.element);this._menuIsActive=this.options.disabled=false;this._setAttrs();this._setEvents();this._register()},_areInstances:function(){return a.ui.ncbimenu._areInstances},_focus:function(g){g=a(g);if(b)g.attr("href")||g.attr("href","#");else{var h=e&&!g.attr("href")?true:false;h&&g.attr("href","#");g[0].focus();h&&g.removeAttr("href")}},_register:function(){a.ui.ncbimenu._areInstances=
true},_setAttrs:function(){var g=this.styles,h=this;this.firstItems=this.element.addClass("ui-widget ui-ncbimenu "+g.randClass).children("li");this.firstItems.each(function(i){var j=a(this),k=h.isSkip(j);if(!b&&!k)if(i!==0)j.children("a")[0].tabIndex=-1;else{j.children("a")[0].tabIndex=0;e&&j.children("ul").length>0&&j.children("a").attr("href","#")}j.children("ul").length===1?j.children("a").addClass("ui-ncbimenu-first-link-has-submenu").attr({"aria-haspopup":"true"}).next("ul").attr("aria-hidden",
"true"):j.addClass(g.itemLeaf);j.addClass(g.itemFirst+" ui-helper-reset ui-ncbimenu "+g.randClass).attr("role","presentation").children("a").attr("role","menuitem").addClass(g.randClass+" ui-ncbimenu-link-first");k||j.children("a").addClass("ui-ncbimenu");a.browser.safari&&a(window).load(function(){j.width(j.outerWidth())})});this.element.attr("role",this.firstItems.length>1?"menubar":"menu")},_setEvents:function(){var g=this,h=this.element[0];this.element.unbind("click.NCBIMenu").bind("click.NCBIMenu",
function(j){g._delegate(j,g)}).mouseover(function(j){g._delegate(j,g)}).mouseout(function(j){g._delegate(j,g)}).keyup(function(j){g._delegate(j,g)});if(document.addEventListener)h.addEventListener("focus",function(j){g._delegate(j,g)},true);else h.onfocusin=function(){g._delegate(null,g)};if(!this._areInstances()){a(document).click(function(j){g._closeAllMenus(j,g)});var i=function(j){j=j||window.event;var k=j.target||j.srcElement;k.tagName&&k!==a(h).parent()[0]&&!a(k).hasClass("ui-ncbimenu")&&g._closeAllMenus(j,
g)};if(document.addEventListener)document.addEventListener("focus",function(j){i(j)},true);else document.onfocusin=i}},_delegate:function(g,h){var i,j;if(g){i=g.type;j=g.target}else{i=window.event.type;j=window.event.srcElement}for(;j.tagName&&j.tagName.toLowerCase()!=="a";)j=a(j).parent()[0];tJ=a(j);var k=tJ.parent("li"),l=h.styles,m=k.hasClass(l.itemFirst);if(i==="click"){h._menuIsActive=true;if(m||b)h._activateItem(j,i);h.isSkip(k)||k.hasClass(l.itemLeaf)||g.preventDefault()}if(i==="mouseover"&&
j.tagName&&j.tagName.toLowerCase()==="a"){if(m)this._menuIsActive?this._activateItem(j,"mouseover",false):this._activateItem(j);k.hasClass(l.item)&&h._activateItem(j,i)}if(i==="keyup"){m=g.keyCode;var p=a.ui.keyCode;m===p.DOWN&&h._activateItem(j,"down");m===p.UP&&h._activateItem(j,"up");m===p.RIGHT&&h._activateItem(j,"right");m===p.LEFT&&h._activateItem(j,"left");m===p.ESCAPE&&h._closeAllMenus(g,h,true)}i==="mouseout"&&k.hasClass(l.itemFirst)&&!a(g.relatedTarget).hasClass("ui-ncbimenu")&&h._unHiliteItem(j);
if(i==="focus"||i==="focusin"){b&&tJ.attr("aria-haspopup","true")&&h._closeSiblingSubmenus(tJ);h._unHiliteSiblings(j)}},_getSubMenu:function(g){return g.siblings("ul")},isSkip:function(g){return skip=a(g).hasClass(this.styles.itemSkip)?true:false},_unHiliteItem:function(g){g=a(g);g.removeClass(this.styles.hilited+" ui-ncbimenu-first-link-has-submenu-active "+this.styles.itemFirstHilited)},_hiliteItem:function(g){var h=this.styles;g=a(g);parentLi=g.parent("li");if(!this.isSkip(parentLi)){if(!parentLi.hasClass(h.itemNoHilite))if(g.parent("li").hasClass(h.itemFirst)){g.addClass(h.itemFirstHilited);
g.hasClass("ui-ncbimenu-first-link-has-submenu")&&g.addClass("ui-ncbimenu-first-link-has-submenu-active")}else g.addClass(this.styles.hilited);if(!b)g[0].tabIndex=0;this._focus(g);if(!b&&a.ui.ncbimenu._activeLink)a.ui.ncbimenu._activeLink[0].tabIndex=-1;a.ui.ncbimenu._activeLink=g}},_unHiliteSiblings:function(g){var h=this;a(g).parent("li").siblings("li").children("a").each(function(){h._unHiliteItem(this)})},_openSubmenu:function(g){var h=this.styles,i=a(g.el)||null;this.element.addClass("ui-ncbimenu-has-active-submenu");
if(!this._firstTime){this.element.hide().show();this._firstTime=true}g=g.callback||null;var j=this;if(i.length!==0){if(!i)throw new Error("ncbigrid: _openSubmenu() method must be passed a DOM or jQuery collection representing the menu to be opened");var k=i.children("li").andSelf().children("a").andSelf().addClass(h.randclass);i.data("jig-ncbimenu-subnodes",k);var l=i.data("jig-ncbimenu-width");if(typeof l==="undefined"){i.data("widths",[]);var m=false,p=[];k.each(function(){var n=a(this),q=n[0].tagName.toLowerCase();
if(q==="li"){n.addClass(h.item+" ui-helper-reset").attr("role","presentation");if(n.children("ul").length>0){n.addClass(h.itemHasSubmenu);m||(m=true)}else n.addClass(h.itemLeaf)}q==="ul"&&n.addClass(h.submenu).attr("role","menu").css("z-index",j.options.submenuZindex);if(q==="a"){n.attr({role:"menuitem"});if(!b&&!j.isSkip(n.parent("li")))n[0].tabIndex=-1;n.next("ul").length>0&&n.attr({"aria-haspopup":"true"}).append('<span class="ui-ncbimenu ui-icon ui-icon-triangle-1-e"></span>');i.css({position:"absolute",
left:"-2000px"});i.css("display","block");n.css("display","inline");p.push(n.outerWidth());n.css("display","block");i.css("left","auto")}}).addClass(h.randClass+" ui-ncbimenu");l=f(p);var r=m?(l+=12):l;i.data("jig-ncbimenu-width",r);l=i.data("jig-ncbimenu-width");i.parent("li").hasClass(h.itemHasSubmenu)&&i.css("margin-left",i.parent("li").parent("ul").data("jig-ncbimenu-width"))}var o=i.data("jig-ncbimenu-width");k.each(function(){var n=a(this);n[0].tagName.toLowerCase()==="a"?n.css("width",o-(parseInt(n.css("padding-right"))+
parseInt(n.css("padding-left"))+1)):n.css("width",o)});i.css({position:"absolute",display:"block"}).attr("aria-hidden","false").addClass(this.styles.submenuOpen);typeof g==="function"&&g();if(d)if(i.data("iframe"))a("#"+i.data("iframe")).show();else{g=a.ui.jig._generateId(this.widgetName,"iframe-fix");a(i).createIE6LayerFix(true).attr("id",g);i.data("iframe",g)}}},_closeSubmenu:function(g){var h=a(g.el)||null,i=g.delay||null,j=g.callback||null,k=g.submenuFadeSpeed||0;if(!h)throw new Error("ncbigrid: _openSubmenu() method must be passed a DOM or jQuery collection representing the menu to be closed");
var l=this;h.data("jig-ncbimenu-subnodes")&&h.data("jig-ncbimenu-subnodes").each(function(){a(this).css("width","auto")});h.children("li").each(function(){l._unHiliteItem(a(this).find("a"))});if(i)window.setTimeout(function(){h.fadeOut(k,function(){a(this).css("position","static").removeClass(l.styles.submenuOpen);typeof j==="function"&&j()})},i);else{h.css({position:"static",display:"none"}).attr("aria-hidden","true").removeClass(this.styles.submenuOpen);typeof j==="function"&&j()}d&&a("#"+h.data("iframe")).hide()},
_closeSiblingSubmenus:function(g,h){var i=this;g.parent("li").siblings("li").find("ul.ui-ncbimenu-submenu-open").each(function(){h?i._closeSubmenu({el:a(this),delay:i.options.submenuDelay,submenuFadeSpeed:i.options.submenuFadeSpeed}):i._closeSubmenu({el:a(this)})})},_closeGrandChildSubmenu:function(g,h){g=g.parent("li").children("ul").children("li").children("ul");h?this._closeSubmenu({el:g,delay:this.options.submenuDelay,submenuFadeSpeed:this.options.submenuFadeSpeed}):this._closeSubmenu({el:g})},
_closeChildSubmenu:function(g,h){g=g.siblings("ul");h?this._closeSubmenu({el:g,delay:this.options.submenuDelay,submenuFadeSpeed:this.options.submenuFadeSpeed}):this._closeSubmenu({el:g})},_closeAllMenus:function(g,h,i){if(!a(g.target).hasClass("ui-ncbimenu")||i){g=a.ui.ncbimenu._rootNodes;for(var j=0;j<g.length;j++)a(g[j]).children("li").children("a").each(function(k){if(!h.isSkip(a(this).parent("li"))){if(!b)k==0?(this.tabIndex=0):(this.tabIndex=-1);h._unHiliteItem(this)}}).end().find("ul").each(function(){h._closeSubmenu({el:a(this)})});
this._menuIsActive=false}if(j>0){this.element.removeClass("ui-ncbimenu-has-active-submenu");this._firstTime=false}},_getNextItem:function(g){var h=g.parent("li").next("li");if(h.length===0){h=g.parent("li").siblings("li:first");if(h.length===0)return g}for(;this.isSkip(h);){h=h.next("li");if(h.length===0){h=g.parent("li").siblings("li:first");if(h.length===0)return g}}return h.children("a")},_getPreviousItem:function(g){var h=g.parent("li").prev("li");if(h.length===0){h=g.parent("li").siblings("li:last");
if(h.length===0)return}for(;this.isSkip(h);){h=h.prev("li");if(h.length===0){h=g.parent("li").siblings("li:last");if(h.length===0)return}}return h.children("a")},_activateItem:function(g,h,i){var j=this.styles,k=j.itemFirst,l=this;g=a(g);var m=g.parent("li"),p=this.options.submenuFadeSpeed,r=this.options.submenuDelay,o=g.next("ul");h=h||null;switch(h){case "click":o.hasClass(j.submenuOpen)?this._closeSubmenu({el:o}):this._openSubmenu({el:o});break;case "mouseover":this._closeSiblingSubmenus(g,true);
this._closeGrandChildSubmenu(g,true);this._unHiliteSiblings(g);this._hiliteItem(g);if(i!==false){c&&window.clearTimeout(c);c=window.setTimeout(function(){l._openSubmenu({el:g.siblings("ul"),delay:r,submenuFadeSpeed:p})},l.options.openSubmenuDelay)}else this._openSubmenu({el:g.siblings("ul")});break;case "up":this._closeChildSubmenu(g);g=this._getPreviousItem(g);this._unHiliteSiblings(g);this._hiliteItem(g);break;case "down":if(m.hasClass(k)){this._openSubmenu({el:g.siblings("ul")});g=g.siblings("ul").find("li:first > a");
g.length>0&&this._hiliteItem(g)}else{this._closeChildSubmenu(g);g=this._getNextItem(g);this._unHiliteSiblings(g);this._hiliteItem(g)}break;case "right":if(m.hasClass(j.itemHasSubmenu))this._openSubmenu({el:o,callback:function(){g=o.children("li:first").children("a");l._hiliteItem(g)}});else if(m.hasClass(k)){g=this._getNextItem(g);this._activateItem(g,"mouseover",false)}else if(m.hasClass(j.itemLeaf)&&m.parent("ul").parent("li").hasClass(k)){g=this._getNextItem(m.parent("ul").parent("li").children("a"));
this._activateItem(g,"mouseover")}else g.parents().each(function(){var n=a(this);if(n.hasClass(k)){g=l._getNextItem(n.children("a"));l._activateItem(g,"mouseover")}});break;case "left":if(!m.hasClass(k)){this._closeSubmenu({el:g.parent("li").parent("ul")});g=g.parent("li").parent("ul").prev("a");this._hiliteItem(g)}if(m.hasClass(k)||m.parent("ul").parent("li").hasClass(k)){this._unHiliteItem(g);g=this._getPreviousItem(g);this._activateItem(g,"mouseover",false)}break;default:this._hiliteItem(g)}}});
a.ui.ncbimenu.prototype.options={openSubmenuDelay:300,submenuZindex:"1002"};a.ui.ncbimenu._areInstances=null;a.ui.ncbimenu.getter="areInstances";a.ui.ncbimenu._activeLink=null;a.ui.ncbimenu._rootNodes=[]})(jQuery);
jQuery.widget("ui.ncbipopper",{options:{openMethod:"",openEvent:"mouseover",openAnimation:"slideDown",closeMethod:"",closeEvent:"mouseout",isEscapeKeyClose:true,isSourceElementCloseClick:false,isTriggerElementCloseClick:true,isTargetElementCloseClick:false,isDestElementCloseClick:false,isDocumentCloseClick:true,addCloseButton:false,closeAnimation:"slideUp",adjustFit:"autoAdjust",delayTimeout:300,sourcePosition:"",destPosition:"top left",sourceSelector:"",destSelector:"",targetPosition:"",triggerPosition:"bottom right",
sourceText:null,destText:null,multipleHandlesSelector:"",hasArrow:false,arrowDirection:"left",groupName:null,width:null,height:null,cssClass:null,excludeBasicCssStyles:false,ignoreSettingOutterWidth:false,loadingText:"loading...",showLoadingMessage:true,isDestTextCacheable:true},_create:function(){this._addTriggerHandlers();this._addTriggerAria();this._addResizeListener();this._addEscapeListener();this._addDocumentClickListener()},destroy:function(){},isPopperOpen:false,isPopperDisplayed:false,_isIE6:jQuery.browser.msie&&
parseInt(jQuery.browser.version,10)===6,_shim:false,_addTriggerHandlers:function(){var a=this.options.openMethod||this.options.openEvent,b=this.options.closeMethod||this.options.closeEvent,d=this;if(a===b&&b==="click"){var e=jQuery(this.element),c=this.options.multipleHandlesSelector;if(c)e=jQuery(c).add(e);e.click(function(f){d._toggleView();f.preventDefault()})}else{e={timeout:this.options.delayTimeout};e.over=a==="mouseover"?function(){d.open()}:function(){};if(b==="mouseout"){e.out=function(){d._isOverTrigger=
false;d._isOverPopper||d.close()};this.isChildHoverable=true;jQuery(this.element).mouseover(function(){d._isOverTrigger=true})}else{e.out=function(){};this.isChildHoverable=false}if(a==="mouseover"||b==="mouseout")jQuery(this.element).hoverIntent(e);a!=="mouseover"&&jQuery(this.element).bind(a,function(f){d.open();a==="click"&&f.preventDefault()});b!=="mouseout"&&jQuery(this.element).bind(b,function(f){d.close();b==="click"&&f.preventDefault()});if((this.options.isSourceElementCloseClick||this.options.isTriggerElementCloseClick)&&
b!=="click"&&a!=="click")jQuery(this.element).click(function(f){d.close(f);f.preventDefault()})}},_removeHandlers:function(){var a=this.options.openMethod||this.options.openEvent,b=this.options.closeMethod||this.options.closeEvent;jQuery(this.element).unbind(a).unbind(b)},_toggleView:function(){this.isPopperOpen?this.close():this.open()},open:function(){if(!this.isPopperOpen){this.element.trigger("ncbipopperopen");this.isPopperOpen=true;this._closeActivePopperGroup();this._setActivePopperGroup();
this._positionPopper();if(!this.hasCallback||this.isFunctionResultCached||this.hasCallback&&this.options.showLoadingMessage)this._displayPopper()}},close:function(){if(this.isPopperOpen){this.element.trigger("ncbipopperclose");this.isPopperOpen=false;this._hidePopper();this._setAriaState(false)}},_initDestElement:function(){if(this.content){this.options.isDestTextCacheable||this._reloadContent();return this.content}var a=null,b=this.element.attr("hash");if(b&&b.length>1&&b.charAt(0)==="#")a=b;a=this.options.destSelector||
this.options.sourceSelector||a;b=this.options.destText||this.options.sourceText;var d=null;if(a&&a.length>0)var e=jQuery(a);else if(b)e=this._createTextHolder(b);d=this._wrapContent(e);this._addCloseButton(d);this._addDestElementCloseClick(d);this.content=d;if(this._isIE6&&!this._shim)this._shim=this.content.createIE6LayerFix(true);this._addDestAria();return d},getDestElement:function(){return this.content||this._initDestElement()},_wrapContent:function(a){a.addClass("ui-ncbipopper-content");this.options.excludeBasicCssStyles||
a.addClass("ui-ncbipopper-basic");var b=a;b=this._wrapElement(a);this.options.hasArrow&&this._addArrows(b);this.isChildHoverable&&this._addPopperHover(b);return b},_wrapElement:function(a){var b=null;if(!a.parent().hasClass("ui-ncbipopper-wrapper")){var d="ui-ncbipopper-wrapper",e=this.options.cssClass;if(e)d+=" "+e;if(a.parent().css("overflow")==="hidden"){a.addClass("ui-ncbipopper-content-hook");e=a.clone();var c=a.attr("id");b=jQuery(document.body).children().last();e=e.insertAfter(b);if(a.hasClass("offscreen_noflow")){a.removeClass("offscreen_noflow");
a.width()}b=a.width();if(!this.options.width)this.options.width=b;a.remove();e.attr("id",c);a=e;d+=" ui-ncbipopper-hook"}d=jQuery("<div class='"+d+"'></div>");a.removeClass("offscreen_noflow");b=this.options.width||b||a.width();e=this.options.height||a.height();if(a[0].style.width.length===0||a[0].style.width==="auto"){if(!this.options.width)if(parseFloat(b).toString()===b.toString())b=parseFloat(b)+1;a.css("width",b)}this.options.height&&a.css("height",e);b=a.outerWidth();this.options.ignoreSettingOutterWidth||
d.width(b);d.css("display","none");a.wrap(d).css("display","block")}return a.parent()},_addArrows:function(a){if(jQuery(".ui-ncbipopper-arrow-image",a).length!==1){var b=this.options.arrowDirection,d="ui-ncbipopper-arrow-"+b,e=this.options.sourcePosition||this.options.destPosition;e=e.split(/\s/);if(b==="left"||b==="right"){d+=" "+d+"-"+e[0];a.width(a.width());a.width(a.outerWidth()+20);this.options._adjustOffsetX=0;this.options._adjustOffsetY=e[0]==="top"?-10:e[0]==="center"?0:10}else{d+=" "+d+"-"+
e[1];this.options._adjustOffsetX=e[1]==="left"?-10:e[1]==="center"?0:10;this.options._adjustOffsetY=0}d=jQuery("<div class='"+d+"'><div class='ui-ncbipopper-arrow-image'>&nbsp;</div></div>");a=a.children().eq(0).addClass("ui-ncbipopper-arrow-"+b+"-content");b==="left"||b==="top"?a.before(d):a.after(d)}},_addPopperHover:function(a){var b=this,d={timeout:this.options.delayTimeout,over:function(){},out:function(){b._overPopper(false)}};jQuery(a).hoverIntent(d);jQuery(a).mouseover(function(){b._overPopper(true)}).mouseout(function(e){b._outOfPopper(e,
a)})},_overPopper:function(a){if(a)this._pTimer=new Date;this._isOverPopper=a;!a&&!this._isOverTrigger&&this.close()},_outOfPopper:function(a,b){var d=jQuery(a.target||a.srcElement),e=b.position(),c=b.width()+e.left,f=b.height()+e.top;if(a.pageX||a.pageY){var g=a.pageX;a=a.pageY}else{var h=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;g=a.clientX+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0);a=a.clientY+h}e=c>g&&g>e.left&&
a>e.top&&f>a;d.parents(b).length>0&&e||this.options.delayTimeout>new Date-this._pTimer&&this._overPopper(false)},positionPopper:function(){this._positionPopper()},_positionPopper:function(){var a=this._initDestElement(),b=(this.options.sourcePosition||this.options.destPosition).split(/\s/),d=(this.options.targetPosition||this.options.triggerPosition).split(/\s/);b=b[1]+" "+b[0];var e=d[1]+" "+d[0],c=this.options.adjustFit;c=c==="autoAdjust"||c==="slide"?"fit":"none";a.css("display")==="none"&&a.css("visibility",
"hidden").css("display","block");var f=jQuery(this.element),g=f.height(),h=f.position().top,i=f.parent().height(),j=this.options._adjustOffsetX||0,k=this.options._adjustOffsetY||0;if(f.parent().css("overflow")==="hidden"&&h+g>i){f=i-h-g;if(d[0]==="center"||d[0]==="middle")k+=f/2;else if(d[0]==="bottom")k+=f}a.position({my:b,of:this.element,at:e,offset:j+" "+k,collision:c});if(this._shim){a=this.content.find(".ui-ncbipopper-content").position();d=parseInt(this.content.css("top"),10)+parseInt(a.top,
10);b=parseInt(this.content.css("left"),10)+parseInt(a.left,10);this._shim.css({top:d+"px",left:b+"px","z-index":this.content.css("z-index")-1}).width(this.content.width()-parseInt(a.left,10)).height(this.content.height()-parseInt(a.top,10))}},_displayPopper:function(){var a=this,b=this.getDestElement(),d=b.data("trigger");if(d&&d.get(0)!=this.element.get(0)&&d.ncbipopper("isOpen")){b.data("doNotClose",true);window.setTimeout(function(){b.data("doNotClose",false)},this.options.delayTimeout)}b.data("trigger",
this.element);d=this.options.openAnimation;if(d==="none"){b.css("visibility","visible");a.element.stop(true,true).trigger("ncbipopperopencomplete");a.isPopperDisplayed=true;this._shim&&this._shim.show()}else{b.stop(true,true);b.css("visibility","visible").css("display","none");b[d](290,function(){a.element.trigger("ncbipopperopencomplete");a.isPopperDisplayed=true;a._shim&&a._shim.show()})}this._setAriaState(true)},_hidePopper:function(){var a=this,b=this.getDestElement();if(b.data("doNotClose")){a.isPopperDisplayed=
false;b.data("doNotClose",false)}else{var d=this.options.closeAnimation;if(d==="none"){b.css("display","none");a.element.stop(true,true).trigger("ncbipopperclosecomplete");a.isPopperDisplayed=false}else{b.stop(true,true);b[d](150,function(){a.element.trigger("ncbipopperclosecomplete");a.isPopperDisplayed=false})}this._shim&&this._shim.hide()}},_closeActivePopperGroup:function(){var a=this.options.groupName;if(a){var b=jQuery.ui.ncbipopper.openGroups[a];if(b&&b!==this.element){jQuery(b).ncbipopper("close");
jQuery.ui.ncbipopper.openGroups[a]=null}}},_setActivePopperGroup:function(){var a=this.options.groupName;if(a)jQuery.ui.ncbipopper.openGroups[a]=this.element},_addEscapeListener:function(){if(this.options.isEscapeKeyClose){this._registerGlobalEscapeListener();var a=this;jQuery(document).bind("ncbipopperescapepressed",function(){a.close()})}},_registerGlobalEscapeListener:function(){if(!jQuery.ui.ncbipopper.isGlobalEscapeRegistered){jQuery.ui.ncbipopper.isGlobalEscapeRegistered=true;var a=document,
b="keypress";if(!jQuery.browser.msie&&!jQuery.browser.mozilla){a=window;b="keydown"}jQuery(a)[b](function(d){d.keyCode===27&&jQuery(document).trigger("ncbipopperescapepressed")})}},_addDocumentClickListener:function(){if(this.options.isDocumentCloseClick){this._registerGlobalClickListener();var a=this;jQuery(document).bind("ncbipopperdocumentclick",function(b,d){a._checkDocumentClick(b,d)})}},_registerGlobalClickListener:function(){if(!jQuery.ui.ncbipopper.isGlobalClickRegistered){jQuery.ui.ncbipopper.isGlobalClickRegistered=
true;jQuery(document).click(function(a){jQuery(document).trigger("ncbipopperdocumentclick",[a.srcElement||a.target])})}},_addResizeListener:function(){this._registerGlobalResizeListener();var a=this;jQuery(window).bind("ncbipopperdocumentresize",function(){a._pageResized()})},_registerGlobalResizeListener:function(){if(!jQuery.ui.ncbipopper.isGlobalResizeRegistered){jQuery.ui.ncbipopper.isGlobalResizeRegistered=true;jQuery(window).resize(function(){jQuery(window).trigger("ncbipopperdocumentresize")})}},
_pageResized:function(){this.isPopperOpen&&this._positionPopper()},_checkDocumentClick:function(a,b){if(b&&this.isPopperOpen){b=jQuery(b);if(!(this._isSameElementOrChild(jQuery(this.element),b)||this._isSameElementOrChild(this.getDestElement(),b))){if(a=this.options.multipleHandlesSelector){var d=false,e=this;jQuery(a).each(function(){if(e._isSameElementOrChild(jQuery(this),b))d=true});if(d)return}this.close()}}},_isSameElementOrChild:function(a,b){return a[0]==b[0]||jQuery(a).has(b).length===1},
_addCloseButton:function(a){if(this.options.addCloseButton){var b=jQuery(".ui-ncbipopper-close-button, .ncbipopper-close-button",a);if(b.length===0)b=jQuery("<button class='ui-ncbipopper-close-button ui-ncbipopper-close-button-generated'>x</button>").attr("generated","true").prependTo(a);if(b){var d=this;b.click(function(e){d.close();e.preventDefault()})}}},_addDestElementCloseClick:function(a){if(this.options.isTargetElementCloseClick||this.options.isDestElementCloseClick){var b=this;a.click(function(d){b.close();
d.preventDefault()})}},_createTextHolder:function(a){var b=jQuery("<div></div>"),d=this._getFunction(a);if(typeof d==="function")a=this._getText(d);b.css("display","none").attr("generated","true").html(a).appendTo(document.body);return b},_getFunction:function(a){var b=null;if(jQuery.ui.jig&&jQuery.ui.jig._getFncFromStr)b=jQuery.ui.jig._getFncFromStr(a);else if(typeof a==="function")b=a;return b},_getText:function(a){a||(a=this._getFunction(this.options.destText||this.options.sourceText));var b=this;
this.hasCallback=true;a=a.call(this.element[0],function(d){b._setHTML(d)})||this.options.loadingText;if(a!==this.options.loadingText)this.isFunctionResultCached=this.options.isDestTextCacheable;return a},_reloadContent:function(){var a=this._getText(),b=jQuery(".ui-ncbipopper-content",this.getDestElement());b&&b.html(a)},_setHTML:function(a){var b=jQuery(".ui-ncbipopper-content",this.getDestElement());if(b){b.html(a);this.isFunctionResultCached=this.options.isDestTextCacheable;!this.options.showLoadingMessage&&
!this.isPopperDisplayed&&this._displayPopper()}},_addTriggerAria:function(){this.element.attr("role","button").attr("aria-expanded",false)},_addDestAria:function(){this.getDestElement().attr("aria-live","assertive").attr("aria-hidden",true).addClass("ui-helper-reset")},_setAriaState:function(a){this.element.attr("aria-expanded",a);this.getDestElement().attr("aria-hidden",!a)},isOpen:function(){return this.isPopperOpen}});jQuery.ui.ncbipopper.openGroups={};
jQuery.ui.ncbipopper.isGlobalEscapeRegistered=false;jQuery.ui.ncbipopper.isGlobalClickRegistered=false;jQuery.ui.ncbipopper.isGlobalResizeRegistered=false;jQuery.ui.ncbipopper._selector=".jig-ncbipopper";jQuery.ui.ncbipopper.getSelector=function(){return this._selector};
(function(a){a.widget("ui.ncbislideshow",{options:{fadeSpeed:500,slideInterval:4E3,currentSlide:1,height:"117px",width:"410px",randomStart:false},_create:function(){this.element.addClass("ui-ncbislideshow").children("ul").addClass("ui-ncbislideshow-slides");this.options.slideCount=this.element.find("ul.ui-ncbislideshow-slides > li").length;this.options.randomStart&&this._setRandomStart();this.element.append(this._generateSkipList());this.element.find("ul.ui-ncbislideshow-slides").height(this.options.height).width(this.options.width);
this.element.find(".ui-ncbislideshow-skip li a:eq("+this.options.currentSlide+")").addClass("active");this.element.find(".ui-ncbislideshow-slides li").hide();this.element.find(".ui-ncbislideshow-slides li:nth-child("+this.options.currentSlide+")").show();this.startAnimation()},_setRandomStart:function(){this.element.ncbislideshow("option","currentSlide",Math.floor(Math.random()*this.options.slideCount+1))},startAnimation:function(){var b=this;this.element.find("span.ui-icon").addClass("ui-icon-pause").removeClass("ui-icon-play").attr("title",
"click to pause");this.options.animTimeout=setTimeout(function(){b._rotateSlides()},this.options.slideInterval)},stopAnimation:function(){this.element.find("span.ui-icon").addClass("ui-icon-play").removeClass("ui-icon-pause").attr("title","click to play");clearTimeout(this.options.animTimeout);delete this.options.animTimeout},_rotateSlides:function(){this._advanceSlide();this.startAnimation()},_advanceSlide:function(){var b=this.options,d=this.element;if(b.currentSlide>=this.options.slideCount)b.currentSlide=
1;else b.currentSlide++;d.find(".ui-ncbislideshow-slides li:visible").fadeOut(b.fadeSpeed);d.find(".ui-ncbislideshow-slides li:nth-child("+b.currentSlide+")").fadeIn(b.fadeSpeed);d.find(".ui-ncbislideshow-skip > li > a").removeClass("active");d.find(".ui-ncbislideshow-skip li a:eq("+b.currentSlide+")").addClass("active")},skiptoSlide:function(){var b=this.options,d=this.element;d.find(".ui-ncbislideshow-slides li:visible").fadeOut(b.fadeSpeed);d.find(".ui-ncbislideshow-slides li:nth-child("+b.currentSlide+
")").fadeIn(b.fadeSpeed);d.find(".ui-ncbislideshow-skip > li > a").removeClass("active");d.find(".ui-ncbislideshow-skip li a:eq("+b.currentSlide+")").addClass("active");if(this.options.animTimeout){this.stopAnimation();this.startAnimation()}},_generateSkipList:function(){var b=this,d=this.options,e=a("<a>").attr("href","#").attr("tabindex","-1").append(a("<span>").attr("title","click to pause").addClass("ui-icon ui-icon-pause")).bind("click",function(f){d.animTimeout?b.stopAnimation():b.startAnimation();
f.preventDefault()}),c=a("<ul>").width(d.width).addClass("ui-ncbislideshow-skip").append(a("<li>").addClass("ui-ncbislideshow-playPause").append(e));this.element.find("ul.ui-ncbislideshow-slides > li").each(function(f){var g=f+1;f=a("<a>"+g+"</a>").attr("href","#").attr("tabindex","-1").bind("click",function(h){if(b.options.currentSlide!==g){b.options.currentSlide=g;b.skiptoSlide();h.preventDefault()}});c.append(a("<li>").append(f))});return c},destroy:function(){this.element.find(".ui-ncbislideshow-slides li").show();
this.stopAnimation();this.element.children(".ui-ncbislideshow-skip").remove();this.element.removeClass("ui-ncbislideshow").children("ul").removeClass("ui-ncbislideshow-slides");a.Widget.prototype.destroy.apply(this,arguments)}});a.ui.ncbislideshow.prototype.version="2.0"})(jQuery);
jQuery.widget("ui.ncbitabpopper",{options:{offsetLeft:-20,offsetTop:0,innerOffset:0},_create:function(){this._addhandlers();this._createPoppers()},_addhandlers:function(){var a=this;jQuery("a[sourceContent], button[sourceContent]",this.element).click(function(b){var d=this.getAttribute("tabvalidate");a._open(b,this,d)!==false&&this.onfooclick&&this.onfooclick(b)});jQuery(document).click(function(b){a._globalClick(b)});jQuery(window).resize(function(b){a._positionBox(b)})},_popBox:null,_createPoppers:function(){this._popBoxCover=
jQuery("<div class='ui-ncbi-tabpopper-cover'></div>").appendTo(document.body)},_activeMenu:null,_open:function(a,b,d){if(a!=null){a.preventDefault();a.stopPropagation()}if(this._activeMenu!==null){a=this._activeMenu[0]==b;this.close();if(a)return}if(d){var e=this;if(d.indexOf(".")===-1)a=window[d];else{a=window;d=d.split(".");for(var c=0;c<d.length;c++)a=a[d[c]]}if(a(function(){e._openPane(b)})!==true)return}this._openPane(b)},_openPane:function(a){this._activeMenu=jQuery(a);if(this._activeMenu.length>
0){this._popBox=jQuery("#"+this._activeMenu.attr("sourceContent"));this._popBox.addClass("ui-ncbi-tabpopper");this._positionBox()}},open:function(a){if(typeof a==="string")a=jQuery(a);var b=a.attr("tabvalidate");this._open(null,a,b)},_globalClick:function(a){if(this._activeMenu!==null){for(a=a.target;a!=null;){if(a==this._popBox[0]||a==this._popBoxCover[0])break;a=jQuery(a).parent();if(a.length>0)a=a[0];else break}a.length===0&&this.close()}},close:function(){if(this._activeMenu!==null){var a=this,
b=this._activeMenu;this._popBox.css("z-index",1001).slideUp(170,function(){b.removeClass("active");a.element.trigger("tabpopperclose",[b])});this._popBoxCover.css("z-index",1002).css("display","none");this._activeMenu=null}},_positionBox:function(){function a(){k.element.trigger("tabpopperopen",[b])}var b=this._activeMenu;if(b){var d=b.position(),e=b.height(),c=Math.floor(parseFloat(b.css("padding-bottom")))||0,f=Math.floor(parseFloat(b.css("padding-left")))||0,g=Math.floor(parseFloat(b.css("padding-right")))||
0,h=Math.floor(parseFloat(b.css("border-left-width")))||0;parseFloat(b.css("margin-right"));var i=Math.floor(parseFloat(b.css("margin-left")))||0,j=parseFloat(b.css("margin-bottom"))||0;j=isNaN(j)?0:Math.floor(j);e=d.top+e+c+this.options.offsetTop-j;c=d.left+this.options.offsetLeft;if(c<0)c=0;else if(this._popBox.width()+c>jQuery(window).width()){c=jQuery(window).width()-this._popBox.width()-12;c=c>0?c:0}f=b.width()+f+g-2*this.options.innerOffset;d=d.left+h+i+this.options.innerOffset;b.addClass("active");
var k=this;this._popBox.css("top",e+"px").css("left",c+"px").css("z-index",1003).slideDown(170,a);this._popBoxCover.width(f).css("top",e+"px").css("left",d+"px").css("z-index",1004).slideDown(100)}}});
(function(a){a.widget("ui.ncbitoggler",{styles:{ariaWrapper:"ui-ncbitoggler-live",groupMasterReplaceNode:"span.ui-ncbitoggler-group-replace-txt",groupMasterStateClose:"ui-ncbitoggler-group-master-to-close",groupMasterStateOpen:"ui-ncbitoggler-group-master-to-open",master:"ui-ncbitoggler",masterOpen:"ui-ncbitoggler-open",slave:"ui-ncbitoggler-slave",slaveOpen:"ui-ncbitoggler-slave-open",icon:"ui-icon-triangle-1-e",iconOpen:"ui-icon-triangle-1-s",iconPlusMinusBig:"ui-icon-plus-minus-big",iconPlusMinusBigOpen:"ui-icon-plus-minus-big-open"},
_create:function(){this._setOption("disabled",false);this.appendTextNode=this.initSlavesClass=this.iconSpan=this.startOpen=this.rememberCookie=this.remember=this.cookieName=this.addedHref=null;var b=this.element,d=b[0],e=this.styles,c=this,f=this.options.isIcon;b.addClass("ui-widget ui-ncbitoggler");f||b.addClass("ui-ncbitoggler-no-icon");var g=b.attr("href");!g?(this.addedHref=true):(this.addedHref=false);this._validate(g);b.children("span.ui-ncbitoggler-master-text").length===0&&b.contents().filter(function(){return this.nodeType===
3}).each(function(){var h=a(this);jQuery.trim(this.nodeValue).length>0&&h.wrap('<span class="ui-ncbitoggler-master-text"></span>')});if(this.options.openedAppendText!==""||this.options.closedAppendText!==""){this.appendTextNode=b.children("span.ui-ncbitoggler-appended-text");if(this.appendTextNode.length===0)throw new Error('ncbitoggler: when setting openAppendText or closedAppendText options, must have an existing <span class="ui-ncbitoggler-appended-text"> node as first child of master');}if(this.remember=
this.options.remember||false){g=this.element.attr("id");if(!g){window.console&&console.error&&console.error("ncbitoggler: master node "+d+" must have a unique id attribute when remembering state");return}this.cookieName=this.options.cookieNamePrefix+g;this.rememberCookie=a.cookie(this.cookieName)}if(this.startOpen=this.rememberCookie?this.rememberCookie==="open"?true:false:b.hasClass("jig-ncbitoggler-open")||b.hasClass(e.masterOpen)||this.options.initOpen?true:false){b.removeClass(this.styles.master);
b.addClass(e.masterOpen)}else{b.removeClass(this.styles.masterOpen);b.addClass(e.master)}f&&this._initMasterIcon();this.slaves=this._getSlaves();this.slaves.addClass("ui-widget ui-ncbitoggler").removeClass("ui-ncbitoggler-disabled ui-state-disabled");if(this.startOpen){this.slaves.removeClass(e.slave);this.slaves.addClass(e.slaveOpen);this.initSlavesClass=e.slaveOpen}else{this.slaves.removeClass(e.slaveOpen);this.slaves.addClass(e.slave);this.initSlavesClass=e.slave}this._initAria();this._doGrouping();
b.click(function(h){c.toggle(h,c)})},_getGroupMaster:function(){for(var b=this.styles,d=this.element[0].className.split(/\s+/),e=0;e<d.length;e++){var c=d[e].match(/ui-ncbitoggler-group-(.+)$/);if(c){c=c[1];var f=a("a.ui-ncbitoggler-group-open-"+c+", a.ui-ncbitoggler-group-close-"+c,this.options.contextNode);if(f.length===1){f.hasClass("ui-ncbitoggler-group-open-"+c)&&f.addClass(b.groupMasterStateOpen);f.hasClass("ui-ncbitoggler-group-close-"+c)&&f.addClass(b.groupMasterStateClose);return f}}}},_doGrouping:function(){var b=
this._getGroupMaster();if(b){var d=this,e=this.styles,c=b.data("togglers");this.element.id||a.ui.jig._generateId(this.widgetName);if(!this.element[0].id)this.element[0].id=a.ui.jig._generateId(this.widgetName);if(typeof c==="undefined"){b.data("togglers",[]);b.data("togglers").push(this.element)}else c.push(this.element);var f=b.find(e.groupMasterReplaceNode);b.click(function(g){g.preventDefault();g=b.data("togglers");g=g[g.length-1][0];if(b.hasClass(e.groupMasterStateOpen)){d.open();f.length>0&&
f.text(d.options.groupMasterCloseReplaceText);d.element[0]===g&&b.removeClass(e.groupMasterStateOpen).addClass(e.groupMasterStateClose)}else{d.close();f.length>0&&f.text(d.options.groupMasterOpenReplaceText);d.element[0]===g&&b.removeClass(e.groupMasterStateClose).addClass(e.groupMasterStateOpen)}})}},_initAria:function(){var b=this.startOpen;this.element.attr({role:"button","aria-expanded":b});this.slaves.attr({"aria-hidden":b?false:true});this.options.liveRegions&&this.slaves.each(function(){a(this).wrap('<div class="ui-helper-reset" aria-live="assertive">')})},
_validate:function(b){var d=this.element,e=["a","button"],c=d[0].tagName.toLowerCase();if(a.inArray(c,e)===-1)throw new Error("ncbitoggler: master node must be one of the following elements: "+e.toString());b||d.attr("href","#")},_initMasterIcon:function(){var b=this.element,d=this.styles;if(this.options.indicator=="plus-minus-big"){this.iconOpenClass=d.iconPlusMinusBigOpen;this.iconCloseClass=d.iconPlusMinusBig}else{this.iconOpenClass=d.iconOpen;this.iconCloseClass=d.icon}this.iconSpan=b.find("span.ui-icon");
if(this.iconSpan.length===0){this.iconSpan=a('<span class="ui-icon"></span>');this.startOpen?this.iconSpan.addClass(this.iconOpenClass):this.iconSpan.addClass(this.iconCloseClass);b.append(this.iconSpan)}else if(this.startOpen){this.iconSpan.removeClass(this.iconCloseClass);this.iconSpan.addClass(this.iconOpenClass)}},getSlaves:function(){return this._slaves},_getSlaves:function(){var b=this.element,d=b.attr("toggles");if(d){this.isSibling=false;b=d.split(/ +/);d="";for(var e=0;e<b.length;e++)d+=
e!==b.length-1?"#"+b[e]+",":"#"+b[e];b=a(d)}else if(b.parent(":header").length>0){b.parent(":header").parent().css("zoom","1");this.isSibling=true;b=b.parent(":header").css("zoom","1").next()}else{this.isSibling=true;b=b.next()}return this._slaves=b},_openSlaves:function(){var b=this.slaves,d=this.styles;b.removeClass(d.slave).addClass(d.slaveOpen).attr("aria-hidden","false");d=this.options.openedAppendText;d!==""&&this.appendTextNode.html(d);b.css("display","")},_closeSlaves:function(){var b=this.slaves,
d=this.styles;b.removeClass(d.slaveOpen).addClass(d.slave).attr("aria-hidden","true");d=this.options.closedAppendText;d!==""&&this.appendTextNode.html(d);b.css("display","")},_fixHasLayout:function(b){window.setTimeout(function(){b.slaves.addClass("foo").removeClass("foo")},1)},open:function(b){var d=this.element,e=this,c=this.styles;if(d.hasClass(c.master)){d.removeClass(c.master).addClass(c.masterOpen).attr("aria-expanded","true");this.options.isIcon&&this.iconSpan.removeClass(this.iconCloseClass).addClass(this.iconOpenClass);
this.remember&&a.cookie(this.cookieName,"open");if(this.options.animation==="slide")this.slaves.slideToggle(this.options.speed,function(){e._openSlaves();a.browser.msie&&e._fixHasLayout(e);d.trigger("ncbitoggleropen");b&&b()});else{this._openSlaves();a.browser.msie&&e._fixHasLayout(e);d.trigger("ncbitoggleropen");b&&b()}}return d},close:function(b){var d=this.element,e=this,c=this.styles;if(d.hasClass(c.masterOpen)){d.removeClass(c.masterOpen).addClass(c.master).attr("aria-expanded","false");this.options.isIcon&&
this.iconSpan.removeClass(this.iconOpenClass).addClass(this.iconCloseClass);this.remember&&a.cookie(this.cookieName,"closed");if(this.options.animation==="slide")this.slaves.slideToggle(this.options.speed,function(){e._closeSlaves();d.trigger("ncbitogglerclosed").trigger("ncbitogglerclose");b&&b()});else{this._closeSlaves();d.trigger("ncbitogglerclosed");b&&b()}}return d},toggle:function(b,d,e){var c=arguments.length;if(c===0||c===1){d=this;if(c===1)e=arguments[0]}else b.preventDefault();this.element.hasClass(this.styles.master)?
d.open(e):d.close(e)},_removeHandlers:function(){this.element.unbind("click");this.element.click(function(b){b.preventDefault()})},destroy:function(){a.Widget.prototype.destroy.apply(this,arguments);var b=this.element,d=this.styles;b.removeClass(d.master+" "+d.masterOpen+" ui-state-disabled ui-widget ui-ncbitoggler-disabled").removeAttr("role").removeAttr("aria-expanded");this.slaves.removeClass("ui-ncbitoggler-slave ui-ncbitoggler-slave-open ui-state-disabled ui-widget ui-ncbitoggler-disabled");
if(this.options.isIcon){d=b.find("span.ui-icon")[0];b[0].removeChild(d)}this.addedHref&&b.removeAttr("href");this._removeHandlers();return this},disable:function(){a.Widget.prototype.disable.apply(this,arguments);this._removeHandlers();this.slaves.addClass("ui-ncbitoggler-disabled ui-state-disabled");return this},enable:function(){a.Widget.prototype.enable.apply(this,arguments);this.slaves.removeClass("ui-ncbitoggler-disabled ui-state-disabled");var b=this;this.element.click(function(d){b.toggle(d,
b)});return this}});a.ui.ncbitoggler.prototype.options={animation:"slide",closedAppendText:"",cookieNamePrefix:"jig-tog-rem-",indicator:"small-arrow",initOpen:false,isIcon:true,liveRegions:true,openedAppendText:"",remember:false,speed:50}})(jQuery);
(function(a){a.widget("ui.ncbitree_base",{options:{expanded:"",speed:120,remember:false},_create:function(){this.list=this.element.eq(0);this.list[0].nodeName=="UL"&&this._treeify()},_treeify:function(){var b=this.list,d=this,e=this.options;b.attr({role:"tree"}).addClass("ui-widget");b.find("a:eq(0)").attr("tabindex","0");b.find("a:gt(0)").attr("tabindex","-1");b.find("ul").attr({role:"group"}).addClass("tree-group-collapsed");b.find("li").attr({role:"treeitem"});b.find("li:has(ul)").attr("aria-expanded",
"false").find(">a");b.find("li:has(ul)").find(">a").wrap('<span class="tree-parent"/>');b.bind("expand.treeEvents",function(f){d._expand(f.target);d._trigger("expand",f)}).bind("collapse.treeEvents",function(f){d._collapse(f.target);d._trigger("collapse",f)}).bind("toggle.treeEvents",function(f){d._toggle(f.target)}).bind("traverseDown.treeEvents",function(f){var g=b.find("span[tabindex=0]");g.length||(g=b.find("a[tabindex=0]"));g.length||(g=a(f.target));f=g.parent();if(f.is("[aria-expanded=true]"))g.next().find("a, span").eq(0).focus();
else f.next().length?f.next().find("a, span").eq(0).focus():f.parents("li").next().find("a, span").eq(0).focus()}).bind("traverseUp.treeEvents",function(f){var g=b.find("span[tabindex=0]");g.length||(g=b.find("a[tabindex=0]"));g.length||(g=a(f.target));f=g.parent();if(f.prev().length)f.prev().is("[aria-expanded=true]")?f.prev().find("li:visible:last a, li:visible:last span").eq(0).focus():f.prev().find("a, span").eq(0).focus();else f.parents("li:eq(0)").find("a, span").eq(0).focus()});b.bind("focus.treeEvents",
function(f){b.find("[tabindex=0]").attr("tabindex","-1").removeClass("ui-state-focus");a(f.target).attr("tabindex","0").addClass("ui-state-focus")}).bind("click.treeEvents",function(f){var g=a(f.target);if(g.is("span.tree-parent")){g.trigger("toggle");g.eq(0).focus();f.preventDefault()}}).bind("keydown.treeEvents",function(f){var g=b.find("span[tabindex=0], a[tabindex=0]");if(f.keyCode==37||f.keyCode==38||f.keyCode==39||f.keyCode==40){f.keyCode==37&&g.parent().is("[aria-expanded=true]")&&g.trigger("collapse");
f.keyCode==39&&g.parent().is("[aria-expanded=false]")&&g.trigger("expand");f.keyCode==38&&g.trigger("traverseUp");f.keyCode==40&&g.trigger("traverseDown");return false}else if((f.keyCode==13||f.keyCode==32)&&g.is("span.tree-parent")){g.trigger("toggle");return false}});var c=b.attr("id");if(c&&a.cookie("ncbitree")&&a.parseJSON(a.cookie("ncbitree"))[c]){e=a.parseJSON(a.cookie("ncbitree"))[c];d._load_state(e)}else b.find(e.expanded).find(">span").each(function(){d._expand(this)});b.find("li[role=treeitem] > a, li[role=treeitem] > span").addClass("ui-state-default").bind("mouseenter.treeEvents",
function(){a(this).addClass("ui-state-hover")}).bind("mouseleave.treeEvents",function(){a(this).removeClass("ui-state-hover")})},_expand:function(b){var d=this.options,e=this,c=this.list,f=b?a(b):c.find("a[tabindex=0]");f.addClass("ui-state-active").removeClass("ui-state-default");f.next().hide().removeClass("tree-group-collapsed").slideDown(d.speed,function(){a(this).removeAttr("style");f.parent().attr("aria-expanded","true").addClass("tree-expanded");d.remember&&e._save_state()})},_collapse:function(b){var d=
this.options,e=this,c=this.list,f=b?a(b):c.find("a[tabindex=0]");f.removeClass("ui-state-active").addClass("ui-state-default");f.next().slideUp(d.speed,function(){f.parent().attr("aria-expanded","false").removeClass("tree-expanded");a(this).addClass("tree-group-collapsed").removeAttr("style");d.remember&&e._save_state()})},_toggle:function(b){var d=this.list;b=b?a(b):d.find("a[tabindex=0]");b.parent().is("[aria-expanded=false]")?b.trigger("expand"):b.trigger("collapse")},expand:function(b,d){var e=
this.list;if(d){ancestor_spans=e.find(b).parentsUntil("[role=tree]").find(">span");ancestor_spans.each(function(){a(this).trigger("expand")})}e.find(b).find(">span").trigger("expand");this._trigger("expanded",null)},collapse:function(b){this.list.find(b).find(">span").trigger("collapse")},destroy:function(){a.Widget.prototype.destroy.apply(this,arguments);var b=this.list;b.removeAttr("role").removeClass("ui-widget");b.find("a").removeAttr("tabindex").removeClass("ui-state-focus ui-state-default ui-state-hover ui-state-active");
b.find("ul").removeAttr("role").removeClass("tree-group-collapsed");b.find("li").removeAttr("role").removeClass("tree-expanded");b.find("li:has(ul)").removeAttr("aria-expanded").find(">a").removeClass("tree-parent");b.find('span[class*="tree-parent"]>a').unwrap();b.find(this.options.expanded).removeAttr("aria-expanded");b.unbind(".treeEvents")},_load_state:function(b){var d=this,e=this.list;state=b.split("");e.find("li[aria-expanded]").each(function(c){state[c]==1?a(this).find(">span").each(function(){d._expand(this)}):
a(this).find(">span").each(function(){d._collapse(this)})})},_save_state:function(){var b=this.list,d=b.attr("id");if(d){state_data={};if(a.cookie("ncbitree"))state_data=a.parseJSON(a.cookie("ncbitree"));var e="";b.find("li[aria-expanded]").each(function(){e+=a(this).attr("aria-expanded")=="true"?"1":"0"});state_data[d]=e;data=JSON.stringify(state_data);a.cookie("ncbitree",data,{path:"/"})}}});a.ui.ncbitree_base.prototype.version="0.2"})(jQuery);
(function(a){a.widget("ui.ncbitree",a.ui.ncbitree_base,{options:{expanded:""},_create:function(){a.ui.ncbitree_base.prototype._create.call(this);this.list.addClass("jig-tree")},destroy:function(){this.list.removeClass("jig-tree");a.ui.ncbitree_base.prototype.destroy.call(this)}});a.ui.ncbitree.prototype.version="0.1"})(jQuery);
(function(){var a=jQuery.ui.ncbipopper.prototype._create,b=jQuery.ui.ncbipopper.prototype.open,d=jQuery.ui.ncbipopper.prototype.close;jQuery.widget("ui.ncbilinksmenu",jQuery.ui.ncbipopper,{_create:function(){this._checkHrefForWebService();this._setPopperOptions();a.apply(this,arguments);this._handleLinksMenu()},_checkHrefForWebService:function(){if(!this.options.webservice&&!this.options.destSelector&&!this.options.localJSON)this.options.webservice=this.element.attr("href")},_setPopperOptions:function(){var e=
this.options;e.openEvent="click";e.closeEvent="xmouseout";if(e.loadingMessage)e.showLoadingMessage=true;if(!e.width)e.width="200px";e.cssClass="ui-ncbilinksmenu";e.ignoreSettingOutterWidth=true;e.excludeBasicCssStyles=true;if(this.options.webservice||this.options.localJSON)this.options.destText="<ul class='linksmenu-ul'><li class='ui-ncbilinksmenu-loadingMessage'><span>"+this.options.loadingText+"</span></li></ul>"},_handleLinksMenu:function(){this.getDestElement().find("li").attr("role","presentation");
var e=this;this.getDestElement().find("a").attr({role:"menuitem",tabindex:"-1"}).click(function(c){e._pingDetails(c,this,"linksmenuclick");e.close()})},_setTriggerId:function(){var e=this.element.attr("id");e&&this.getDestElement().data("triggerId","#"+e).attr("data-jigtriggerid","#"+e)},_pingDetails:function(e,c,f){typeof ncbi!=="undefined"&&ncbi.sg&&ncbi.sg.ping&&ncbi.sg.ping(c,e.originalEvent,f,{})},close:function(){this._destroyKeyListeners();d.apply(this,arguments)},open:function(){this._setUpKeyListeners();
this._setTriggerId();b.apply(this,arguments);if(!this._contentFetched||!this.options.isDestTextCacheable){var e=this.options.webservice,c=this.options.localJSON;if(e)if(c=this._getCachedItem())this._handleResponse(c.data,c.contentType,true);else{var f=this;if(this.options.isJSONP){c=e.indexOf("?")>0?"&":"?";e+=c+"callback=?";jQuery.getJSON(e,{},function(g){f._loadContentJSON(g)})}else jQuery.ajax({url:e,success:function(g,h,i){f._handleResponse(g,i.getResponseHeader("content-type"))},error:function(){f.getDestElement().find("ul.linksmenu-ul").replaceWith("<ul class='linksmenu-ul'><li class='ui-ncbilinksmenu-errorMessage'><span>Error Loading Data</span></li></ul>");
window.setTimeout(function(){f.close()},4E3)}})}else c&&this._loadContentJSON(c)}},_handleResponse:function(e,c,f){f||(this._cachedCalls[this.options.webservice]={data:e,contentType:c});c=="application/json"?this._loadContentJSON(e):this._loadContent(e)},_cachedResponses:{},_loadContentJSON:function(e){function c(i,j){var k=i.text,l=i.href||"#",m=i.target||"",p=i.click||"",r=i.rel||"";if(m)m=' target="'+m+'"';if(r)r=' rel="'+r+'"';i=jQuery("<li></li>");k=jQuery("<a href='"+l+"'"+m+r+">"+k+"</a>");
if(p)try{var o=new Function(" return "+p+"()");k.click(function(q){o.call(this,q,g)})}catch(n){typeof console!=="undefined"&&console.error&&console.error(n)}i.append(k);j.append(i)}function f(i,j){for(var k=0;k<i.length;k++){var l=i[k],m=l.heading;if(m){var p=jQuery("<li></li>").attr("role","heading");m=jQuery("<span>"+m+"</span>");p.append(m);if(l=l.links){m=jQuery("<ul></ul>");f(l,m);p.append(m)}j.append(p)}else c(l,j)}}var g=this,h=jQuery("<ul></ul>").addClass("linksmenu-ul").attr("role","menu");
(e=e.links)&&f(e,h);this._contentFetched=true;this.getDestElement().find("ul.linksmenu-ul").replaceWith(h);this._handleLinksMenu();this.element.trigger("ncbilinksmenujsonmenuloaded")},_loadContent:function(e){var c=e;if(e.match(/(<html)/i)){e=jQuery("<div></div>").html(e).find(".linksmenu-ul");if(e.length>1)e=e.filter(this.options.webserviceMenuSelector);c=e.clone();if(!c){console.error("no element found");c="<ul class='linksmenu-ul'><li class='ui-ncbilinksmenu-errorMessage'><span>Error Loading Data</span></li></ul>"}}this._contentFetched=
true;this.getDestElement().find("ul.linksmenu-ul").replaceWith(c).addClass("linksmenu-ul");this._handleLinksMenu()},_setUpKeyListeners:function(){if(!this._popupkeylistener){var e=this;this.selectedOption=-1;this._popupkeylistener=function(c){e._moveMenuOption(c.keyCode)&&c.preventDefault()};jQuery(window).keypress(this._popupkeylistener)}},_destroyKeyListeners:function(){if(this._popupkeylistener){jQuery(window).unbind("keypress",this._popupkeylistener);this.selectedOption=null}},_keys:{up:38,down:40,
enter:13},_moveMenuOption:function(e){var c=this._keys;switch(e){case c.up:this._moveSelection(-1);cancelAction=true;break;case c.down:this._moveSelection(1);cancelAction=true;break;case c.enter:cancelAction=false;break;default:cancelAction=false}return cancelAction},_moveSelection:function(e){if(this.selectedOption===undefined||this.selectedOption===null)this.selectedOption=-1;this.selectedOption+=e;e=this.getDestElement().find("a");var c=e.length;if(this.selectedOption<0)this.selectedOption=c-1;
else if(this.selectedOption>=c)this.selectedOption=0;e.eq(this.selectedOption).focus()},_cachedCalls:{},_getCachedItem:function(){if(!this.options.isDestTextCacheable)return null;return this._cachedCalls[this.options.webservice]}})})();
(function(a){function b(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su",
"Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"show",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"_default",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};a.extend(this._defaults,this.regional[""]);this.dpDiv=a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>')}function d(c,f){a.extend(c,
f);for(var g in f)if(f[g]==null||f[g]==undefined)c[g]=f[g];return c}a.extend(a.ui,{datepicker:{version:"1.8"}});var e=(new Date).getTime();a.extend(b.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(c){d(this._defaults,c||{});return this},_attachDatepicker:function(c,f){var g=null;for(var h in this._defaults){var i=c.getAttribute("date:"+h);if(i){g=g||{};try{g[h]=eval(i)}catch(j){g[h]=
i}}}h=c.nodeName.toLowerCase();i=h=="div"||h=="span";if(!c.id)c.id="dp"+ ++this.uuid;var k=this._newInst(a(c),i);k.settings=a.extend({},f||{},g||{});if(h=="input")this._connectDatepicker(c,k);else i&&this._inlineDatepicker(c,k)},_newInst:function(c,f){return{id:c[0].id.replace(/([^A-Za-z0-9_])/g,"\\\\$1"),input:c,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:f,dpDiv:!f?this.dpDiv:a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}},
_connectDatepicker:function(c,f){var g=a(c);f.append=a([]);f.trigger=a([]);if(!g.hasClass(this.markerClassName)){this._attachments(g,f);g.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(h,i,j){f.settings[i]=j}).bind("getData.datepicker",function(h,i){return this._get(f,i)});this._autoSize(f);a.data(c,"datepicker",f)}},_attachments:function(c,f){var g=this._get(f,"appendText"),h=this._get(f,"isRTL");f.append&&
f.append.remove();if(g){f.append=a('<span class="'+this._appendClass+'">'+g+"</span>");c[h?"before":"after"](f.append)}c.unbind("focus",this._showDatepicker);f.trigger&&f.trigger.remove();g=this._get(f,"showOn");if(g=="focus"||g=="both")c.focus(this._showDatepicker);if(g=="button"||g=="both"){g=this._get(f,"buttonText");var i=this._get(f,"buttonImage");f.trigger=a(this._get(f,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:i,alt:g,title:g}):a('<button type="button"></button>').addClass(this._triggerClass).html(i==
""?g:a("<img/>").attr({src:i,alt:g,title:g})));c[h?"before":"after"](f.trigger);f.trigger.click(function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput==c[0]?a.datepicker._hideDatepicker():a.datepicker._showDatepicker(c[0]);return false})}},_autoSize:function(c){if(this._get(c,"autoSize")&&!c.inline){var f=new Date(2009,11,20),g=this._get(c,"dateFormat");if(g.match(/[DM]/)){var h=function(i){for(var j=0,k=0,l=0;l<i.length;l++)if(i[l].length>j){j=i[l].length;k=l}return k};f.setMonth(h(this._get(c,
g.match(/MM/)?"monthNames":"monthNamesShort")));f.setDate(h(this._get(c,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())}c.input.attr("size",this._formatDate(c,f).length)}},_inlineDatepicker:function(c,f){var g=a(c);if(!g.hasClass(this.markerClassName)){g.addClass(this.markerClassName).append(f.dpDiv).bind("setData.datepicker",function(h,i,j){f.settings[i]=j}).bind("getData.datepicker",function(h,i){return this._get(f,i)});a.data(c,"datepicker",f);this._setDate(f,this._getDefaultDate(f),
true);this._updateDatepicker(f);this._updateAlternate(f)}},_dialogDatepicker:function(c,f,g,h,i){c=this._dialogInst;if(!c){c="dp"+ ++this.uuid;this._dialogInput=a('<input type="text" id="'+c+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);a("body").append(this._dialogInput);c=this._dialogInst=this._newInst(this._dialogInput,false);c.settings={};a.data(this._dialogInput[0],"datepicker",c)}d(c.settings,h||{});f=f&&f.constructor==Date?
this._formatDate(c,f):f;this._dialogInput.val(f);this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");c.settings.onSelect=g;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);
a.blockUI&&a.blockUI(this.dpDiv);a.data(this._dialogInput[0],"datepicker",c);return this},_destroyDatepicker:function(c){var f=a(c),g=a.data(c,"datepicker");if(f.hasClass(this.markerClassName)){var h=c.nodeName.toLowerCase();a.removeData(c,"datepicker");if(h=="input"){g.append.remove();g.trigger.remove();f.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(h=="div"||h=="span")f.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(c){var f=a(c),g=a.data(c,"datepicker");if(f.hasClass(this.markerClassName)){var h=c.nodeName.toLowerCase();if(h=="input"){c.disabled=false;g.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(h=="div"||h=="span")f.children("."+this._inlineClass).children().removeClass("ui-state-disabled");this._disabledInputs=a.map(this._disabledInputs,function(i){return i==c?null:i})}},_disableDatepicker:function(c){var f=
a(c),g=a.data(c,"datepicker");if(f.hasClass(this.markerClassName)){var h=c.nodeName.toLowerCase();if(h=="input"){c.disabled=true;g.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(h=="div"||h=="span")f.children("."+this._inlineClass).children().addClass("ui-state-disabled");this._disabledInputs=a.map(this._disabledInputs,function(i){return i==c?null:i});this._disabledInputs[this._disabledInputs.length]=c}},_isDisabledDatepicker:function(c){if(!c)return false;
for(var f=0;f<this._disabledInputs.length;f++)if(this._disabledInputs[f]==c)return true;return false},_getInst:function(c){try{return a.data(c,"datepicker")}catch(f){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(c,f,g){var h=this._getInst(c);if(arguments.length==2&&typeof f=="string")return f=="defaults"?a.extend({},a.datepicker._defaults):h?f=="all"?a.extend({},h.settings):this._get(h,f):null;var i=f||{};if(typeof f=="string"){i={};i[f]=g}if(h){this._curInst==h&&
this._hideDatepicker();var j=this._getDateDatepicker(c,true);d(h.settings,i);this._attachments(a(c),h);this._autoSize(h);this._setDateDatepicker(c,j);this._updateDatepicker(h)}},_changeDatepicker:function(c,f,g){this._optionDatepicker(c,f,g)},_refreshDatepicker:function(c){(c=this._getInst(c))&&this._updateDatepicker(c)},_setDateDatepicker:function(c,f){if(c=this._getInst(c)){this._setDate(c,f);this._updateDatepicker(c);this._updateAlternate(c)}},_getDateDatepicker:function(c,f){(c=this._getInst(c))&&
!c.inline&&this._setDateFromField(c,f);return c?this._getDate(c):null},_doKeyDown:function(c){var f=a.datepicker._getInst(c.target),g=true,h=f.dpDiv.is(".ui-datepicker-rtl");f._keyEvent=true;if(a.datepicker._datepickerShowing)switch(c.keyCode){case 9:a.datepicker._hideDatepicker();g=false;break;case 13:g=a("td."+a.datepicker._dayOverClass,f.dpDiv).add(a("td."+a.datepicker._currentClass,f.dpDiv));g[0]?a.datepicker._selectDay(c.target,f.selectedMonth,f.selectedYear,g[0]):a.datepicker._hideDatepicker();
return false;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(c.target,c.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(c.target,c.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:if(c.ctrlKey||c.metaKey)a.datepicker._clearDate(c.target);g=c.ctrlKey||c.metaKey;break;case 36:if(c.ctrlKey||c.metaKey)a.datepicker._gotoToday(c.target);g=c.ctrlKey||
c.metaKey;break;case 37:if(c.ctrlKey||c.metaKey)a.datepicker._adjustDate(c.target,h?+1:-1,"D");g=c.ctrlKey||c.metaKey;if(c.originalEvent.altKey)a.datepicker._adjustDate(c.target,c.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:if(c.ctrlKey||c.metaKey)a.datepicker._adjustDate(c.target,-7,"D");g=c.ctrlKey||c.metaKey;break;case 39:if(c.ctrlKey||c.metaKey)a.datepicker._adjustDate(c.target,h?-1:+1,"D");g=c.ctrlKey||c.metaKey;if(c.originalEvent.altKey)a.datepicker._adjustDate(c.target,
c.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:if(c.ctrlKey||c.metaKey)a.datepicker._adjustDate(c.target,+7,"D");g=c.ctrlKey||c.metaKey;break;default:g=false}else if(c.keyCode==36&&c.ctrlKey)a.datepicker._showDatepicker(this);else g=false;if(g){c.preventDefault();c.stopPropagation()}},_doKeyPress:function(c){var f=a.datepicker._getInst(c.target);if(a.datepicker._get(f,"constrainInput")){f=a.datepicker._possibleChars(a.datepicker._get(f,"dateFormat"));
var g=String.fromCharCode(c.charCode==undefined?c.keyCode:c.charCode);return c.ctrlKey||g<" "||!f||f.indexOf(g)>-1}},_doKeyUp:function(c){c=a.datepicker._getInst(c.target);if(c.input.val()!=c.lastVal)try{if(a.datepicker.parseDate(a.datepicker._get(c,"dateFormat"),c.input?c.input.val():null,a.datepicker._getFormatConfig(c))){a.datepicker._setDateFromField(c);a.datepicker._updateAlternate(c);a.datepicker._updateDatepicker(c)}}catch(f){a.datepicker.log(f)}return true},_showDatepicker:function(c){c=c.target||
c;if(c.nodeName.toLowerCase()!="input")c=a("input",c.parentNode)[0];if(!(a.datepicker._isDisabledDatepicker(c)||a.datepicker._lastInput==c)){var f=a.datepicker._getInst(c);a.datepicker._curInst&&a.datepicker._curInst!=f&&a.datepicker._curInst.dpDiv.stop(true,true);var g=a.datepicker._get(f,"beforeShow");d(f.settings,g?g.apply(c,[c,f]):{});f.lastVal=null;a.datepicker._lastInput=c;a.datepicker._setDateFromField(f);if(a.datepicker._inDialog)c.value="";if(!a.datepicker._pos){a.datepicker._pos=a.datepicker._findPos(c);
a.datepicker._pos[1]+=c.offsetHeight}var h=false;a(c).parents().each(function(){h|=a(this).css("position")=="fixed";return!h});if(h&&a.browser.opera){a.datepicker._pos[0]-=document.documentElement.scrollLeft;a.datepicker._pos[1]-=document.documentElement.scrollTop}g={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;f.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(f);g=a.datepicker._checkOffset(f,g,h);f.dpDiv.css({position:a.datepicker._inDialog&&
a.blockUI?"static":h?"fixed":"absolute",display:"none",left:g.left+"px",top:g.top+"px"});if(!f.inline){g=a.datepicker._get(f,"showAnim");var i=a.datepicker._get(f,"duration"),j=function(){a.datepicker._datepickerShowing=true;var k=a.datepicker._getBorders(f.dpDiv);f.dpDiv.find("iframe.ui-datepicker-cover").css({left:-k[0],top:-k[1],width:f.dpDiv.outerWidth(),height:f.dpDiv.outerHeight()})};f.dpDiv.zIndex(a(c).zIndex()+1);a.effects&&a.effects[g]?f.dpDiv.show(g,a.datepicker._get(f,"showOptions"),i,
j):f.dpDiv[g||"show"](g?i:null,j);if(!g||!i)j();f.input.is(":visible")&&!f.input.is(":disabled")&&f.input.focus();a.datepicker._curInst=f}}},_updateDatepicker:function(c){var f=this,g=a.datepicker._getBorders(c.dpDiv);c.dpDiv.empty().append(this._generateHTML(c)).find("iframe.ui-datepicker-cover").css({left:-g[0],top:-g[1],width:c.dpDiv.outerWidth(),height:c.dpDiv.outerHeight()}).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){a(this).removeClass("ui-state-hover");
this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&a(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){if(!f._isDisabledDatepicker(c.inline?c.dpDiv.parent()[0]:c.input[0])){a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");a(this).addClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).addClass("ui-datepicker-prev-hover");
this.className.indexOf("ui-datepicker-next")!=-1&&a(this).addClass("ui-datepicker-next-hover")}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();g=this._getNumberOfMonths(c);var h=g[1];h>1?c.dpDiv.addClass("ui-datepicker-multi-"+h).css("width",17*h+"em"):c.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");c.dpDiv[(g[0]!=1||g[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");c.dpDiv[(this._get(c,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");
c==a.datepicker._curInst&&a.datepicker._datepickerShowing&&c.input&&c.input.is(":visible")&&!c.input.is(":disabled")&&c.input.focus()},_getBorders:function(c){var f=function(g){return{thin:1,medium:2,thick:3}[g]||g};return[parseFloat(f(c.css("border-left-width"))),parseFloat(f(c.css("border-top-width")))]},_checkOffset:function(c,f,g){var h=c.dpDiv.outerWidth(),i=c.dpDiv.outerHeight(),j=c.input?c.input.outerWidth():0,k=c.input?c.input.outerHeight():0,l=document.documentElement.clientWidth+a(document).scrollLeft(),
m=document.documentElement.clientHeight+a(document).scrollTop();f.left-=this._get(c,"isRTL")?h-j:0;f.left-=g&&f.left==c.input.offset().left?a(document).scrollLeft():0;f.top-=g&&f.top==c.input.offset().top+k?a(document).scrollTop():0;f.left-=Math.min(f.left,f.left+h>l&&l>h?Math.abs(f.left+h-l):0);f.top-=Math.min(f.top,f.top+i>m&&m>i?Math.abs(i+k):0);return f},_findPos:function(c){for(var f=this._get(this._getInst(c),"isRTL");c&&(c.type=="hidden"||c.nodeType!=1);)c=c[f?"previousSibling":"nextSibling"];
c=a(c).offset();return[c.left,c.top]},_hideDatepicker:function(c){var f=this._curInst;if(!(!f||c&&f!=a.data(c,"datepicker")))if(this._datepickerShowing){c=this._get(f,"showAnim");var g=this._get(f,"duration"),h=function(){a.datepicker._tidyDialog(f);this._curInst=null};a.effects&&a.effects[c]?f.dpDiv.hide(c,a.datepicker._get(f,"showOptions"),g,h):f.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?g:null,h);c||h();if(c=this._get(f,"onClose"))c.apply(f.input?f.input[0]:null,[f.input?f.input.val():
"",f]);this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(a.blockUI){a.unblockUI();a("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(c){c.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(c){if(a.datepicker._curInst){c=a(c.target);c[0].id!=a.datepicker._mainDivId&&c.parents("#"+a.datepicker._mainDivId).length==0&&!c.hasClass(a.datepicker.markerClassName)&&
!c.hasClass(a.datepicker._triggerClass)&&a.datepicker._datepickerShowing&&!(a.datepicker._inDialog&&a.blockUI)&&a.datepicker._hideDatepicker()}},_adjustDate:function(c,f,g){c=a(c);var h=this._getInst(c[0]);if(!this._isDisabledDatepicker(c[0])){this._adjustInstDate(h,f+(g=="M"?this._get(h,"showCurrentAtPos"):0),g);this._updateDatepicker(h)}},_gotoToday:function(c){c=a(c);var f=this._getInst(c[0]);if(this._get(f,"gotoCurrent")&&f.currentDay){f.selectedDay=f.currentDay;f.drawMonth=f.selectedMonth=f.currentMonth;
f.drawYear=f.selectedYear=f.currentYear}else{var g=new Date;f.selectedDay=g.getDate();f.drawMonth=f.selectedMonth=g.getMonth();f.drawYear=f.selectedYear=g.getFullYear()}this._notifyChange(f);this._adjustDate(c)},_selectMonthYear:function(c,f,g){c=a(c);var h=this._getInst(c[0]);h._selectingMonthYear=false;h["selected"+(g=="M"?"Month":"Year")]=h["draw"+(g=="M"?"Month":"Year")]=parseInt(f.options[f.selectedIndex].value,10);this._notifyChange(h);this._adjustDate(c)},_clickMonthYear:function(c){c=this._getInst(a(c)[0]);
c.input&&c._selectingMonthYear&&!a.browser.msie&&c.input.focus();c._selectingMonthYear=!c._selectingMonthYear},_selectDay:function(c,f,g,h){var i=a(c);if(!(a(h).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))){i=this._getInst(i[0]);i.selectedDay=i.currentDay=a("a",h).html();i.selectedMonth=i.currentMonth=f;i.selectedYear=i.currentYear=g;this._selectDate(c,this._formatDate(i,i.currentDay,i.currentMonth,i.currentYear))}},_clearDate:function(c){c=a(c);this._getInst(c[0]);this._selectDate(c,
"")},_selectDate:function(c,f){c=this._getInst(a(c)[0]);f=f!=null?f:this._formatDate(c);c.input&&c.input.val(f);this._updateAlternate(c);var g=this._get(c,"onSelect");if(g)g.apply(c.input?c.input[0]:null,[f,c]);else c.input&&c.input.trigger("change");if(c.inline)this._updateDatepicker(c);else{this._hideDatepicker();this._lastInput=c.input[0];typeof c.input[0]!="object"&&c.input.focus();this._lastInput=null}},_updateAlternate:function(c){var f=this._get(c,"altField");if(f){var g=this._get(c,"altFormat")||
this._get(c,"dateFormat"),h=this._getDate(c),i=this.formatDate(g,h,this._getFormatConfig(c));a(f).each(function(){a(this).val(i)})}},noWeekends:function(c){c=c.getDay();return[c>0&&c<6,""]},iso8601Week:function(c){c=new Date(c.getTime());c.setDate(c.getDate()+4-(c.getDay()||7));var f=c.getTime();c.setMonth(0);c.setDate(1);return Math.floor(Math.round((f-c)/864E5)/7)+1},parseDate:function(c,f,g){if(c==null||f==null)throw"Invalid arguments";f=typeof f=="object"?f.toString():f+"";if(f=="")return null;
for(var h=(g?g.shortYearCutoff:null)||this._defaults.shortYearCutoff,i=(g?g.dayNamesShort:null)||this._defaults.dayNamesShort,j=(g?g.dayNames:null)||this._defaults.dayNames,k=(g?g.monthNamesShort:null)||this._defaults.monthNamesShort,l=(g?g.monthNames:null)||this._defaults.monthNames,m=g=-1,p=-1,r=-1,o=false,n=function(v){(v=A+1<c.length&&c.charAt(A+1)==v)&&A++;return v},q=function(v){n(v);v=new RegExp("^\\d{1,"+(v=="@"?14:v=="!"?20:v=="y"?4:v=="o"?3:2)+"}");v=f.substring(w).match(v);if(!v)throw"Missing number at position "+
w;w+=v[0].length;return parseInt(v[0],10)},s=function(v,y,H){v=n(v)?H:y;for(y=0;y<v.length;y++)if(f.substr(w,v[y].length)==v[y]){w+=v[y].length;return y+1}throw"Unknown name at position "+w;},x=function(){if(f.charAt(w)!=c.charAt(A))throw"Unexpected literal at position "+w;w++},w=0,A=0;A<c.length;A++)if(o)if(c.charAt(A)=="'"&&!n("'"))o=false;else x();else switch(c.charAt(A)){case "d":p=q("d");break;case "D":s("D",i,j);break;case "o":r=q("o");break;case "m":m=q("m");break;case "M":m=s("M",k,l);break;
case "y":g=q("y");break;case "@":var u=new Date(q("@"));g=u.getFullYear();m=u.getMonth()+1;p=u.getDate();break;case "!":u=new Date((q("!")-this._ticksTo1970)/1E4);g=u.getFullYear();m=u.getMonth()+1;p=u.getDate();break;case "'":if(n("'"))x();else o=true;break;default:x()}if(g==-1)g=(new Date).getFullYear();else if(g<100)g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(g<=h?0:-100);if(r>-1){m=1;p=r;do{h=this._getDaysInMonth(g,m-1);if(p<=h)break;m++;p-=h}while(1)}u=this._daylightSavingAdjust(new Date(g,
m-1,p));if(u.getFullYear()!=g||u.getMonth()+1!=m||u.getDate()!=p)throw"Invalid date";return u},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1E7,formatDate:function(c,f,g){if(!f)return"";var h=(g?g.dayNamesShort:null)||this._defaults.dayNamesShort,i=(g?
g.dayNames:null)||this._defaults.dayNames,j=(g?g.monthNamesShort:null)||this._defaults.monthNamesShort;g=(g?g.monthNames:null)||this._defaults.monthNames;var k=function(n){(n=o+1<c.length&&c.charAt(o+1)==n)&&o++;return n},l=function(n,q,s){q=""+q;if(k(n))for(;q.length<s;)q="0"+q;return q},m=function(n,q,s,x){return k(n)?x[q]:s[q]},p="",r=false;if(f)for(var o=0;o<c.length;o++)if(r)if(c.charAt(o)=="'"&&!k("'"))r=false;else p+=c.charAt(o);else switch(c.charAt(o)){case "d":p+=l("d",f.getDate(),2);break;
case "D":p+=m("D",f.getDay(),h,i);break;case "o":p+=l("o",(f.getTime()-(new Date(f.getFullYear(),0,0)).getTime())/864E5,3);break;case "m":p+=l("m",f.getMonth()+1,2);break;case "M":p+=m("M",f.getMonth(),j,g);break;case "y":p+=k("y")?f.getFullYear():(f.getYear()%100<10?"0":"")+f.getYear()%100;break;case "@":p+=f.getTime();break;case "!":p+=f.getTime()*1E4+this._ticksTo1970;break;case "'":if(k("'"))p+="'";else r=true;break;default:p+=c.charAt(o)}return p},_possibleChars:function(c){for(var f="",g=false,
h=function(j){(j=i+1<c.length&&c.charAt(i+1)==j)&&i++;return j},i=0;i<c.length;i++)if(g)if(c.charAt(i)=="'"&&!h("'"))g=false;else f+=c.charAt(i);else switch(c.charAt(i)){case "d":case "m":case "y":case "@":f+="0123456789";break;case "D":case "M":return null;case "'":if(h("'"))f+="'";else g=true;break;default:f+=c.charAt(i)}return f},_get:function(c,f){return c.settings[f]!==undefined?c.settings[f]:this._defaults[f]},_setDateFromField:function(c,f){if(c.input.val()!=c.lastVal){var g=this._get(c,"dateFormat"),
h=c.lastVal=c.input?c.input.val():null,i,j;i=j=this._getDefaultDate(c);var k=this._getFormatConfig(c);try{i=this.parseDate(g,h,k)||j}catch(l){this.log(l);h=f?"":h}c.selectedDay=i.getDate();c.drawMonth=c.selectedMonth=i.getMonth();c.drawYear=c.selectedYear=i.getFullYear();c.currentDay=h?i.getDate():0;c.currentMonth=h?i.getMonth():0;c.currentYear=h?i.getFullYear():0;this._adjustInstDate(c)}},_getDefaultDate:function(c){return this._restrictMinMax(c,this._determineDate(c,this._get(c,"defaultDate"),new Date))},
_determineDate:function(c,f,g){var h=function(j){var k=new Date;k.setDate(k.getDate()+j);return k},i=function(j){try{return a.datepicker.parseDate(a.datepicker._get(c,"dateFormat"),j,a.datepicker._getFormatConfig(c))}catch(k){}var l=(j.toLowerCase().match(/^c/)?a.datepicker._getDate(c):null)||new Date,m=l.getFullYear(),p=l.getMonth();l=l.getDate();for(var r=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,o=r.exec(j);o;){switch(o[2]||"d"){case "d":case "D":l+=parseInt(o[1],10);break;case "w":case "W":l+=parseInt(o[1],
10)*7;break;case "m":case "M":p+=parseInt(o[1],10);l=Math.min(l,a.datepicker._getDaysInMonth(m,p));break;case "y":case "Y":m+=parseInt(o[1],10);l=Math.min(l,a.datepicker._getDaysInMonth(m,p));break}o=r.exec(j)}return new Date(m,p,l)};if(f=(f=f==null?g:typeof f=="string"?i(f):typeof f=="number"?isNaN(f)?g:h(f):f)&&f.toString()=="Invalid Date"?g:f){f.setHours(0);f.setMinutes(0);f.setSeconds(0);f.setMilliseconds(0)}return this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(c){if(!c)return null;
c.setHours(c.getHours()>12?c.getHours()+2:0);return c},_setDate:function(c,f,g){var h=!f,i=c.selectedMonth,j=c.selectedYear;f=this._restrictMinMax(c,this._determineDate(c,f,new Date));c.selectedDay=c.currentDay=f.getDate();c.drawMonth=c.selectedMonth=c.currentMonth=f.getMonth();c.drawYear=c.selectedYear=c.currentYear=f.getFullYear();if((i!=c.selectedMonth||j!=c.selectedYear)&&!g)this._notifyChange(c);this._adjustInstDate(c);if(c.input)c.input.val(h?"":this._formatDate(c))},_getDate:function(c){return!c.currentYear||
c.input&&c.input.val()==""?null:this._daylightSavingAdjust(new Date(c.currentYear,c.currentMonth,c.currentDay))},_generateHTML:function(c){var f=new Date;f=this._daylightSavingAdjust(new Date(f.getFullYear(),f.getMonth(),f.getDate()));var g=this._get(c,"isRTL"),h=this._get(c,"showButtonPanel"),i=this._get(c,"hideIfNoPrevNext"),j=this._get(c,"navigationAsDateFormat"),k=this._getNumberOfMonths(c),l=this._get(c,"showCurrentAtPos"),m=this._get(c,"stepMonths"),p=k[0]!=1||k[1]!=1,r=this._daylightSavingAdjust(!c.currentDay?
new Date(9999,9,9):new Date(c.currentYear,c.currentMonth,c.currentDay)),o=this._getMinMaxDate(c,"min"),n=this._getMinMaxDate(c,"max");l=c.drawMonth-l;var q=c.drawYear;if(l<0){l+=12;q--}if(n){var s=this._daylightSavingAdjust(new Date(n.getFullYear(),n.getMonth()-k[0]*k[1]+1,n.getDate()));for(s=o&&s<o?o:s;this._daylightSavingAdjust(new Date(q,l,1))>s;){l--;if(l<0){l=11;q--}}}c.drawMonth=l;c.drawYear=q;s=this._get(c,"prevText");s=!j?s:this.formatDate(s,this._daylightSavingAdjust(new Date(q,l-m,1)),this._getFormatConfig(c));
s=this._canAdjustMonth(c,-1,q,l)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+e+".datepicker._adjustDate('#"+c.id+"', -"+m+", 'M');\" title=\""+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(g?"e":"w")+'">'+s+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(g?"e":"w")+'">'+s+"</span></a>";var x=this._get(c,"nextText");x=!j?x:this.formatDate(x,this._daylightSavingAdjust(new Date(q,
l+m,1)),this._getFormatConfig(c));i=this._canAdjustMonth(c,+1,q,l)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+e+".datepicker._adjustDate('#"+c.id+"', +"+m+", 'M');\" title=\""+x+'"><span class="ui-icon ui-icon-circle-triangle-'+(g?"w":"e")+'">'+x+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+x+'"><span class="ui-icon ui-icon-circle-triangle-'+(g?"w":"e")+'">'+x+"</span></a>";m=this._get(c,"currentText");x=this._get(c,"gotoCurrent")&&
c.currentDay?r:f;m=!j?m:this.formatDate(m,x,this._getFormatConfig(c));j=!c.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+e+'.datepicker._hideDatepicker();">'+this._get(c,"closeText")+"</button>":"";h=h?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(g?j:"")+(this._isInRange(c,x)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+
e+".datepicker._gotoToday('#"+c.id+"');\">"+m+"</button>":"")+(g?"":j)+"</div>":"";j=parseInt(this._get(c,"firstDay"),10);j=isNaN(j)?0:j;m=this._get(c,"showWeek");x=this._get(c,"dayNames");this._get(c,"dayNamesShort");var w=this._get(c,"dayNamesMin"),A=this._get(c,"monthNames"),u=this._get(c,"monthNamesShort"),v=this._get(c,"beforeShowDay"),y=this._get(c,"showOtherMonths"),H=this._get(c,"selectOtherMonths");this._get(c,"calculateWeek");for(var E=this._getDefaultDate(c),C="",I=0;I<k[0];I++){for(var M=
"",J=0;J<k[1];J++){var N=this._daylightSavingAdjust(new Date(q,l,c.selectedDay)),B=" ui-corner-all",D="";if(p){D+='<div class="ui-datepicker-group';if(k[1]>1)switch(J){case 0:D+=" ui-datepicker-group-first";B=" ui-corner-"+(g?"right":"left");break;case k[1]-1:D+=" ui-datepicker-group-last";B=" ui-corner-"+(g?"left":"right");break;default:D+=" ui-datepicker-group-middle";B="";break}D+='">'}D+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+B+'">'+(/all|left/.test(B)&&I==0?g?
i:s:"")+(/all|right/.test(B)&&I==0?g?s:i:"")+this._generateMonthYearHeader(c,l,q,o,n,I>0||J>0,A,u)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var F=m?'<th class="ui-datepicker-week-col">'+this._get(c,"weekHeader")+"</th>":"";for(B=0;B<7;B++){var z=(B+j)%7;F+="<th"+((B+j+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+x[z]+'">'+w[z]+"</span></th>"}D+=F+"</tr></thead><tbody>";F=this._getDaysInMonth(q,l);if(q==c.selectedYear&&l==c.selectedMonth)c.selectedDay=Math.min(c.selectedDay,
F);B=(this._getFirstDayOfMonth(q,l)-j+7)%7;F=p?6:Math.ceil((B+F)/7);z=this._daylightSavingAdjust(new Date(q,l,1-B));for(var O=0;O<F;O++){D+="<tr>";var P=!m?"":'<td class="ui-datepicker-week-col">'+this._get(c,"calculateWeek")(z)+"</td>";for(B=0;B<7;B++){var K=v?v.apply(c.input?c.input[0]:null,[z]):[true,""],G=z.getMonth()!=l,L=G&&!H||!K[0]||o&&z<o||n&&z>n;P+='<td class="'+((B+j+6)%7>=5?" ui-datepicker-week-end":"")+(G?" ui-datepicker-other-month":"")+(z.getTime()==N.getTime()&&l==c.selectedMonth&&
c._keyEvent||E.getTime()==z.getTime()&&E.getTime()==N.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(G&&!y?"":" "+K[1]+(z.getTime()==r.getTime()?" "+this._currentClass:"")+(z.getTime()==f.getTime()?" ui-datepicker-today":""))+'"'+((!G||y)&&K[2]?' title="'+K[2]+'"':"")+(L?"":' onclick="DP_jQuery_'+e+".datepicker._selectDay('#"+c.id+"',"+z.getMonth()+","+z.getFullYear()+', this);return false;"')+">"+(G&&!y?"&#xa0;":L?'<span class="ui-state-default">'+z.getDate()+
"</span>":'<a class="ui-state-default'+(z.getTime()==f.getTime()?" ui-state-highlight":"")+(z.getTime()==r.getTime()?" ui-state-active":"")+(G?" ui-priority-secondary":"")+'" href="#">'+z.getDate()+"</a>")+"</td>";z.setDate(z.getDate()+1);z=this._daylightSavingAdjust(z)}D+=P+"</tr>"}l++;if(l>11){l=0;q++}D+="</tbody></table>"+(p?"</div>"+(k[0]>0&&J==k[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");M+=D}C+=M}C+=h+(a.browser.msie&&parseInt(a.browser.version,10)<7&&!c.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':
"");c._keyEvent=false;return C},_generateMonthYearHeader:function(c,f,g,h,i,j,k,l){var m=this._get(c,"changeMonth"),p=this._get(c,"changeYear"),r=this._get(c,"showMonthAfterYear"),o='<div class="ui-datepicker-title">',n="";if(j||!m)n+='<span class="ui-datepicker-month">'+k[f]+"</span>";else{k=h&&h.getFullYear()==g;var q=i&&i.getFullYear()==g;n+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+e+".datepicker._selectMonthYear('#"+c.id+"', this, 'M');\" onclick=\"DP_jQuery_"+e+".datepicker._clickMonthYear('#"+
c.id+"');\">";for(var s=0;s<12;s++)if((!k||s>=h.getMonth())&&(!q||s<=i.getMonth()))n+='<option value="'+s+'"'+(s==f?' selected="selected"':"")+">"+l[s]+"</option>";n+="</select>"}r||(o+=n+(j||!(m&&p)?"&#xa0;":""));if(j||!p)o+='<span class="ui-datepicker-year">'+g+"</span>";else{l=this._get(c,"yearRange").split(":");var x=(new Date).getFullYear();k=function(w){w=w.match(/c[+-].*/)?g+parseInt(w.substring(1),10):w.match(/[+-].*/)?x+parseInt(w,10):parseInt(w,10);return isNaN(w)?x:w};f=k(l[0]);l=Math.max(f,
k(l[1]||""));f=h?Math.max(f,h.getFullYear()):f;l=i?Math.min(l,i.getFullYear()):l;for(o+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+e+".datepicker._selectMonthYear('#"+c.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+e+".datepicker._clickMonthYear('#"+c.id+"');\">";f<=l;f++)o+='<option value="'+f+'"'+(f==g?' selected="selected"':"")+">"+f+"</option>";o+="</select>"}o+=this._get(c,"yearSuffix");if(r)o+=(j||!(m&&p)?"&#xa0;":"")+n;o+="</div>";return o},_adjustInstDate:function(c,f,g){var h=
c.drawYear+(g=="Y"?f:0),i=c.drawMonth+(g=="M"?f:0);f=Math.min(c.selectedDay,this._getDaysInMonth(h,i))+(g=="D"?f:0);h=this._restrictMinMax(c,this._daylightSavingAdjust(new Date(h,i,f)));c.selectedDay=h.getDate();c.drawMonth=c.selectedMonth=h.getMonth();c.drawYear=c.selectedYear=h.getFullYear();if(g=="M"||g=="Y")this._notifyChange(c)},_restrictMinMax:function(c,f){var g=this._getMinMaxDate(c,"min");c=this._getMinMaxDate(c,"max");f=g&&f<g?g:f;return f=c&&f>c?c:f},_notifyChange:function(c){var f=this._get(c,
"onChangeMonthYear");if(f)f.apply(c.input?c.input[0]:null,[c.selectedYear,c.selectedMonth+1,c])},_getNumberOfMonths:function(c){c=this._get(c,"numberOfMonths");return c==null?[1,1]:typeof c=="number"?[1,c]:c},_getMinMaxDate:function(c,f){return this._determineDate(c,this._get(c,f+"Date"),null)},_getDaysInMonth:function(c,f){return 32-(new Date(c,f,32)).getDate()},_getFirstDayOfMonth:function(c,f){return(new Date(c,f,1)).getDay()},_canAdjustMonth:function(c,f,g,h){var i=this._getNumberOfMonths(c);
g=this._daylightSavingAdjust(new Date(g,h+(f<0?f:i[0]*i[1]),1));f<0&&g.setDate(this._getDaysInMonth(g.getFullYear(),g.getMonth()));return this._isInRange(c,g)},_isInRange:function(c,f){var g=this._getMinMaxDate(c,"min");c=this._getMinMaxDate(c,"max");return(!g||f.getTime()>=g.getTime())&&(!c||f.getTime()<=c.getTime())},_getFormatConfig:function(c){var f=this._get(c,"shortYearCutoff");f=typeof f!="string"?f:(new Date).getFullYear()%100+parseInt(f,10);return{shortYearCutoff:f,dayNamesShort:this._get(c,
"dayNamesShort"),dayNames:this._get(c,"dayNames"),monthNamesShort:this._get(c,"monthNamesShort"),monthNames:this._get(c,"monthNames")}},_formatDate:function(c,f,g,h){if(!f){c.currentDay=c.selectedDay;c.currentMonth=c.selectedMonth;c.currentYear=c.selectedYear}f=f?typeof f=="object"?f:this._daylightSavingAdjust(new Date(h,g,f)):this._daylightSavingAdjust(new Date(c.currentYear,c.currentMonth,c.currentDay));return this.formatDate(this._get(c,"dateFormat"),f,this._getFormatConfig(c))}});a.fn.datepicker=
function(c){if(!a.datepicker.initialized){a(document).mousedown(a.datepicker._checkExternalClick).find("body").append(a.datepicker.dpDiv);a.datepicker.initialized=true}var f=Array.prototype.slice.call(arguments,1);if(typeof c=="string"&&(c=="isDisabled"||c=="getDate"||c=="widget"))return a.datepicker["_"+c+"Datepicker"].apply(a.datepicker,[this[0]].concat(f));if(c=="option"&&arguments.length==2&&typeof arguments[1]=="string")return a.datepicker["_"+c+"Datepicker"].apply(a.datepicker,[this[0]].concat(f));
return this.each(function(){typeof c=="string"?a.datepicker["_"+c+"Datepicker"].apply(a.datepicker,[this].concat(f)):a.datepicker._attachDatepicker(this,c)})};a.datepicker=new b;a.datepicker.initialized=false;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.8";window["DP_jQuery_"+e]=a})(jQuery);somens={};somens.foo=function(a,b){alert("The day you picked is: "+b.selectedDay)};
(function(a){a.widget("ui.ncbidatepicker",{_create:function(){var b=["beforeShow","beforeShowDay","onChangeMonthYear","onClose","onSelect"],d=this.options;for(var e in d)if(a.inArray(e,b)!==-1)this.options[e]=a.ui.jig._getFncFromStr(this.options[e],this);this.element.datepicker(this.options)},show:function(){for(var b=[],d=0;d<arguments.length;d++)b.push(arguments[d]);return this.element.datepicker.apply(this.element,["show"].concat(b))},hide:function(){for(var b=[],d=0;d<arguments.length;d++)b.push(arguments[d]);
return this.element.datepicker.apply(this.element,["hide"].concat(b))},destroy:function(){this.element.datepicker("destroy")},disable:function(){this.element.datepicker("disable")},enable:function(){this.element.datepicker("enable")},option:function(){for(var b=[],d=0;d<arguments.length;d++)b.push(arguments[d]);return this.element.datepicker.apply(this.element,["option"].concat(b))},dialog:function(){for(var b=[],d=0;d<arguments.length;d++)b.push(arguments[d]);return this.element.datepicker.apply(this.element,
["dialog"].concat(b))},isDisabled:function(){return this.element.datepicker("isDisabled")},getDate:function(){return this.element.datepicker("getDate")},setDate:function(){for(var b=[],d=0;d<arguments.length;d++)b.push(arguments[d]);return this.element.datepicker.apply(this.element,["setDate"].concat(b))},ncbionclose:function(b){this.options.ncbionclose=b},_onClose:function(b,d){var e=this._getOption("ncbionclose");e&&e(b,d);this.element.trigger("ncbionclose",{dateText:b,inst:d})},ncbionselect:function(b){this.options.ncbionselect=
b},_onSelect:function(b,d){var e=this._getData("ncbionselect");e&&e(b,d);this.element.trigger("ncbionselect",{dateText:b,inst:d})}})})(jQuery);
(function(a){a.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:"center",resizable:true,show:null,stack:true,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");var b=this,d=b.options,e=d.title||b.originalTitle||"&#160;",c=a.ui.dialog.getTitleId(b.element),f=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(i){if(d.closeOnEscape&&i.keyCode&&i.keyCode===a.ui.keyCode.ESCAPE){b.close(i);i.preventDefault()}}).attr({role:"dialog","aria-labelledby":c}).mousedown(function(i){b.moveToTop(false,i)});b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(f);var g=(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(f),
h=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){h.addClass("ui-state-hover")},function(){h.removeClass("ui-state-hover")}).focus(function(){h.addClass("ui-state-focus")}).blur(function(){h.removeClass("ui-state-focus")}).click(function(i){b.close(i);return false}).appendTo(g);(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(h);a("<span></span>").addClass("ui-dialog-title").attr("id",
c).html(e).prependTo(g);if(a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose))d.beforeClose=d.beforeclose;g.find("*").add(g).disableSelection();d.draggable&&a.fn.draggable&&b._makeDraggable();d.resizable&&a.fn.resizable&&b._makeResizable();b._createButtons(d.buttons);b._isOpen=false;a.fn.bgiframe&&f.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");
this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);return this},widget:function(){return this.uiDialog},close:function(b){var d=this,e;if(false!==d._trigger("beforeClose",b)){d.overlay&&d.overlay.destroy();d.uiDialog.unbind("keypress.ui-dialog");d._isOpen=false;if(d.options.hide)d.uiDialog.hide(d.options.hide,function(){d._trigger("close",b)});else{d.uiDialog.hide();d._trigger("close",b)}a.ui.dialog.overlay.resize();if(d.options.modal){e=0;a(".ui-dialog").each(function(){if(this!==
d.uiDialog[0])e=Math.max(e,a(this).css("z-index"))});a.ui.dialog.maxZ=e}return d}},isOpen:function(){return this._isOpen},moveToTop:function(b,d){var e=this.options;if(e.modal&&!b||!e.stack&&!e.modal)return this._trigger("focus",d);if(e.zIndex>a.ui.dialog.maxZ)a.ui.dialog.maxZ=e.zIndex;if(this.overlay){a.ui.dialog.maxZ+=1;this.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)}b={scrollTop:this.element.attr("scrollTop"),scrollLeft:this.element.attr("scrollLeft")};a.ui.dialog.maxZ+=
1;this.uiDialog.css("z-index",a.ui.dialog.maxZ);this.element.attr(b);this._trigger("focus",d);return this},open:function(){if(!this._isOpen){var b=this.options,d=this.uiDialog;this.overlay=b.modal?new a.ui.dialog.overlay(this):null;d.next().length&&d.appendTo("body");this._size();this._position(b.position);d.show(b.show);this.moveToTop(true);b.modal&&d.bind("keypress.ui-dialog",function(e){if(e.keyCode===a.ui.keyCode.TAB){var c=a(":tabbable",this),f=c.filter(":first");c=c.filter(":last");if(e.target===
c[0]&&!e.shiftKey){f.focus(1);return false}else if(e.target===f[0]&&e.shiftKey){c.focus(1);return false}}});a([]).add(d.find(".ui-dialog-content :tabbable:first")).add(d.find(".ui-dialog-buttonpane :tabbable:first")).add(d).filter(":first").focus();this._trigger("open");this._isOpen=true;return this}},_createButtons:function(b){var d=this,e=false,c=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");d.uiDialog.find(".ui-dialog-buttonpane").remove();typeof b==="object"&&
b!==null&&a.each(b,function(){return!(e=true)});if(e){a.each(b,function(f,g){f=a('<button type="button"></button>').text(f).click(function(){g.apply(d.element[0],arguments)}).appendTo(c);a.fn.button&&f.button()});c.appendTo(d.uiDialog)}},_makeDraggable:function(){function b(g){return{position:g.position,offset:g.offset}}var d=this,e=d.options,c=a(document),f;d.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(g,
h){f=e.height==="auto"?"auto":a(this).height();a(this).height(a(this).height()).addClass("ui-dialog-dragging");d._trigger("dragStart",g,b(h))},drag:function(g,h){d._trigger("drag",g,b(h))},stop:function(g,h){e.position=[h.position.left-c.scrollLeft(),h.position.top-c.scrollTop()];a(this).removeClass("ui-dialog-dragging").height(f);d._trigger("dragStop",g,b(h));a.ui.dialog.overlay.resize()}})},_makeResizable:function(b){function d(g){return{originalPosition:g.originalPosition,originalSize:g.originalSize,
position:g.position,size:g.size}}b=b===undefined?this.options.resizable:b;var e=this,c=e.options,f=e.uiDialog.css("position");b=typeof b==="string"?b:"n,e,s,w,se,sw,ne,nw";e.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:e.element,maxWidth:c.maxWidth,maxHeight:c.maxHeight,minWidth:c.minWidth,minHeight:e._minHeight(),handles:b,start:function(g,h){a(this).addClass("ui-dialog-resizing");e._trigger("resizeStart",g,d(h))},resize:function(g,h){e._trigger("resize",g,d(h))},
stop:function(g,h){a(this).removeClass("ui-dialog-resizing");c.height=a(this).height();c.width=a(this).width();e._trigger("resizeStop",g,d(h));a.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var b=this.options;return b.height==="auto"?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(b){var d=[],e=[0,0];b=b||a.ui.dialog.prototype.options.position;if(typeof b==="string"||typeof b==="object"&&
"0"in b){d=b.split?b.split(" "):[b[0],b[1]];if(d.length===1)d[1]=d[0];a.each(["left","top"],function(c,f){if(+d[c]===d[c]){e[c]=d[c];d[c]=f}})}else if(typeof b==="object"){if("left"in b){d[0]="left";e[0]=b.left}else if("right"in b){d[0]="right";e[0]=-b.right}if("top"in b){d[1]="top";e[1]=b.top}else if("bottom"in b){d[1]="bottom";e[1]=-b.bottom}}(b=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position({my:d.join(" "),at:d.join(" "),offset:e.join(" "),of:window,
collision:"fit",using:function(c){var f=a(this).css(c).offset().top;f<0&&a(this).css("top",c.top-f)}});b||this.uiDialog.hide()},_setOption:function(b,d){var e=this.uiDialog,c=e.is(":data(resizable)"),f=false;switch(b){case "beforeclose":b="beforeClose";break;case "buttons":this._createButtons(d);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+d);break;case "dialogClass":e.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+d);break;case "disabled":d?
e.addClass("ui-dialog-disabled"):e.removeClass("ui-dialog-disabled");break;case "draggable":d?this._makeDraggable():e.draggable("destroy");break;case "height":f=true;break;case "maxHeight":c&&e.resizable("option","maxHeight",d);f=true;break;case "maxWidth":c&&e.resizable("option","maxWidth",d);f=true;break;case "minHeight":c&&e.resizable("option","minHeight",d);f=true;break;case "minWidth":c&&e.resizable("option","minWidth",d);f=true;break;case "position":this._position(d);break;case "resizable":c&&
!d&&e.resizable("destroy");c&&typeof d==="string"&&e.resizable("option","handles",d);!c&&d!==false&&this._makeResizable(d);break;case "title":a(".ui-dialog-title",this.uiDialogTitlebar).html(""+(d||"&#160;"));break;case "width":f=true;break}a.Widget.prototype._setOption.apply(this,arguments);f&&this._size()},_size:function(){var b=this.options,d;this.element.css("width","auto").hide();d=this.uiDialog.css({height:"auto",width:b.width}).height();this.element.css(b.height==="auto"?{minHeight:Math.max(b.minHeight-
d,0),height:"auto"}:{minHeight:0,height:Math.max(b.height-d,0)}).show();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{version:"1.8",uuid:0,maxZ:0,getTitleId:function(b){b=b.attr("id");if(!b){this.uuid+=1;b=this.uuid}return"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),
function(b){return b+".dialog-overlay"}).join(" "),create:function(b){if(this.instances.length===0){setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(e){return a(e.target).zIndex()>=a.ui.dialog.overlay.maxZ})},1);a(document).bind("keydown.dialog-overlay",function(e){if(b.options.closeOnEscape&&e.keyCode&&e.keyCode===a.ui.keyCode.ESCAPE){b.close(e);e.preventDefault()}});a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize)}var d=
(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});a.fn.bgiframe&&d.bgiframe();this.instances.push(d);return d},destroy:function(b){this.oldInstances.push(this.instances.splice(a.inArray(b,this.instances),1)[0]);this.instances.length===0&&a([document,window]).unbind(".dialog-overlay");b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))});this.maxZ=d},height:function(){var b,
d;if(a.browser.msie&&a.browser.version<7){b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);d=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return b<d?a(window).height()+"px":b+"px"}else return a(document).height()+"px"},width:function(){var b,d;if(a.browser.msie&&a.browser.version<7){b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);d=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return b<
d?a(window).width()+"px":b+"px"}else return a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)});b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
(function(a){a.widget("ui.ncbidialog",a.ui.dialog,{options:{autoOpen:false,draggable:false,isTitleVisible:true,open:null,openEvent:"click",resizable:false,destSelector:null},_create:function(){this._triggerNode=this.element;this._ajaxable=this._ajaxable(this._triggerNode);var b=this.getDialogNode();this.element=b;if(b.length===0)a.ui.jig._isConsole("error")&&console.error('ncbidialog: No matching dialog node found with selector "'+destSelector+'".');else{this._parseCallbacks();this._overrideEvents();
b.dialog(this.options);this.options.isTitleVisible||b.prev(".ui-dialog-titlebar").addClass("ui-helper-hidden-accessible").css("position","absolute");this._renderButtonMarkup();var d=this;this._triggerNode[this.options.openEvent](function(e){e.preventDefault();a(e.target);d._ajaxable&&d._getContent();d.element.dialog("open")})}},_overrideEvents:function(){for(var b=this,d=this._triggerNode,e=["dialogopen","dialogbeforeclose","dialogfocus","dialogdragstart","dialogdrag","dialogdragstop","dialogresizestart",
"dialogresize","dialogresizestop","dialogclose"],c=0;c<e.length;c++)(function(f){b.element.bind(f,function(){d.trigger("ncbi"+f)})})(e[c])},_parseCallbacks:function(){for(var b=["open","beforeClose","focus","dragStart","drag","dragStop","resizeStart","resize","resizeStop","close"],d=a.ui.jig._getFncFromStr,e=0;e<b.length;e++){var c=b[e],f=this.options[c];if(f){f=d(f);this.options[c]=f}}},getDialogNode:function(){if(typeof this._dialogNode==="undefined"){var b=this._triggerNode.attr("href");this._dialogNode=
b&&b!==""&&!this._ajaxable?a(a.trim(b)):a(this.options.destSelector)}return this._dialogNode},_renderButtonMarkup:function(){this._jigButtons=this.element.find("button,input[type=submit]").addClass("ui-state-default ui-corner-all");if(this._jigButtons.length!==0){this._jigButtons.wrapAll('<div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"></div>');this._doButtonHover()}},_doButtonHover:function(){this._jigButtons.hover(function(){var b=a(this);b.hasClass("ui-state-hover")?b.removeClass("ui-state-hover"):
b.addClass("ui-state-hover")})},_ajaxable:function(b){this._href=a.trim(b.attr("href"));return this._href.charAt(0)!=="#"&&this._href!==""?true:false},close:function(){return this.element.dialog.apply(this.element,["close"])},open:function(){return this.element.dialog.apply(this.element,["open"])},isOpen:function(){return this.element.dialog.apply(this.element,["isOpen"])},widget:function(){return this.element.dialog.apply(this.element,["widget"])},moveToTop:function(){this.getDialogNode().dialog("moveToTop")},
option:function(){for(var b=["option"],d=0;d<arguments.length;d++)b.push(arguments[d]);return this.element.dialog.apply(this.element,b)},enable:function(){return this.element.dialog.apply(this.element,["enable"])},disable:function(){return this.element.dialog.apply(this.element,["disable"])},destroy:function(){return this.element.dialog.apply(this.element,["destroy"])},_getContent:function(){this.element.load(this._href)}})})(jQuery);
