<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
  <title> asntrans.cpp </title>
</head>
<body BGCOLOR="#FFFFFF">

<pre><font color = "red">
// File name: asntrans.cpp
// Description: Reads a binary ASN.1 Biostruc file into memory
//		and saves it in text format.
<font color = "green">
#include &lt;corelib/ncbistd.hpp&gt;
#include &lt;serial/serial.hpp&gt;		
#include &lt;serial/objistrasnb.hpp&gt;	
#include &lt;serial/objostrasn.hpp&gt;
#include &lt;objects/mmdb1/Biostruc.hpp&gt;
#include <a href="asntrans_hpp.html"> "asntrans.hpp" </a>

<font color = "blue">
BEGIN_NCBI_SCOPE
<font color = "black">
int CTestAsn::Run() {

<font color = "red">    // initialize the binary input stream <font color = "black">

    auto_ptr&lt;CNcbiIstream&gt; inStream =
        new CNcbiIfstream("1001.val", IOS_BASE::in | IOS_BASE::binary);

    if ( !*inStream )
      ERR_POST(Fatal << "Cannot open input file");

<font color = "red">    // initialize the text output stream <font color = "black">

    auto_ptr&lt;CNcbiOstream&gt; outStream =
        new CNcbiOfstream("1001.txt");

    if ( !*outStream )
      ERR_POST(Fatal << "Cannot open output file");

<font color = "red">    // Associate ASN.1 binary serialization methods with the input <font color = "black">

    auto_ptr&lt;CObjectIStream&gt; inObject=
        new CObjectIStreamAsnBinary(*inStream);

<font color = "red">    // Associate ASN.1 text serialization methods with the output <font color = "black">

    auto_ptr&lt;CObjectOStream&gt; outObject =
        new CObjectOStreamAsn(*outStream);

<font color = "red">    // Provide explicit object type information <font color = "black">

    CBiostruc bs;
    *inObject >> bs;
    *outObject << bs;

    return 0;
}
<font color = "blue">
END_NCBI_SCOPE

USING_NCBI_SCOPE;
<font color = "black">
int main(int argc, const char* argv[]) 
{
<font color = "red">    // initialize the diagnostic stream <font color = "black">

    CNcbiOfstream diag("asntrans.log");
    SetDiagStream(&diag);

    CTestAsn theTestApp;
    return theTestApp.AppMain(argc, argv);
}
</pre>
</body>
</html>