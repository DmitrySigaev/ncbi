<!-- $Id$ -->
<!--#set var="TITLE" value="NCBI C++ Toolkit:  Tests" -->
<!--#set var="HEADING" value="Tests" -->
<!--#set var="DOCROOT" value="." -->
<!--#include virtual="./ssi/header.shtml" -->

<!--  Page Contents -->

<!--  This is the original docs 'Tests and Support' page, support.html; need major reworking -->

<a NAME="ref_Tests"></a>

<ul>
<li>
<a href="#BuildDir">Build directory</a></li>

<li>
<a href="#UpdateASN">Updating ASN.1 modules from C Toolkit</a></li>

<li>
<a href="#RegenerateObjects">Regenerating C++ objects from ASN.1 modules</a></li>

<li>
<a href="#UpdateObjects">Updating C++ objects sources</a></li>

<li>
<a href="#CommitingObjects">Commiting changed C++ objects sources</a></li>

<li>
<a href="#BuildDatatool">Building datatool program</a></li>

<li>
<a href="#BuildCorelib">Building relevant libraries</a></li>

<li>
<a href="#TestDatatool">Testing datatool</a></li>

<li>
<a href="#TestAsn2asn">Testing asn2asn</a></li>
</ul>

<hr>

<h1>
<a NAME="BuildDir"></a>Build directory</h1>
Build directory is the place where platform/configuration dependent files
(including built libs and programs) are stored.
<br>It is placed in C++ directory tree and looks like:
<p>&nbsp;&nbsp;&nbsp; <i>WorkShop6-Debug</i>
<p>or
<p>&nbsp;&nbsp;&nbsp; <i>GCC-Release</i>
<p>etc.
<p>When we mention build directory here, it means subdirectory <i>build
</i>in the above directory.
<h1>
<a NAME="UpdateASN"></a>Updating ASN.1 modules from C Toolkit</h1>
In the updated C++ directory tree:
<ul>
<li>
<i>cd src/objects</i></li>

<li>
<i>./update_asn.sh</i></li>
</ul>
The script will report either
<p><i>&nbsp;&nbsp;&nbsp; ASN.1 modules were unchanged</i><i></i>
<p>or
<p><i>&nbsp;&nbsp;&nbsp; ASN.1 modules were updated, run 'cvs update'</i><i></i>
<p>In latter case you should run:
<ul>
<li>
<i>cvs update</i></li>
</ul>
and C++ ASN.1 module files will be copied from C Toolkit.
<br>Now you should <a href="#RegenerateObjects">regenerate C++ objects</a>.
<br>&nbsp;
<h2>
<a NAME="RegenerateObjects"></a>Regenerating C++ objects from ASN.1 modules</h2>
You should have built <a href="#BuildDatatool">datatool</a> in your build
directory.
<br>In the <a href="#BuildDir">build directory</a>:
<ul>
<li>
<i>cd objects</i></li>

<li>
<i>make all_r</i></li>
</ul>
This command will run datatool for every ASN.1 module and then rebuild
objects libraries.
<br>It will also build asn2asn - test program.
<h2>
<a NAME="UpdateObjects"></a>Updating C++ objects sources</h2>
Sometimes you can find errors from CVS&nbsp;while updating objects sources
e.g.:
<p><i>&nbsp;&nbsp;&nbsp; cvs: move away Object_id.cpp; it is in the way</i>
<p>This usually means that this file was added by somone else while you
have this file generated by datatool. If you didn't modify the file (make
sure), you can simply remove it and run update again. CVS will get new
copy of file from repository.
<br>If it happens that you also made some changes to this file, you have
to add your changes again:
<br>make backup copy your file, remove it, run update again, then make
the same modifications to new file as you did before.
<h2>
<a NAME="CommitingObjects"></a>Commiting changed C++ objects sources</h2>
If you have modified some of wrapper classes for objects, you might need
to save your changes in CVS repository. Your modified files possibly was
not added to CVS yet. This can be checked by running '<i>cvs commit</i>'
command for every file you've modified. If file was not added to repository
yet, you'll get error message:
<p>&nbsp;&nbsp;&nbsp; <i>cvs commit: nothing known about `Date.cpp'</i><i></i>
<p>In this case you should run '<i>cvs add yourfile</i>'&nbsp; and commit
it again.
<h2>
<a NAME="BuildDatatool"></a>Building datatool program</h2>
You should have built <a href="#BuildCorelib">corelib</a> in your build
directory.
<br>In the <a href="#BuildDir">build directory</a>:
<ul>
<li>
<i>cd serial</i></li>

<li>
<i>make all_r</i></li>
</ul>
This will build serial library and datatool program.
<h2>
<a NAME="BuildCorelib"></a>Building relevant libraries</h2>
In the <a href="#BuildDir">build directory</a>:
<ul>
<li>
<i>cd corelib</i></li>

<li>
<i>make all</i></li>
</ul>
In the <a href="#BuildDir">build directory</a>:
<ul>
<li>
<i>cd util</i></li>

<li>
<i>make all</i></li>
</ul>

<h2>
<a NAME="TestDatatool"></a>Testing datatool program</h2>
After <a href="#BuildDatatool">building datatool</a> you can test its proper
operation by special script.
<br>From the <a href="#BuildDir">build directory</a>:
<ul>
<li>
<i>cd serial/datatool</i></li>

<li>
<i>./datatool.sh</i></li>
</ul>
If everything was fine this script will print at the end:
<p>&nbsp;&nbsp;&nbsp; <i>Done!</i>
<h2>
<a NAME="TestAsn2asn"></a>Testing asn2asn program</h2>
After building objects you can test its proper operation by special script.
<br>From the <a href="#BuildDir">build directory</a>:
<ul>
<li>
<i>cd objects/asn2asn</i></li>

<li>
<i>./asn2asn.sh</i></li>
</ul>
If everything was fine this script will print at the end:
<p>&nbsp;&nbsp;&nbsp; <i>Done!</i>
<p>

<hr>
<!--#include virtual="./ssi/navlinks.shtml" -->

<hr>

<!-- Begin footer content -->

<table BORDER=0 CELLSPACING=0 WIDTH="100%" >
<script>
<!--
print_author('cpp-core', 'Eugene Vasilchenko', '$Date$', 'ncbi.nlm.nih.gov');
// -->
</script>
</table>

<!--#include virtual="./ssi/footer.shtml" -->
