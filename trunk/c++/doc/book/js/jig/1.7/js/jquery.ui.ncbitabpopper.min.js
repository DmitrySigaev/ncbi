jQuery.widget("ui.ncbitabpopper",{options:{offsetLeft:-20,offsetTop:0,innerOffset:0},_create:function(){this._addhandlers();this._createPoppers()},_addhandlers:function(){var a=this;jQuery("a[sourceContent], button[sourceContent]",this.element).click(function(b){var c=this.getAttribute("tabvalidate");a._open(b,this,c)!==false&&this.onfooclick&&this.onfooclick(b)});jQuery(document).click(function(b){a._globalClick(b)});jQuery(window).resize(function(b){a._positionBox(b)})},_popBox:null,_createPoppers:function(){this._popBoxCover=
jQuery("<div class='ui-ncbi-tabpopper-cover'></div>").appendTo(document.body)},_activeMenu:null,_open:function(a,b,c){if(a!=null){a.preventDefault();a.stopPropagation()}if(this._activeMenu!==null){a=this._activeMenu[0]==b;this.close();if(a)return}if(c){var e=this;if(c.indexOf(".")===-1)a=window[c];else{a=window;c=c.split(".");for(var d=0;d<c.length;d++)a=a[c[d]]}if(a(function(){e._openPane(b)})!==true)return}this._openPane(b)},_openPane:function(a){this._activeMenu=jQuery(a);if(this._activeMenu.length>
0){this._popBox=jQuery("#"+this._activeMenu.attr("sourceContent"));this._popBox.addClass("ui-ncbi-tabpopper");this._positionBox()}},open:function(a){if(typeof a==="string")a=jQuery(a);var b=a.attr("tabvalidate");this._open(null,a,b)},_globalClick:function(a){if(this._activeMenu!==null){for(a=a.target;a!=null;){if(a==this._popBox[0]||a==this._popBoxCover[0])break;a=jQuery(a).parent();if(a.length>0)a=a[0];else break}a.length===0&&this.close()}},close:function(){if(this._activeMenu!==null){var a=this,
b=this._activeMenu;this._popBox.css("z-index",1001).slideUp(170,function(){b.removeClass("active");a.element.trigger("tabpopperclose",[b])});this._popBoxCover.css("z-index",1002).css("display","none");this._activeMenu=null}},_positionBox:function(){function a(){h.element.trigger("tabpopperopen",[b])}var b=this._activeMenu;if(b){var c=b.position(),e=b.height(),d=Math.floor(parseFloat(b.css("padding-bottom")))||0,g=Math.floor(parseFloat(b.css("padding-left")))||0,i=Math.floor(parseFloat(b.css("padding-right")))||
0,j=Math.floor(parseFloat(b.css("border-left-width")))||0;parseFloat(b.css("margin-right"));var k=Math.floor(parseFloat(b.css("margin-left")))||0,f=parseFloat(b.css("margin-bottom"))||0;f=isNaN(f)?0:Math.floor(f);e=c.top+e+d+this.options.offsetTop-f;d=c.left+this.options.offsetLeft;if(d<0)d=0;else if(this._popBox.width()+d>jQuery(window).width()){d=jQuery(window).width()-this._popBox.width()-12;d=d>0?d:0}g=b.width()+g+i-2*this.options.innerOffset;c=c.left+j+k+this.options.innerOffset;b.addClass("active");
var h=this;this._popBox.css("top",e+"px").css("left",d+"px").css("z-index",1003).slideDown(170,a);this._popBoxCover.width(g).css("top",e+"px").css("left",c+"px").css("z-index",1004).slideDown(100)}}});
