<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Programming Policies and Guidelines - The NCBI C++ Toolkit Book [Internet] - NCBI</title><meta name="description" content="A comprehensive manual on the NCBI C++ toolkit, including its design and development framework, a C++ library reference, software examples and demos, FAQs and release notes." /><meta name="robots" content="index,nofollow,noarchive" /><meta name="page_id" content="ch_style" /><meta name="page_type" content="chapter" /><meta name="ncbipopper" content="triggerPosition:'bottom left',destPosition:'top left',openEvent:'click',closeEvent:'click'" /><script type="text/javascript" src="js/jig/1.7/js/jig.min.js"></script><script type="text/javascript" src="js/toolkitSymbolSearch.js"></script><link type="text/css" rel="stylesheet" href="css/ptbooks.css" /><link type="text/css" rel="stylesheet" href="css/toolkit.css" /></head><body><div class="grid no_max_width"><div class="col twelve_col nomargin shadow"><div class="content"><div class="col eight_col"><div class="nvgtn"><a href="#__nav_cntnt" class="jig-ncbipopper">Contents ▾</a><div style="display:none;width:700px;height:500px;overflow:auto;" id="__nav_cntnt"><a class="right" href="toc.html">Table of Contents Page</a><ul class="simple-list"><li class="half_rhythm"><a href="toolkit.fm.html">Book Information</a></li><li class="half_rhythm"><a href="part1.html">Part 1. Overview</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_intro.html">1. Introduction to the C++ Toolkit</a></li><li class="half_rhythm"><a href="ch_start.html">2. Getting Started</a></li></ul></li><li class="half_rhythm"><a href="part2.html">Part 2. Development Framework</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_getcode_svn.html">3. Retrieve the Source Code (FTP and Subversion)</a></li><li class="half_rhythm"><a href="ch_config.html">4. Configure, Build, and Use the Toolkit</a></li><li class="half_rhythm"><a href="ch_build.html">5. Working with Makefiles</a></li><li class="half_rhythm"><a href="ch_proj.html">6. Project Creation and Management</a></li><li class="half_rhythm"><a href="ch_style.html">7. Programming Policies and Guidelines</a></li></ul></li><li class="half_rhythm"><a href="part3.html">Part 3. C++ Toolkit Library Reference</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_core.html">8. Portability, Core Functionality and Application Framework</a></li><li class="half_rhythm"><a href="ch_conn.html">9. Networking and IPC</a></li><li class="half_rhythm"><a href="ch_dbapi.html">10. Database Access - SQL, Berkley DB</a></li><li class="half_rhythm"><a href="ch_cgi.html">11. CGI and Fast-CGI </a></li><li class="half_rhythm"><a href="ch_html.html">12. HTML</a></li><li class="half_rhythm"><a href="ch_ser.html">13. Data Serialization (ASN.1, XML)</a></li><li class="half_rhythm"><a href="ch_datamod.html">14. Biological Sequence Data Model</a></li><li class="half_rhythm"><a href="ch_objmgr.html">15. Biological Object Manager</a></li><li class="half_rhythm"><a href="ch_blast.html">16. BLAST API</a></li><li class="half_rhythm"><a href="ch_dataaccess.html">17. Access to NCBI data</a></li><li class="half_rhythm"><a href="ch_algoalign.html">18. Biological Sequence Alignment</a></li><li class="half_rhythm"><a href="ch_gui.html">19. GUI and Graphics</a></li><li class="half_rhythm"><a href="ch_boost.html">20. Using the Boost Unit Test Framework</a></li></ul></li><li class="half_rhythm"><a href="part4.html">Part 4. Wrappers for 3rd-Party Packages</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_xmlwrapp.html">21. XmlWrapp (XML parsing and handling, XSLT, XPath)</a></li></ul></li><li class="half_rhythm"><a href="part5.html">Part 5. Software</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_debug.html">22. Debugging, Exceptions, and Error Handling</a></li><li class="half_rhythm"><a href="ch_grid.html">23. Distributed Computing</a></li><li class="half_rhythm"><a href="ch_app.html">24. Applications</a></li><li class="half_rhythm"><a href="ch_demo.html">25. Examples and Demos</a></li><li class="half_rhythm"><a href="ch_res.html">26. C Toolkit Resources for C++ Toolkit Users</a></li></ul></li><li class="half_rhythm"><a href="part6.html">Part 6. Help and Support</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_browse.html">27. NCBI C++ Toolkit Source Browser</a></li><li class="half_rhythm"><a href="ch_devtools.html">28. Software Development Tools</a></li><li class="half_rhythm"><a href="ch_xmlauthor.html">29. XML Authoring using Word</a></li><li class="half_rhythm"><a href="ch_faq.html">30. FAQs, Useful Documentation Links, and Mailing Lists</a></li></ul></li><li class="half_rhythm"><a href="part7.html">Part 7. Library and Applications Configuration</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_libconfig.html">31. Library Configuration</a></li></ul></li><li class="half_rhythm"><a href="part8.html">Release Notes</a><ul class="simple-list"><li class="half_rhythm"><a href="release_notes.html">Release Notes (Version 9, May 2012)</a></li><li class="half_rhythm"><a href="release_notes_7-05_2011.html">Release Notes (Version 7, May 2011)</a></li><li class="half_rhythm"><a href="release_notes_06_29_2010.html">Release Notes (June, 2010)</a></li><li class="half_rhythm"><a href="release_notes_05_15_2009.html">Release Notes (May, 2009)</a></li><li class="half_rhythm"><a href="release_notes_12_24_2008.html">Release Notes (December, 2008)</a></li><li class="half_rhythm"><a href="release_notes_12_31_2008.html">Release Notes (March, 2008)</a></li><li class="half_rhythm"><a href="release_notes_08_27_2007.html">Release Notes (August, 2007)</a></li><li class="half_rhythm"><a href="release_notes_03_12_2007.html">Release Notes (March, 2007)</a></li><li class="half_rhythm"><a href="release_notes_08_14_2006.html">Release Notes (August, 2006)</a></li><li class="half_rhythm"><a href="release_notes_04_30_2006.html">Release Notes (April 30, 2006)</a></li><li class="half_rhythm"><a href="release_notes_12_31_2005.html">Release Notes (December 31, 2005)</a></li><li class="half_rhythm"><a href="release_notes_10_03_2005.html">Release Notes (August, 2005)</a></li><li class="half_rhythm"><a href="release_notes_05_05_2005.html">Release Notes (April, 2005)</a></li><li class="half_rhythm"><a href="release_notes_03_09_2005.html">Release Notes (February, 2005)</a></li><li class="half_rhythm"><a href="release_notes_11_22_2004.html">Release Notes (November 22, 2004)</a></li><li class="half_rhythm"><a href="release_notes_10_2_2004.html">Release Notes (October 2, 2004)</a></li><li class="half_rhythm"><a href="release_notes_7_8_2004.html">Release Notes (July 8, 2004)</a></li><li class="half_rhythm"><a href="release_notes_april_16_2004.html">Release Notes (April 16, 2004)</a></li><li class="half_rhythm"><a href="release_notes_12_08_2003.html">Release Notes (December 8, 2003)</a></li><li class="half_rhythm"><a href="release_notes_08_01_2003.html">Release Notes (August 1, 2003)</a></li></ul></li><li class="half_rhythm"><a href="app1.appendix1.html">Appendix - Books and Styles</a></li></ul></div><div class="pagination"><a class="pagelink active prev" title="Previous page" href="ch_proj.html">&lt; Prev</a><a class="pagelink active next" title="Next page" href="part3.html">Next &gt;</a></div></div><div class="meta_content"><h1><span class="label">7</span><span class="title">Programming Policies and Guidelines</span></h1><p class="small">Last Update: January 30, 2012.</p></div><div class="body_content"><div class="sec"><h2><span class="title">Overview</span></h2><p>The overview for this chapter consists of the following topics:</p><ul><li><p>Introduction</p></li><li><p>Chapter Outline</p></li></ul><div class="sec"><h3><span class="title">Introduction</span></h3><p>This chapter discusses policies and guidelines for the development of NCBI software.</p></div><div class="sec"><h3><span class="title">Chapter Outline</span></h3><p>The following is an outline of the topics presented in this chapter:</p><ul><li><p><a href="ch_style.html#ch_style.Choice_of_Language">Choice of Language</a></p></li><li><p><a href="ch_style.html#ch_style.prog_style">Source Code Conventions</a></p><ul><li><p><a href="ch_style.html#ch_style.Public_Domain_Notice">Public Domain Notice</a></p></li><li><p><a href="ch_style.html#ch_style.naming_conv">Naming Conventions</a></p></li><li><p><a href="ch_style.html#ch_style.naming_prefix">Name Prefixing and/or the Use of Namespaces</a></p></li><li><p><a href="ch_style.html#ch_style.using_NCBI_namespace">Use of the NCBI Name Scope</a></p></li><li><p><a href="ch_style.html#ch_style.using_includes">Use of Include Directives</a></p></li><li><p><a href="ch_style.html#ch_style.code_indentation">Code Indentation and Bracing</a></p></li><li><p><a href="ch_style.html#ch_style.class_decl">Class Declaration</a></p></li><li><p><a href="ch_style.html#ch_style.func_decl">Function Declaration</a></p></li><li><p><a href="ch_style.html#ch_style.func_def">Function Definition</a></p></li><li><p><a href="ch_style.html#ch_style.useof_whitespace">Use of Whitespace</a></p></li><li><p><a href="ch_style.html#ch_style.std_header_template">Standard Header Template</a></p></li></ul></li><li><p><a href="ch_style.html#ch_style.Doxygen_Comments">Doxygen Comments</a></p></li><li><p><a href="ch_style.html#ch_style.style_guidelines">C++ Guidelines</a></p><ul><li><p><a href="ch_style.html#ch_style.intro_stl_features">Introduction to Some C++ and STL Features and Techniques</a></p><ul><li><p><a href="ch_style.html#ch_style.impl_guideline">C++ Implementation Guide</a></p><ul><li><p><a href="ch_style.html#ch_style.stl_templ_lib">Use of STL (Standard Template Library)</a></p></li><li><p><a href="ch_style.html#ch_style.use_cpp_excep">Use of C++ Exceptions</a></p></li><li><p><a href="ch_style.html#ch_style.style_design">Design</a></p></li><li><p><a href="ch_style.html#ch_style.Make_Your_Code_Reada">Make Your Code Readable</a></p></li></ul></li><li><p><a href="ch_style.html#ch_style.cpp_tips_tricks">C++ Tips and Tricks</a></p></li><li><p><a href="ch_style.html#ch_style.style_templ_library">Standard Template Library (STL) </a></p><ul><li><p><a href="ch_style.html#ch_style.stl_tips_tricks">STL Tips and Tricks</a></p></li></ul></li></ul></li><li><p><a href="ch_style.html#ch_style.style_pitfalls">C++/STL Pitfalls and Discouraged/Prohibited Features</a></p><ul><li><p><a href="ch_style.html#ch_style.stl_bad_guys">STL and Standard C++ Library's Bad Guys</a></p><ul><li><p><a href="ch_style.html#ch_style.cpp_nonstd_stl">Non-Standard STL Classes</a></p></li></ul></li><li><p><a href="ch_style.html#ch_style.cpp_bad_guys">C++ Bad Guys</a></p><ul><li><p><a href="ch_style.html#ch_style.style_op_overload">Operator Overload</a></p></li><li><p><a href="ch_style.html#ch_style.assign_copy_constr">Assignment and Copy Constructor Overload</a></p></li><li><p><a href="ch_style.html#ch_style.no_arg_prototype">Omitting "void" in a No-Argument Function Prototype</a></p></li><li><p><a href="ch_style.html#ch_style.malloc_new">Do Not Mix malloc and new</a></p></li></ul></li></ul></li></ul></li><li><p><a href="ch_style.html#ch_style.Source_Code_Repositories">Source Code Repositories</a></p></li><li><p><a href="ch_style.html#ch_style.Testing">Testing</a></p></li></ul></div></div><div class="sec" id="ch_style.Choice_of_Language"><h2><span class="title">Choice of Language</span></h2><p><b>C++</b> is typically the language of choice for C++ Toolkit libraries and applications. The policy for language choice in other areas within NCBI is:</p><ul><li><p><b>C/C++</b> -- for high-performance standalone backend servers and CGIs, computationally intensive algorithms and large data flow processing tools used in production.</p></li><li><p><b>sh</b> or <b>bash</b> -- for primitive scripting.</p></li><li><p><b>Python</b>  -- for advanced scripting. See its usage policy <a href="http://intranet.ncbi.nlm.nih.gov:6224/wiki-private/CxxToolkit/index.cgi/Recommended_Python_Database_Interface_modules#Recommended_Python_Database_Interface_modules1">here</a>.</p></li><li><p><b>Perl</b>  -- for advanced scripting. The <a href="http://intranet.ncbi.nlm.nih.gov:6224/wiki-private/CxxToolkit/index.cgi/Recommended_Python_Database_Interface_modules#Recommended_Python_Database_Interface_modules1">Python usage policy</a> can be applied to Perl as well.</p></li><li><p><b>Java</b>  -- for Eclipse programming and in-house QA and testing tools.</p></li></ul><p>See the "<a href="http://intranet.ncbi.nlm.nih.gov:6224/wiki-private/CxxToolkit/index.cgi/Recommended_programming_and_scripting_languages">Recommended programming and scripting languages</a>" Wiki page for more information and updates to this policy. Send proposals for corrections, additions and extensions of the policy on language choice to the languages mailing list, languages@ncbi.nlm.nih.gov.</p></div><div class="sec" id="ch_style.prog_style"><h2><span class="title">Source Code Conventions</span></h2><p>This section contains C++ style guidelines, although many of these guidelines could also apply, at least in principle, to other languages. Adherence to these guidelines will promote uniform coding, better documentation, easy to read code, and therefore more maintainable code.</p><p>The following topics are discussed in this section:</p><ul><li><p><a href="ch_style.html#ch_style.Public_Domain_Notice">Public Domain Notice</a></p></li><li><p><a href="ch_style.html#ch_style.naming_conv">Naming Conventions</a></p><ul><li><p><a href="ch_style.html#ch_style.T1">Type Names</a></p></li><li><p><a href="ch_style.html#ch_style.T1">Preprocessor Define/Macro</a></p></li><li><p><a href="ch_style.html#ch_style.T1">Function Arguments and Local Variables</a></p></li><li><p><a href="ch_style.html#ch_style.T1">Constants</a></p></li><li><p><a href="ch_style.html#ch_style.T1">Class and Structure Data Members (Fields)</a></p></li><li><p><a href="ch_style.html#ch_style.T1">Class Member Functions (Methods)</a></p></li><li><p><a href="ch_style.html#ch_style.T1">Module Static Functions and Data</a></p></li><li><p><a href="ch_style.html#ch_style.T1">Global ("extern") Functions and Data</a></p></li></ul></li><li><p><a href="ch_style.html#ch_style.naming_prefix">Name Prefixing and/or the Use of Namespaces</a></p></li><li><p><a href="ch_style.html#ch_style.using_NCBI_namespace">Use of the NCBI Name Scope</a></p></li><li><p><a href="ch_style.html#ch_style.using_includes">Use of Include Directives</a></p></li><li><p><a href="ch_style.html#ch_style.code_indentation">Code Indentation and Bracing</a></p></li><li><p><a href="ch_style.html#ch_style.class_decl">Class Declaration</a></p></li><li><p><a href="ch_style.html#ch_style.func_decl">Function Declaration</a></p></li><li><p><a href="ch_style.html#ch_style.func_def">Function Definition</a></p></li><li><p><a href="ch_style.html#ch_style.useof_whitespace">Use of Whitespace</a></p></li><li><p><a href="ch_style.html#ch_style.std_header_template">Standard Header Template</a></p></li></ul><div class="sec" id="ch_style.Public_Domain_Notice"><h3><span class="title">Public Domain Notice</span></h3><p>All NCBI-authored C/C++ source files <b>must</b> begin with a comment containing NCBI's public domain notice, shown below. Ideally (subject to the developer’s discretion), so should any other publicly released source code and data (including scripting languages and data specifications).</p><pre>/*  $Id$<br /> * ===========================================================================<br /> *<br /> *                            PUBLIC DOMAIN NOTICE<br /> *               National Center for Biotechnology Information<br /> *<br /> *  This software/database is a "United States Government Work" under the<br /> *  terms of the United States Copyright Act.  It was written as part of<br /> *  the author's official duties as a United States Government employee and<br /> *  thus cannot be copyrighted.  This software/database is freely available<br /> *  to the public for use. The National Library of Medicine and the U.S.<br /> *  Government have not placed any restriction on its use or reproduction.<br /> *<br /> *  Although all reasonable efforts have been taken to ensure the accuracy<br /> *  and reliability of the software and data, the NLM and the U.S.<br /> *  Government do not and cannot warrant the performance or results that<br /> *  may be obtained by using this software or data. The NLM and the U.S.<br /> *  Government disclaim all warranties, express or implied, including<br /> *  warranties of performance, merchantability or fitness for any particular<br /> *  purpose.<br /> *<br /> *  Please cite the author in any work or product based on this material.<br /> *<br /> * ===========================================================================<br /> */</pre><p>If you have questions, please email to cpp-core@ncbi.nlm.nih.gov.</p></div><div class="sec" id="ch_style.naming_conv"><h3><span class="title">Naming Conventions</span></h3><div class="table" id="ch_style.T1"><div class="caption"><p> Table 1. Naming Conventions</p></div><table><tbody><tr><th align="left" valign="top" rowspan="1" colspan="1">SYNOPSIS</th><th align="left" valign="top" rowspan="1" colspan="1">EXAMPLE</th></tr><tr><td colspan="2" align="center" valign="top" rowspan="1"><b>Type Names</b></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>C</i></b><i>ClassTypeName</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">class CMyClass { ..... };</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>I</i></b><i>InterfaceName</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">class IMyInterface { ..... };</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>S</i></b><i>StructTypeName</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">struct SMyStruct { ..... };</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>U</i></b><i>UnionTypeName</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">union UMyUnion { ..... };</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>E</i></b><i>EnumTypeName</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">enum EMyEnum { ..... };</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>F</i></b><i>FunctionTypeName</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">typedef int (*FMyFunc)(void);</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>P</i></b><i>PredicateName</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">struct PMyPred { bool operator() (.... , ....); };</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>T</i></b><i>AuxiliaryTypedef  </i><a href="ch_style.html#ch_style.1.3.1">(*)</a></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">typedef map&lt;int,string&gt; TMyMapIntStr;</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>T</i></b><i>Iterator</i><b><i>_I</i></b></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">typedef list&lt;int&gt;::iterator TMyList_I;</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>T</i></b><i>ConstIterator</i><b><i>_CI</i></b></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">typedef set&lt;string&gt;::const_iterator TMySet_CI;</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>N</i></b><i>Namespace </i><a href="ch_style.html#ch_style.naming_prefix">(see also)</a></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">namespace NMyNamespace { ..... }</span></td></tr><tr><td colspan="2" align="center" valign="top" rowspan="1"><b>Preprocessor Define/Macro</b></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><i>MACRO_NAME</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">#define MY_DEFINE 12345</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><i>macro_arg_name</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">#define MY_MACRO(x, y) (((x) + 1) &lt; (y))</span></td></tr><tr><td colspan="2" align="center" valign="top" rowspan="1"><b>Function Arguments and Local Variables</b></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><i>func_local_var_name</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">void MyFunc(int foo, const CMyClass&amp; a_class)</span><br /><span class="nctnt ncbi-code">{ </span><br /><span class="nctnt ncbi-code">    size_t  foo_size;</span><br /><span class="nctnt ncbi-code">    int   bar;</span></td></tr><tr><td colspan="2" align="center" valign="top" rowspan="1"><b>Constants</b></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>k</i></b><i>ConstantName</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">const int kMyConst = 123;</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>e</i></b><i>EnumValueName</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">enum EMyEnum { </span><br /><span class="nctnt ncbi-code">    eMyEnum_1 = 11, </span><br /><span class="nctnt ncbi-code">    eMyEnum_2 = 22, </span><br /><span class="nctnt ncbi-code">    eMyEnum_3 = 33 </span><br /><span class="nctnt ncbi-code">};</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>f</i></b><i>FlagValueName</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">enum EMyFlags {</span><br /><span class="nctnt ncbi-code">    fMyFlag_1 = (1&lt;&lt;0),  ///&lt; = 0x1 (describe)</span><br /><span class="nctnt ncbi-code">    fMyFlag_2 = (1&lt;&lt;1),  ///&lt; = 0x2 (describe)</span><br /><span class="nctnt ncbi-code">    fMyFlag_3 = (1&lt;&lt;2)   ///&lt; = 0x4 (describe)</span><br /><span class="nctnt ncbi-code">};</span> <br /><span class="nctnt ncbi-code">typedef int TMyFlags; ///&lt; holds bitwise OR of "EMyFlags"</span></td></tr><tr><td colspan="2" align="center" valign="top" rowspan="1"><b>Class and Structure Data Members (Fields)</b></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>m_</i></b><i>ClassMemberName</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">class C { short int m_MyClassData; };</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><i>struct_field_name </i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">struct S { int my_struct_field; };</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>sm_</i></b><i>ClassStaticMemberName</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">class C { static double sm_MyClassStaticData; };</span></td></tr><tr><td colspan="2" align="center" valign="top" rowspan="1"><b>Class Member Functions (Methods)</b></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><i>ClassMethod</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">bool MyClassMethod(void);</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>x_</i></b><i>ClassPrivateMethod</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">int x_MyClassPrivateMethod(char c);</span></td></tr><tr><td colspan="2" align="center" valign="top" rowspan="1"><b>Module Static Functions and Data</b></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>s_</i></b><i>StaticFunc</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">static char s_MyStaticFunc(void);</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>s_</i></b><i>StaticVar</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">static int s_MyStaticVar;</span></td></tr><tr><td colspan="2" align="center" valign="top" rowspan="1"><b>Global (<i>"extern"</i>) Functions and Data</b></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>g_</i></b><i>GlobalFunc</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">double g_MyGlobalFunc(void);</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><b><i>g_</i></b><i>GlobalVar</i></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">short g_MyGlobalVar;</span></td></tr></tbody></table><div class="table-wrap-foot"><div class="small" id="ch_style.1.3.1"><p>(*) The auxiliary typedefs (like <b><i>T</i></b><i>AuxiliaryTypedef</i>) are usually used for an ad-hoc type mappings (especially when using templates) and not when a real type definition takes place.</p></div></div></div></div><div class="sec" id="ch_style.naming_prefix"><h3><span class="title">Name Prefixing and/or the Use of Namespaces</span></h3><p>In addition to the above naming conventions that highlight the nature and/or the scope of things, one should also use prefixes to:</p><ul><li><p>avoid name conflicts</p></li><li><p>indicate the package that the entity belongs to </p></li></ul><p>For example, if you are creating a new class called "<span class="nctnt ncbi-path">Bar</span>" in package "<span class="nctnt ncbi-path">Foo</span>" then it is good practice to name it "<span class="nctnt ncbi-class">CFooBar</span>" rather than just "<span class="nctnt ncbi-class">CBar</span>". Similarly, you should name new constants like "<span class="nctnt ncbi-var">kFooSomeconst</span>", new types like "<span class="nctnt ncbi-type">TFooSometype</span>", etc.</p></div><div class="sec" id="ch_style.using_NCBI_namespace"><h3><span class="title">Use of the NCBI Name Scope</span></h3><p><span class="nctnt ncbi-code">&lt;ncbistl.hpp&gt;</span></p><p>All NCBI-made “core” API code must be put into the <span class="nctnt ncbi-code">"ncbi::"</span> namespace. For this purpose, there are two preprocessor macros, <span class="nctnt ncbi-macro">BEGIN_NCBI_SCOPE</span> and <span class="nctnt ncbi-macro">END_NCBI_SCOPE</span>, that must enclose <b>all</b> NCBI C++ API code -- both declarations and definitions (see <a href="ch_proj.html#ch_proj.new_modules">examples </a>). Inside these "brackets", all <span class="nctnt ncbi-code">"std::"</span> and <span class="nctnt ncbi-code">"ncbi::"</span> scope prefixes can (and must!) be omitted.</p><p>For code that does not define a new API but merely <b>uses</b> the NCBI C++ API, there is a macro <span class="nctnt ncbi-macro">USING_NCBI_SCOPE;</span> (semicolon-terminated) that brings all types and prototypes from the <span class="nctnt ncbi-code">"std::"</span> and <span class="nctnt ncbi-code">"ncbi::"</span> namespaces into the current scope, eliminating the need for the <span class="nctnt ncbi-code">"std::"</span> and <span class="nctnt ncbi-code">"ncbi::"</span> prefixes.</p><p>Use macro <span class="nctnt ncbi-macro">NCBI_USING_NAMESPACE_STD;</span> (semicolon-terminated) if you want to bring all types and prototypes from the <span class="nctnt ncbi-code">"std::"</span> namespace into the current scope, without bringing in anything from the <span class="nctnt ncbi-code">"ncbi::"</span> namespace. </p></div><div class="sec" id="ch_style.using_includes"><h3><span class="title">Use of Include Directives</span></h3><p>If a header file is in the local directory or not on the INCLUDE path, use quotes in the include directive (e.g. <span class="nctnt ncbi-code">#include "foo.hpp"</span>).  In all other cases use angle brackets (e.g. <span class="nctnt ncbi-code">#include &lt;bar/foo.hpp&gt;</span>).</p><p>In general, if a header file is commonly used, it must be on the INCLUDE path and therefore requires the bracketed form.</p></div><div class="sec" id="ch_style.code_indentation"><h3><span class="title">Code Indentation and Bracing</span></h3><p><b>4-space indentation only</b>! Tabulation symbol <b>must not</b> be used for indentation. </p><p>Try not to cross the "standard page boundary" of <b>80</b> symbols.</p><p>In <span class="nctnt ncbi-code">if, for, while, do, switch, case</span>, etc. and type definition statements: </p><pre><span class="nctnt-pre ncbi-code">if (...) {<br />    .....;<br />} else if (...) {<br />    .....;<br />} else {<br />    .....;<br />}<br /><br />if (...) {<br />    .....;<br />}<br />else if (...) {<br />    .....;<br />}<br />else {<br />    .....;<br />}<br /><br />for (...;  ...;  ...) {<br />    .....;<br />}<br /><br />while (...) {<br />    .....;<br />}<br /><br />do {<br />    .....;<br />}<br />while (...);<br /><br />switch (...) {<br />case ...: {<br />    .....;<br />    break;<br />}<br />} // switch<br /><br />struct|union|enum &lt;[S|U|E]TypeName&gt; {<br />    .....;<br />};<br /><br />class | struct | union &lt;[C|I|P|S|U]TypeName&gt;<br />{<br />    .....;<br />};<br /><br />try {<br />    .....;<br />}<br />catch (exception&amp; e) {<br />    .....;<br />}</span></pre></div><div class="sec" id="ch_style.class_decl"><h3><span class="title">Class Declaration</span></h3><p>Class declarations should be rich in <a href="ch_style.html#ch_style.Doxygen_Comments">Doxygen-style comments</a>. This will increase the value of the Doxygen-based API documentation.</p><pre><span class="nctnt-pre ncbi-code">/// @file FileName<br />/// Description of file -- note that this is _required_ if you want<br />/// to document global objects such as typedefs, enums, etc.<br /><br />///////////////////////////////////////////////////////////////////////<br />///<br />/// CFooClass<br />///<br />/// Brief description of class (or class template, struct, union) --<br />/// it must be followed by an empty comment line.<br />///<br />/// A detailed description of the class -- it follows after an empty<br />/// line from the above brief description. Note that comments can<br />/// span several lines and that the three /// are required.<br /><br />class CFooClass<br />{<br />public:<br />    // Constructors and Destructor:<br /><br />    /// A brief description of the constructor.<br />    ///<br />    /// A detailed description of the constructor.<br />    CFooClass(const char* init_str = NULL); ///&lt; describe parameter here<br /><br />    /// A brief description for another constructor.<br />    CFooClass(int init_int); ///&lt; describe parameter here<br /><br />    ~CFooClass(void); // Usually needs no Doxygen-style comment.<br /><br />    // Members and Methods:<br /><br />    /// A brief description of TestMe.<br />    ///<br />    /// A detailed description of TestMe. Use the following when <br />    /// parameter descriptions are going to be long, and you are <br />    /// describing a complex method:<br />    /// @param foo<br />    ///   An int value meaning something.<br />    /// @param bar<br />    ///   A constant character pointer meaning something.<br />    /// @return<br />    ///   The TestMe() results.<br />    /// @sa CFooClass(), ~CFooClass() and TestMeToo() - see also.<br />    float TestMe(int foo, const char* bar);<br /><br />    /// A brief description of TestMeToo.<br />    ///<br />    /// Details for TestMeToo. Use this style if the parameter <br />    /// descriptions are going to be on one line each:<br />    /// @sa TestMe()<br />    virtual void TestMeToo<br />    (char         par1,  ///&lt; short description for par1<br />     unsigned int par2   ///&lt; short description for par2<br />     ) = 0;<br /><br />    /// Brief description of a function pointer type<br />    /// (note that global objects like this will not be documented<br />    /// unless the file itself is documented with the @file command).<br />    ///<br />    /// Detailed description of the function pointer type.<br />    typedef char* (*FHandler)<br />        (int start,  ///&lt; argument description 1 -- what start means<br />         int stop    ///&lt; argument description 2 -- what stop  means<br />         );<br /><br />    // (NOTE:  The use of public data members is<br />    //         strictly discouraged!<br />    //         If used they should be well documented!)<br />    /// Describe public member here, explain why it’s public.<br />    int   m_PublicData;<br /><br />protected:<br />    /// Brief description of a data member -- notice no details are<br />    /// given here since a brief description is adequate.<br />    double m_FooBar;<br /><br />    /// Brief function description here.<br />    /// Detailed description here. More description.<br />    /// @return Return value description here.<br />    static int ProtectedFunc(char ch); ///&lt; describe parameter here<br /><br />private:<br />    /// Brief member description here.<br />    /// Detailed description here. More description.<br />    int    m_PrivateData;<br /><br />    /// Brief static member description here.<br />    static int    sm_PrivateStaticData;<br /><br />    /// Brief function description here.<br />    /// Detailed description here. More description.<br />    /// @return Return value description here.<br />    double x_PrivateFunc(int some_int = 1); ///&lt; describe parameter here<br /><br />    // Friends<br />    friend bool  SomeFriendFunc(void);<br />    friend class CSomeFriendClass;<br /><br />    // Prohibit default initialization and assignment<br />    // -- e.g. when the member-by-member copying is dangerous.<br /><br />    /// This method is declared as private but is not<br />    /// implemented to prevent member-wise copying.<br />    CFooClass(const CFooClass&amp;);<br /><br />    /// This method is declared as private but is not<br />    /// implemented to prevent member-wise copying.<br />    CFooClass&amp; operator= (const CFooClass&amp;);<br />};<br /></span></pre></div><div class="sec" id="ch_style.func_decl"><h3><span class="title">Function Declaration</span></h3><p><a href="ch_style.html#ch_style.Doxygen_Comments">Doxygen-style comments</a> for functions should describe what the function does, its parameters, and what it returns.</p><p>For global function declarations, put all Doxygen-style comments in the header file. Prefix global functions with <span class="nctnt ncbi-var">g_</span>.</p><pre><span class="nctnt-pre ncbi-code">/// A brief description of MyFunc2.<br />///<br />/// Explain here what MyFunc2() does.<br />/// @return explain here what MyFunc2() returns.<br />bool g_MyFunc2<br />(double  arg1,      ///&lt; short description of "arg1"<br /> string* arg2,      ///&lt; short description of "arg2"<br /> long    arg3 = 12  ///&lt; short description of "arg3"<br /> );<br /></span></pre></div><div class="sec" id="ch_style.func_def"><h3><span class="title">Function Definition</span></h3><p><a href="ch_style.html#ch_style.Doxygen_Comments">Doxygen-style comments</a> are not needed for member function definitions or global function definitions because their comments are put with their declarations in the header file.</p><p>For static functions, put all Doxygen-style comments immediately before the function definition. Prefix static functions with <span class="nctnt ncbi-var">s_</span>.</p><pre><span class="nctnt-pre ncbi-code">bool g_MyFunc2<br />(double  arg1,<br /> string* arg2,<br /> long    arg3<br /> )<br />{<br />    .......<br />    .......<br />    return true;<br />}<br /><br />/// A brief description of s_MyFunc3.<br />///<br />/// Explain here what s_MyFunc3() does.<br />/// @return explain here what s_MyFunc3() returns.<br />static long s_MyFunc3(void)<br />{<br />    .......<br />    .......<br />}<br /></span></pre></div><div class="sec" id="ch_style.useof_whitespace"><h3><span class="title">Use of Whitespace</span></h3><p>As the above examples do not make all of our policies on whitespace clear, here are some explicit guidelines: </p><ul><li><p>When reasonably possible, use spaces to align corresponding elements vertically. (This overrides most of the rules below.)</p></li><li><p>Leave one space on either side of most binary operators, and two spaces on either side of boolean <span class="nctnt ncbi-code">&amp;&amp;</span> and <span class="nctnt ncbi-code">||</span>.</p></li><li><p>Put one space between the names of flow-control keywords and macros and their arguments, but no space after the names of functions except when necessary for alignment.</p></li><li><p>Leave two spaces after the semicolons in <span class="nctnt ncbi-code">for(...; ...; ...)</span>.</p></li><li><p>Leave whitespace around negated conditions so that the <span class="nctnt ncbi-code">!</span> stands out better.</p></li><li><p>Leave two blank lines between function definitions. </p></li></ul></div><div class="sec" id="ch_style.std_header_template"><h3><span class="title">Standard Header Template</span></h3><p>A standard header template file, <a href="http://intranet.ncbi.nlm.nih.gov/ieb/ToolBox/CPP_DOC/lxr/source/include/common/header_template.hpp">header_template.hpp</a>,  has been provided in the <span class="nctnt ncbi-path">include/common</span> directory that can be used as a template for creating header files. This header file adheres to the standards outlined in the previous sections and uses a documentation style for files, classes, methods, macros etc. that allows for automatic generation of documentation from the source code. It is strongly suggested that you obtain a copy of this file and model your documentation using the examples in that file.</p></div></div><div class="sec" id="ch_style.Doxygen_Comments"><h2><span class="title">Doxygen Comments</span></h2><p><a href="http://www.stack.nl/~dimitri/doxygen/">Doxygen</a> is an automated API documentation tool. It relies on special comments placed at appropriate places in the source code. Because the comments are in the source code near what they document, the documentation is more likely to be kept up-to-date when the code changes. A configuration and parsing system scans the code and creates the desired output (e.g. HTML).</p><p>Doxygen documentation is a valuable tool for software developers, as it automatically creates comprehensive cross-referencing of modules, namespaces, classes, and files. It creates inheritance diagrams, collaboration diagrams, header dependency graphs, and documents each class, struct, union, interface, define, typedef, enum, function, and variable (see the NCBI C++ Toolkit <a href="http://intranet.ncbi.nlm.nih.gov:6224/ieb/ToolBox/CPP_DOC/doxyhtml">Doxygen browser</a>). However, developers must write meaningful comments to get the most out of it.</p><p>Doxygen-style comments are essentially extensions of C/C++ comments, e.g. the use of a triple-slash instead of a double-slash. Doxygen-style comments refer to the entity following them by default, but can be made to refer to the entity preceding them by appending the ‘<span class="nctnt ncbi-code">&lt;</span>’ symbol to the comment token (e.g. ‘<span class="nctnt ncbi-code">///&lt;</span>’).</p><p>Doxygen commands are keywords within Doxygen comments that are used during the document generation process. Common commands are <span class="nctnt ncbi-code">@param</span>, <span class="nctnt ncbi-code">@return</span>, and <span class="nctnt ncbi-code">@sa</span> (i.e. ‘see also’).</p><p>Please do not use superfluous comments, such as ‘<span class="nctnt ncbi-code">/// Destructor</span>’. Especially do not use the same superfluous comment multiple times, such as using the same ‘<span class="nctnt ncbi-code">/// Constructor</span>’ comment for different constructors!</p><p>Please see the <a href="http://www.stack.nl/~dimitri/doxygen/manual.html">Doxygen manual</a> for complete usage information.  More information can also be found in the chapter on <a href="ch_browse.html">Toolkit browsers</a>.</p></div><div class="sec" id="ch_style.style_guidelines"><h2><span class="title">C++ Guidelines</span></h2><p>This section discusses the following topics:</p><ul><li><p><a href="ch_style.html#ch_style.intro_stl_features">Introduction to Some C++ and STL Features and Techniques</a></p><ul><li><p><a href="ch_style.html#ch_style.impl_guideline">C++ Implementation Guide</a></p><ul><li><p><a href="ch_style.html#ch_style.stl_templ_lib">Use of STL (Standard Template Library)</a></p></li><li><p><a href="ch_style.html#ch_style.use_cpp_excep">Use of C++ Exceptions</a></p></li><li><p><a href="ch_style.html#ch_style.style_design">Design</a></p></li><li><p><a href="ch_style.html#ch_style.Make_Your_Code_Reada">Make Your Code Readable</a></p></li></ul></li><li><p><a href="ch_style.html#ch_style.cpp_tips_tricks">C++ Tips and Tricks</a></p></li><li><p><a href="ch_style.html#ch_style.style_templ_library">Standard Template Library (STL) </a></p><ul><li><p><a href="ch_style.html#ch_style.stl_tips_tricks">STL Tips and Tricks</a></p></li></ul></li></ul></li><li><p><a href="ch_style.html#ch_style.style_pitfalls">C++/STL Pitfalls and Discouraged/Prohibited Features</a></p><ul><li><p><a href="ch_style.html#ch_style.stl_bad_guys">STL and Standard C++ Library's Bad Guys</a></p><ul><li><p><a href="ch_style.html#ch_style.cpp_nonstd_stl">Non-Standard STL Classes</a></p></li></ul></li><li><p><a href="ch_style.html#ch_style.cpp_bad_guys">C++ Bad Guys</a></p><ul><li><p><a href="ch_style.html#ch_style.style_op_overload">Operator Overload</a></p></li><li><p><a href="ch_style.html#ch_style.assign_copy_constr">Assignment and Copy Constructor Overload</a></p></li><li><p><a href="ch_style.html#ch_style.no_arg_prototype">Omitting "void" in a No-Argument Function Prototype</a></p></li><li><p><a href="ch_style.html#ch_style.malloc_new">Do Not Mix malloc and new</a></p></li></ul></li></ul></li></ul><div class="sec" id="ch_style.intro_stl_features"><h3><span class="title">Introduction to Some C++ and STL Features and Techniques</span></h3><div class="sec" id="ch_style.impl_guideline"><h4><span class="title">C++ Implementation Guide</span></h4><div class="sec" id="ch_style.stl_templ_lib"><h5><span class="title">Use of STL (Standard Template Library)</span></h5><p>Use the <a href="ch_style.html#ch_style.style_templ_library">Standard Template Library (STL)</a>, which is part of ANSI/ISO C++. It'll make programming easier, as well as make it easier for others to understand and maintain your code. </p></div><div class="sec" id="ch_style.use_cpp_excep"><h5><span class="title">Use of C++ Exceptions</span></h5><ul><li><p>Exceptions are useful. However, since exceptions unwind the stack, you must be careful to destroy all resources (such as memory on the heap and file handles) in every intermediate step in the stack unwinding. That means you must always catch exceptions, even those you don't handle, and delete everything you are using locally. In most cases it's very convenient and safe to use the <a href="http://www.parashift.com/c++-faq-lite/exceptions.html#faq-17.4">auto_ptr</a> template to ensure the freeing of temporary allocated dynamic memory for the case of exception.</p></li><li><p>Avoid using exception specifications in function declarations, such as:</p></li></ul><pre><span class="nctnt-pre ncbi-code">void foo(void) throw ();<br /><br />void bar(void) throw (std::exception);<br /></span></pre></div><div class="sec" id="ch_style.style_design"><h5><span class="title">Design</span></h5><ul><li><p>Use abstract base classes. This increases the reusability of code. Whether a base class should be abstract or not depends on the potential for reuse.</p></li><li><p>Don't expose class member variables, rather expose member functions that manipulate the member variables. This increases reusability and flexibility. For example, this frees you from having the string in-process -- it could be in another process or even on another machine.</p></li><li><p>Don't use multiple inheritance (i.e. <span class="nctnt ncbi-code">class A: public B, public C {}</span>) unless creating interface instead of implementation. Otherwise, you'll run into all sorts of problems with conflicting members, especially if someone else owns a base class. The best time to use multiple inheritance is when a subclass multiply inherits from abstract base classes with only pure virtual functions.</p></li></ul><p><span class="nctnt highlight">NOTE:</span> Some people prefer the <a href="http://www.rational.com/uml/index.jtmpl">Unified Modelling Language</a> to describe the relationships between objects.</p></div><div class="sec" id="ch_style.Make_Your_Code_Reada"><h5><span class="title">Make Your Code Readable</span></h5><p>Use <span class="nctnt ncbi-var">NULL</span> instead of <span class="nctnt ncbi-var">0</span> when passing a null pointer. For example: </p><pre><span class="nctnt-pre ncbi-code">MyFunc(0,0);    // Just looking at this call, you can’t tell which<br />                // parameter might be an int and which might be<br />                // a pointer.<br /><br />MyFunc(0,NULL); // When looking at this call, it’s pretty clear<br />                // that the first parameter is an int and<br />                // the second is a pointer.<br /></span></pre><p>Avoid using <span class="nctnt ncbi-var">bool</span> as a type for function arguments. For example, this might be hard to understand:</p><pre><span class="nctnt-pre ncbi-code">// Just looking at this call, you can’t tell what<br />// the third parameter means:<br />CompareStrings(s1, s2, true);<br /></span></pre><p>Instead, create a meaningful enumerated type that captures the meaning of the parameter. For example, try something like this:</p><pre><span class="nctnt-pre ncbi-code">/////////////////////////////////////////////////////////////////////<br />///<br />///  ECaseSensitivity --<br />///<br />///  Control case-sensitivity of string comparisons.<br />///<br />enum ECaseSensitivity {<br />    eCaseSensitive,   ///&lt; Consider case when comparing.<br />    eIgnoreCase       ///&lt; Don’t consider case when comparing.<br />};<br /><br />.....<br /><br />///  Brief description of function here.<br />///  @return<br />///      describe return value here.<br />int CompareStrings<br />(const string&amp; s1,            ///&lt; First string.<br /> const string&amp; s2,            ///&lt; Second string.<br /> ECaseSensitivity comp_case); ///&lt; Controls case-sensitivity<br />                              ///&lt; of comparisons.<br /><br />.....<br /><br />// This call is more understandable because the third parameter<br />// is an enum constant rather than a bool constant.<br />CompareStrings(s1, s2, eIgnoreCase);<br /><br /></span></pre><p>As an added benefit, using an enumerated type for parameters instead of <span class="nctnt ncbi-var">bool</span> gives you the ability to expand the enumerated type to include more variants in the future if necessary - without changing the parameter type.</p></div></div><div class="sec" id="ch_style.cpp_tips_tricks"><h4><span class="title">C++ Tips and Tricks</span></h4><ul><li><p>Writing something like <span class="nctnt ncbi-code">map&lt;int, int, less&lt;int&gt;&gt;</span> will give you weird errors; instead write <span class="nctnt ncbi-code">map&lt;int, int, less&lt;int&gt; &gt;</span>. This is because <span class="nctnt ncbi-code">&gt;&gt;</span> is reserved word. </p></li><li><p>Do use pass-by-reference. It'll cut down on the number of pointer related errors. </p></li><li><p>Use <span class="nctnt ncbi-code">const</span> (or <span class="nctnt ncbi-code">enum</span>) instead of <span class="nctnt ncbi-code">#define</span> when you can. This is much easier to debug. </p></li><li><p>Header files should contain what they contain in C along with classes, const's, and in-line functions.</p></li></ul><p>See the <a href="http://www.parashift.com/c++-faq-lite">C++ FAQ</a></p></div><div class="sec" id="ch_style.style_templ_library"><h4><span class="title">Standard Template Library (STL)</span></h4><p>The STL is a library included in ANSI/ISO C++ for stream, string, and container (linked lists, etc.) manipulation.</p><div class="sec" id="ch_style.stl_tips_tricks"><h5><span class="title">STL Tips and Tricks</span></h5><p><span class="nctnt ncbi-func">end()</span> does not return an iterator to the last element of a container, rather it returns a iterator just beyond the last element of the container. This is so you can do constructs like </p><pre><span class="nctnt-pre ncbi-code">for (iterator = container.begin(); <br />iterator != container.end(); iterator++)<br /></span></pre><p>If you want to access the end element, use "<span class="nctnt ncbi-code">--container.end()</span>".</p><p>Iterator misuse causes the same problems as pointer misuse. There are versions of the STL that flag incorrect use of iterators.</p><p>Iterators are guaranteed to remain valid after insertion and deletion from <span class="nctnt ncbi-class">list</span> containers, but not <span class="nctnt ncbi-class">vector</span> containers. Check to see if the container you are using preserves iterators.</p><p>If you create a container of pointers to objects, the objects are not destroyed when the container is destroyed, only the pointers are. Other than maintaining the objects yourself, there are several strategies for handling this situation detailed in the <a href="app1.appendix1.html#app1.books.html">literature</a>.</p><p>If you pass a container to a function, don't add a local object to the container. The local variable will be destroyed when you leave the function.</p></div></div></div><div class="sec" id="ch_style.style_pitfalls"><h3><span class="title">C++/STL Pitfalls and Discouraged/Prohibited Features</span></h3><ul><li><p><a href="ch_style.html#ch_style.stl_bad_guys">STL and Standard C++ Library's Bad Guys</a></p><ul><li><p><a href="ch_style.html#ch_style.cpp_nonstd_stl">Non-Standard Classes</a></p></li></ul></li><li><p><a href="ch_style.html#ch_style.cpp_bad_guys">C++ Bad Guys</a></p><ul><li><p><a href="ch_style.html#ch_style.style_op_overload">Operator Overload</a></p></li><li><p><a href="ch_style.html#ch_style.assign_copy_constr">Assignment and Copy Constructor Overload</a></p></li><li><p><a href="ch_style.html#ch_style.no_arg_prototype">Omitting "void" in a No-Argument Function Prototype</a></p></li><li><p><a href="ch_style.html#ch_style.malloc_new">Do Not Mix malloc and new</a></p></li></ul></li></ul><div class="sec" id="ch_style.stl_bad_guys"><h4><span class="title">STL and Standard C++ Library's Bad Guys</span></h4><div class="sec" id="ch_style.cpp_nonstd_stl"><h5><span class="title">Non-Standard STL Classes</span></h5><ul><li><p>Don't use the <span class="nctnt ncbi-class">rope</span> class from some versions of the STL. This is a non-standard addition. If you have questions about what is/isn't in the standard library, consult the <a href="http://www.parashift.com/c++-faq-lite/big-picture.html#faq-6.12">C++ standards</a>.</p></li><li><p>The NCBI C++ Toolkit includes <span class="nctnt ncbi-class">hash_map</span>, <span class="nctnt ncbi-class">hash_multimap</span>, <span class="nctnt ncbi-class">hash_set</span>, and <span class="nctnt ncbi-class">hash_multiset</span> classes (from headers <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml/hash__map_8hpp.html">&lt;corelib/hash_map.hpp&gt;</a> and <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml/hash__set_8hpp.html">&lt;corelib/hash_set.hpp&gt;</a>). These classes are more portable than, and should be used instead of, the STL's respective <span class="nctnt ncbi-class">hash_*</span> classes.</p></li></ul></div></div><div class="sec" id="ch_style.cpp_bad_guys"><h4><span class="title">C++ Bad Guys</span></h4><div class="sec" id="ch_style.style_op_overload"><h5><span class="title">Operator Overload</span></h5><p>Do not use operator overloading for the objects where they have unnatural or ambiguous meaning. For example, the defining of <span class="nctnt ncbi-code">operator==()</span> for your class <span class="nctnt ncbi-class">"CFoo"</span> so that there exist { CFoo a,b,c; } such that <span class="nctnt ncbi-code">(a == b)</span> and <span class="nctnt ncbi-code">(b == c)</span> are <span class="nctnt ncbi-monospace">true</span> while <span class="nctnt ncbi-code">(a == c)</span> is <span class="nctnt ncbi-monospace">false</span> would be a very bad idea. It turns out that otherwise, especially in large projects, people have different ideas of what an overloaded operator means, leading to all sorts of bugs.  </p></div><div class="sec" id="ch_style.assign_copy_constr"><h5><span class="title">Assignment and Copy Constructor Overload</span></h5><p>Be advised that the default initialization <span class="nctnt ncbi-code">{CFoo foo = bar;}</span> and assignment <span class="nctnt ncbi-code">{CFoo foo; ...; foo = bar;}</span> do a member-by-member copying. This is not suitable and can be dangerous sometimes. And if you decide to overwrite this default behavior by your own code like: </p><pre><span class="nctnt-pre ncbi-code">class CFoo {<br />    // a copy constructor for initialization<br />    CFoo(const CFoo&amp; bar) { ... }<br />    // an overloaded assignment(=) operator<br />    CFoo&amp; operator=(const CFoo&amp; bar) { if (&amp;bar != this) ... }<br />};<br /></span></pre><p>it is <b>extremely important</b> that: </p><ul><li><p><b>both</b> copy constructor and overloaded assignment be defined</p></li><li><p>they have <b>just the same</b> meaning; that is <span class="nctnt ncbi-code">{CFoo foo = bar;}</span> is equivalent to <span class="nctnt ncbi-code">{CFoo foo; foo = bar;}</span></p></li><li><p>there is a check to prevent self-assignment in your overloaded assignment operator </p></li></ul><p>In many cases when you don't want to have the assignment and copy constructor at all, just add to your class something like: </p><pre><span class="nctnt-pre ncbi-code">class CFoo {<br />    .............................<br />private:<br />    // Prohibit default initialization and assignment<br />    CFooClass(const CFooClass&amp;);<br />    CFooClass&amp; operator=(const CFooClass&amp;);<br />};<br /></span></pre></div><div class="sec" id="ch_style.no_arg_prototype"><h5><span class="title">Omitting <span class="nctnt ncbi-code">"void"</span> in a No-Argument Function Prototype</span></h5><p>Do not omit <span class="nctnt ncbi-code">"void"</span> in the prototype of a function without arguments (e.g. always write <span class="nctnt ncbi-func">"int f(void)"</span> rather than just <span class="nctnt ncbi-func">"int f()"</span>).</p></div><div class="sec" id="ch_style.malloc_new"><h5><span class="title">Do Not Mix malloc and new</span></h5><p>On some platforms, malloc and new may use completely different memory managers, so never "free()" what you created using "new" and never "delete" what you created using "malloc()". Also, when calling C code from C++ <b>always</b> allocate any structs or other items using "malloc()". The C routine may use "realloc()" or "free()" on the items, which can cause memory corruption if you allocated using "new."</p></div></div></div></div><div class="sec" id="ch_style.Source_Code_Repositories"><h2><span class="title">Source Code Repositories</span></h2><p>The following Subversion repositories have been set up for general use within NCBI:</p><div class="table" id="ch_style.T.nc_repositorypurposetoolkitc_"><table><tbody><tr><td align="left" valign="top" rowspan="1" colspan="1"><b>Repository</b></td><td align="left" valign="top" rowspan="1" colspan="1"><b>Purpose</b></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><a href="https://svn.ncbi.nlm.nih.gov/viewvc/toolkit/">toolkit</a></td><td align="left" valign="top" rowspan="1" colspan="1">C++ Toolkit (core and internal) development</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><a href="https://svn.ncbi.nlm.nih.gov/viewvc/gbench/">gbench</a></td><td align="left" valign="top" rowspan="1" colspan="1">GUI / GBENCH</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><a href="https://svn.ncbi.nlm.nih.gov/viewvc/staff/">staff</a></td><td align="left" valign="top" rowspan="1" colspan="1">individuals' projects (not parts of any official projects)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><a href="https://svn.ncbi.nlm.nih.gov/viewvc/misc_projects/">misc_projects</a></td><td align="left" valign="top" rowspan="1" colspan="1">projects not falling into any of the other categories</td></tr></tbody></table></div><p>Note for NCBI developers: Using these repositories has the additional advantages that they are:</p><ul><li><p>backed up;</p></li><li><p>partially included in automated builds and tests (along with reporting via <a href="ch_proj.html#ch_proj.inside_tests">email</a> and on the <a href="http://intranet/ieb/ToolBox/STAT/test_stat/test_stat_ext.cgi">intranet</a>) on multiple platforms and compiler configurations; and</p></li><li><p>integrated with <a href="http://jira/secure/Dashboard.jspa">JIRA</a> and <a href="http://fisheye:8008/">FishEye</a>.</p></li></ul></div><div class="sec" id="ch_style.Testing"><h2><span class="title">Testing</span></h2><p>Unit testing using the <a href="ch_boost.html">Boost Unit Test Framework</a> is strongly encouraged for libraries. Within NCBI, unit tests can be incorporated into the nightly automated testsuite by using the <span class="nctnt ncbi-macro">CHECK_CMD</span> macro in the makefile. All testsuite results are available on the <a href="http://intranet/ieb/ToolBox/STAT/test_stat/test_stat_ext.cgi">testsuite web page</a>. Users can also be automatically emailed with build and/or test results by using the <span class="nctnt ncbi-macro">WATCHERS</span> macro. Please see the chapter on <a href="ch_boost.html">Using the Boost Unit Test Framework</a> for more information.</p><p>Applications should also be tested, and shell scripts are often convenient for this purpose.</p><p>Data files used for testing purposes should be checked into SVN with the source code unless they are very large.</p></div></div></div><div class="col four_col last"><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>In this page</h3></div></div><div class="portlet_content"><ul><li><a href="#ch_style.Choice_of_Language">Choice of Language</a></li><li><a href="#ch_style.prog_style">Source Code Conventions</a></li><li><a href="#ch_style.Doxygen_Comments">Doxygen Comments</a></li><li><a href="#ch_style.style_guidelines">C++ Guidelines</a></li><li><a href="#ch_style.Source_Code_Repositories">Source Code Repositories</a></li><li><a href="#ch_style.Testing">Testing</a></li></ul></div></div><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>Download</h3></div></div><div class="portlet_content"><ul><li><a href="pdf/ch_style.pdf">PDF version of this page</a></li></ul></div></div><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>Search</h3></div></div><div class="portlet_content"><form name="frmSymbolSearch" onsubmit="return SymbolSearch('toolkit')" action="/" id="frmSymbolSearch"><table><tbody><tr align="center" valign="middle"><td colspan="2" nowrap="nowrap"><input name="__symbol" size="22" style="vertical-align:                                          middle;" onkeypress="SymbolSearchKeyPress('toolkit',event)" type="text" />   <input value="Search" style="vertical-align: middle;" onclick="javasrcipt:SymbolSearch('toolkit');" type="button" /></td></tr><tr class="internal-only"><th style="text-align:left">Public</th><th style="text-align:left">Internal</th></tr><tr><td><input id="pToolkitAll" name="__symboloc" type="radio" checked="checked" /><span title="Search in the C/C++ source code and in this Book">All</span></td><td class="internal-only"><input id="iToolkitAll" name="__symboloc" type="radio" /><span title="Search in the C/C++ source code,  this Book, and Wiki">All</span></td></tr><tr><td><input id="pLXR" name="__symboloc" type="radio" /><span title="Search the symbol in the source code using LINUX Cross-Reference browser">LXR</span></td><td class="internal-only"><input id="iLXR" name="__symboloc" type="radio" /><span title="Search the symbol in the source code using LINUX Cross-Reference browser">LXR</span></td></tr><tr><td><input id="pLib" name="__symboloc" type="radio" /><span title="Locate the Toolkit library(es) where the symbol is defined">Library</span></td><td class="internal-only"><input id="iLib" name="__symboloc" type="radio" /><span title="Locate the Toolkit library(es) where the symbol is defined">Library</span></td></tr></tbody></table></form></div></div><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>Source Browsers</h3></div></div><div class="portlet_content"><ul><li class="external-only"><a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident">LXR</a></li><li class="external-only"><a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident">Doxygen</a></li><li class="internal-only">LXR: <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident">public</a> / <a href="http://intranet.ncbi.nlm.nih.gov/ieb/ToolBox/CPP_DOC/lxr/ident">internal</a></li><li class="internal-only">Doxygen: <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml">public</a> / <a href="http://intranet.ncbi.nlm.nih.gov/ieb/ToolBox/CPP_DOC/doxyhtml">internal</a></li></ul></div></div><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>SVN Source Repository</h3></div></div><div class="portlet_content"><ul><li><a href="http://www.ncbi.nlm.nih.gov/bookshelf/br.fcgi?book=toolkit&amp;part=ch_getcode_svn#ch_getcode_svn.code_retrieval">Server</a></li><li><a href="https://svn.ncbi.nlm.nih.gov/viewvc/toolkit/trunk/c++">Web
                            (dev)</a></li><li><a href="https://svn.ncbi.nlm.nih.gov/viewvc/toolkit/trunk/internal/c++">Web
                            (extra)</a></li><li><a href="https://svn.ncbi.nlm.nih.gov/viewvc/toolkit/production/components">Web (prod)</a></li></ul></div></div><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>Resources</h3></div></div><div class="portlet_content"><ul><li class="internal-only"><a href="http://intranet.ncbi.nlm.nih.gov/wiki-private/CxxToolkit">Wiki</a></li><li class="internal-only"><a href="http://jira/browse/CXX">JIRA</a></li><li class="internal-only"><a href="http://intranet/ieb/ToolBox/STAT/test_stat/test_stat_ext.cgi"><span title="View results of testsuite runs on the automatic C++ Toolkit builds">Testsuite</span></a></li><li><a href="release_notes.html">Release Notes</a></li><li><a href="ch_getcode_svn.html#ch_getcode_svn.ftp_download">Download</a></li><li><a href="pdf/TOC.pdf">PDF of the book</a></li><li><a href="ch_style.html">Coding Style</a></li><li><a href="ch_faq.html#ch_faq.mailing_lists">Mailing Lists</a></li><li><a href="mailto:CPP-CORE@NCBI.NLM.NIH.GOV"><span title="Contact C++ Toolkit group">Help and Support</span></a></li></ul></div></div></div></div></div></div></body></html>
