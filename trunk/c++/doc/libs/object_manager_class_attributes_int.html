<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
   
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  <title>Object Manager classes - attributes and operations - internal</title>
</head>
 <body>
 
<div align="Center"> 
<h1>Object Manager.</h1>
 </div>
 
<h2>Classes - attributes and operations (internal).</h2>
<a href="#Seq_id_Handle">Seq_id_Handle and Seq_id_Mapper</a>
.<br>
 
<h3><a name="Seq_id_Handle"></a>
Seq_id_Handle and Seq_id_Mapper.</h3>
 Seq_id_Handle is an internal object, which is used as an alias (or substitute) 
to Seq_id. Seq_id_Mapper maps one to another, back and forth. The map is created
and maintained by the Object Manager. Different Object Managers have different
maps. Such map is populated by Data sources when they load and index data.<br>
 CSeq_id_Handle is designed for more efficient indexing and searching. Each 
Seq_id is mapped to a unique handle. Such handles are not aware of bio sequences 
or other ways of Seq_id usage.<br>
 
<h4>CSeq_id_Handle&nbsp; object methods:</h4>
 <code>// copy (assignment) operator</code><code><br>
 </code><b><code>CSeq_id_Handle&amp; operator= (const CSeq_id_Handle&amp; 
handle);</code></b><code><br>
 </code><code>// comparison</code><code><br>
 </code><b><code>bool operator== (const CSeq_id_Handle&amp; handle) const;</code></b><b><code><br>
 </code></b><b><code>bool operator&lt;&nbsp; (const CSeq_id_Handle&amp; handle) 
const;</code></b><b><code><br>
 </code></b><code>// Check if the handle is a valid or an empty one</code><code><br>
 </code><b><code>operator bool(void) const;</code></b><b><code><br>
 </code></b><code>// Reset the handle (remove seq-id reference)</code><code><br>
 </code><b><code>void Reset(void);</code></b><code><br>
 </code><br>
 Handles have comparison operators, which makes it possible to use them with 
STL maps, lists or sets. A newly created handle is not assigned to any Seq_id. 
Whether a handle has been initialized or not can be checked with operator 
bool(): an assigned handle will return true, while an unassigned one will 
return false.<br>
 
<h3></h3>
 
<h4>CSeq_id_Mapper&nbsp; object methods:</h4>
 <code>// Get seq-id handle. Create new handle if not found and</code><code><br>
 </code><code>// do_not_create is false. Get only the exactly equal seq-id 
handle.</code><code><br>
 </code><b><code>CSeq_id_Handle GetHandle(const CSeq_id&amp; id, bool do_not_create 
= false);</code></b><b><code><br>
 </code></b><code><br>
 </code><code>// Get the list of matching handles, do not create new handles</code><code><br>
 </code><b><code>void GetMatchingHandles(const CSeq_id&amp; id, TSeq_id_HandleSet&amp; 
h_set);</code></b><br>
 The method populates the "h_set" container with handles for all seq-ids
matching to the "id". E.g. if "id" contains accession "A" without version
information, the set may be populated with all of "A", "A.1", "A.2" etc.
Special rules may be applied to some seq-id types (e.g. GenBank, EMBL and
DDBJ ids share the same accession space and are searched together). No new
handles are created for the "id".<br>
 <br>
 <code>// Get the list of string-matching handles, do not create new handles</code><code><br>
 </code><b><code>void GetMatchingHandlesStr(string sid, TSeq_id_HandleSet&amp; 
h_set);</code></b><br>
 The method populates the "h_set" with handles for all seq-ids, containing 
"sid" string in their key fields (accession, name, integer id corresponding 
to the string value etc.).<br>
 <br>
 <code>// Get seq-id for the given handle</code><code><br>
 </code><b><code>static const CSeq_id&amp; GetSeq_id(const CSeq_id_Handle&amp; 
handle);</code></b><b><code><br>
 </code></b><code><br>
 </code><code>// References to each handle must be tracked to re-use their 
values</code><code><br>
 </code><b><code>void AddHandleReference(const CSeq_id_Handle&amp; handle);</code></b><b><code><br>
 </code></b><b><code>void ReleaseHandleReference(const CSeq_id_Handle&amp; 
handle);</code></b><br>
 <br>
 Internally each handle maps to an integer value (key), mapped to a Seq_id. 
Keys may be re-used when there is no client using a particular seq-id handle. 
The keys are locked and released by groups, the total number of groups is 
defined by kKeyUsageTableSize constant. When all keys in a group are released, 
the whole group of keys may be used to map other seq-ids. This may result 
in obtaining different handles (keys) for the same id or getting the same 
handle for different seq-ids. To avoid such misbehavior AddHandleReference() 
and ReleaseHandleReference() methods of CSeq_id_Mapper must be used.<br>
 <br>
 
</body>
</html>
