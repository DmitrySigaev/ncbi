<!-- $Id$ -->
<!--#set var="TITLE" value="NCBI C++ Toolkit:  CVS Retrieval" -->
<!--#set var="HEADING" value="CVS Source Code Retrieval" -->
<!--#set var="DOCROOT" value="." -->
<!--#include virtual="./ssi/header.shtml" -->

<!--  Page Contents -->
<a name="ref_CVSTop"></a>
<b>Path to the NCBI C++ Toolkit's CVS Repository:</b>&nbsp <font size=+1><span class="ncbi_cvs_path">$CVSROOT/internal/c++</span></font>
<font size=-1><br>
Note 1:  Some links on this page will be non-functional outside of NCBI.
<br>
Note 2:  For a detailed description of the CVS utility see <a href="http://www.cs.utah.edu/csinfo/texinfo/cvs/cvs_toc.html">
the CVS online manual</a> or run the commands <nobr><span class="ncbi_cmd">"man cvs"</span></nobr> or <nobr><span class="ncbi_cmd">"cvs --help"</span></nobr>
on your Unix workstation.
</font>

<p></p>
Select the instructions appropriate for your <em>development</em> environment.

<p></p>
<ul>
  <li><a href="#ref_Overview">NCBI CVS Tree Contents</a></li>
  <li><a href="#ref_CVSUnix"> CVS Retrieval under Unix</a> </li>
  <ul>
    <li>CVS Retrieval of C++ Toolkit</li>
      <ul>
        <li><a href="#ref_CheckoutAll"> Checking Out the Complete NCBI C++ Toolkit Source Tree </a></li>
        <li>
          <a href="#ref_CVS_Core"> <span class="ncbi_script">cvs_core.sh</span> </a>:  Retrieve Only the Toolkit's Portable and Core Components
          <ul>
            <li><a href="#ref_CVS_CoreFlags"> Arguments</a></li>
            <li><a href="#ref_CVS_CoreContents"> Contents of the Portable Core</a></li>
            <li><a href="#ref_CVS_CoreOptions">Supplement Contents Using the <span class="ncbi_script">cvs_core.sh</span> Options</a></li>
            <li><a href="cvs_core_msvc.html">MSVC++-Related Options</a></li>
          </ul>
        </li>
        <li><a href="#ref_Import_Project"><span class="ncbi_script">import_project.sh</span></a>:  Retrieve an Existing Project</li>
        <li><a href="#ref_Update_Core"><span class="ncbi_script">update_core.sh</span></a>:  Update the Portable and Core Components</li>
        <li><a href="#ref_Update_Projects"><span class="ncbi_script">update_projects.sh</span></a>:  Update Source for Specific Projects</li>
      </ul>
    <li>New Projects and New Modules <em>does not require</em> CVS!</li>
      <ul>
        <li><a href="#ref_New_Project"><span class="ncbi_script">new_project.sh</span> </a>:  Starting a New Project Outside the C++ Toolkit Tree</li>
        <li><a href="#ref_Create"> Creating a New Project Inside the C++ Toolkit Tree</a></li>
        <li><a href="#ref_NewModule">Template Source Files for New Modules</a></li>
      </ul>
    </li>
    <li>

<!-- NOTE:  not using SSI 'if expr' directives to disable links in order to minimize 
                the use of server-specific regex outside the ssi files themselves -->
                
      CVS-Related Shell Script Reference</li>
      <ul>
        <li><span class="ncbi_script">cvs_core.sh</span> &nbsp; [<a href="scripts_usage.html#ref_CVS_CoreUsage">Usage</a> | <a href="./lxr/source/scripts/cvs_core.sh">Source</a> (NCBI only)]</li>
        <li><span class="ncbi_script">import_project.sh </span> &nbsp; [<a href="scripts_usage.html#ref_Import_ProjectUsage">Usage</a> | <a href="./lxr/source/scripts/import_project.sh">Source</a> (NCBI only)]</li>
        <li><span class="ncbi_script">update_core.sh </span> &nbsp; [<a href="scripts_usage.html#ref_Update_CoreUsage">Usage</a> | <a href="./lxr/source/scripts/update_core.sh">Source</a>]</li>
        <li><span class="ncbi_script">update_projects.sh </span> &nbsp; [<a href="scripts_usage.html#ref_Update_ProjectsUsage">Usage</a> | <a href="./lxr/source/scripts/update_projects.sh">Source</a>]</li>
        <li><span class="ncbi_script">new_project.sh </span> &nbsp; [<a href="scripts_usage.html#ref_New_ProjectUsage">Usage</a> | <a href="./lxr/source/scripts/new_project.sh">Source</a>]<br>
            <font size=-1>(Note:  you <em>do not need</em> access to a CVS repository to use <span class="ncbi_script">new_project.sh</span>.)</font>
        </li>
      </ul>
    </ul>
  </li>
  <li><a href="win_cvs.html"> CVS Retrieval under MS Windows </a></li>
    <ul>
      <li>CVS-Related Shell Script Reference</li>
        <ul>
          <li><span class="ncbi_script">cvs_core.bat</span> (Windows) &nbsp;[Usage | <a href="./lxr/source/scripts/cvs_core.bat">Source</a> (NCBI only)] </li>
        </ul>
      </li>
    </ul>
  <li><a href="mac_cvs.html"> CVS Retrieval under Mac OS </a></li>
</ul>

<hr>

<a name="ref_Overview"></a>
<h3>NCBI CVS Tree Contents <font size=-2><span class=nava>[<a href="#ref_CVSTop">Top</a>]</span></font></h3>

The NCBI C++ Toolkit CVS repository contains all source code, scripts, utilities, tools,
tests and documentation required for a variety of builds (e.g., "Debug" and "Release"
versions of the Toolkit) under the major classes of operating system (<span class="ncbi_os">Unix</span>, <span class="ncbi_os">MS Windows</span> and <span class="ncbi_os">Mac OS</span>).
The CVS tree has the same global and project-level
organization of the <a href="src_tree.gif">source tree</a> yet contains the code
needed for all supported builds.

<hr>

<a name="ref_CVSUnix"></a>
<h3>CVS Retrieval under Unix <font size=-2><span class=nava>[<a href="#ref_CVSTop">Top</a>]</span></font></h3>
CVS client installation instructions are available on separate pages
for <a href="win_cvs.html"><span class="ncbi_os">MS Windows</span></a> and <a href="mac_cvs.html"><span class="ncbi_os">Mac OS</span></a> systems.

<p>
<br>
<a name="ref_Checkout"></a>
<a name="ref_CheckoutAll"></a>
<h4>Checking Out the Complete NCBI C++ Toolkit Source Tree <font size=-2><span class=nava>[<a href="#ref_CVSTop">Top</a>]</span></font></h4>

You can checkout the whole NCBI C++ source tree from CVS to your local
directory (e.g., <span class="ncbi_dir">foo/c++/</span>) just by running:

<pre class="ncbi_cmd">
cd foo
cvs checkout -d c++ internal/c++
</pre>

<p>
However, the whole NCBI C++ tree is very big because it contains a lot
of internal user projects. There are also numerous platform-specific
files (and even whole sub-trees) which you will never need unless you
work on other platforms.  Therefore it is frequently sufficient (and in fact, usually
advisable) to retrieve only those files of direct interest using the shell scripts
in the <span class="ncbi_dir">$NCBI/c++/scripts</span> directory.

<p>
The auxiliary scripts <a href="#ref_CVS_Core"><span class="ncbi_script">cvs_core.sh</span></a> and
<span class="ncbi_script">cvs_core.bat</span> checkout only the core
(basic and portable) NCBI C++ Toolkit sources for a desired platform.  A similar auxiliary
script exists to import the source from a single project (<a href="#ref_Import_Project"><span class="ncbi_script">import_project.sh</span></a>).  To facilitate the creation of a new project, use the script
(<a href="#ref_New_Project"><span class="ncbi_script">new_project.sh</span></a>), which
generates new directories and makefiles for the new project from templates.
The script also checks out a specified sample application
from the CVS tree that may be adapted for the new project or built
directly as a demonstration.

<p>
<br>

<hr>

<div id="cvs_core">
<a name="ref_CVS_Core"></a>
<h4><span class="ncbi_script">cvs_core.sh</span>:  Retrieve Only the Portable and Core Components <font size=-2><span class=nava>[<a href="#ref_CVSTop">Top</a>]</span></font></h4>

<dl>
    <dd>
<a href="scripts_usage.html#ref_CVS_CoreUsage">Usage</a> Summary <font size="-1"><a href="#ref_PathNote">(path note)</a></font>:
<p class="ncbi_cmd">cvs_core.sh &lt;dir&gt; [--with-&lt;feature&gt;]... [--without-&lt;feature&gt]... [--&lt;platform&gt;]</p>

<p>Default settings:
<p class="ncbi_cmd">cvs_core.sh  &lt;dir&gt; --with-cvs --with-ctools --with-gui --all</p>
    </dd>
    <dt>For the major three platforms, here is a typical invokation for "core" source retrieval:
    <dd>
<table border="0">
  <tr>
    <td><span class="ncbi_os">Unix</span>:</td>
    <td><span class="ncbi_cmd">cvs_core.sh  &lt;dir&gt; --unix</span></td>
  </tr><tr>
    <td><span class="ncbi_os">MS-Win</span>:</td>
    <td><span class="ncbi_cmd">cvs_core.sh  &lt;dir&gt; --msvc --with-objects --without-dizzy</span></td>
  </tr><tr>
    <td><span class="ncbi_os">MacOS</span>:</td>
    <td><span class="ncbi_cmd">cvs_core.sh  &lt;dir&gt; --mac --with-objects</span></td>
  </tr>
</table>
        </dd>
</dl>

<p>
The NCBI C++ Toolkit CVS repository contains the source for many features and extension beyond the
core of portable functionality.  Often one wants to obtain a set of Toolkit sources that are free
of the non-portable elements, and the <span class="ncbi_script">cvs_core.sh</span> script performs this task across the
range of supported platforms.  Options to the basic command allow the developer to further tailor
the retrieved source by including (or excluding) portions of the Toolkit not checked out by default.

<p>
<dl>
    <dt> <a name="ref_PathNote"></a>Path note for scripts:
    <dd> If the Toolkit is installed on your machine at $NCBI, these scripts should
        be invoked as:<span class="ncbi_script">$NCBI/c++/scripts/&lt;script_name&gt;</span> if
        that directory is not in your <span class="ncbi_env">$PATH</span>.</dd>
</dl>

<p>
<a name="ref_CVS_CoreFlags"></a>
<h4><span class="ncbi_script">cvs_core.sh</span>  Arguments <font size=-2><span class=nava>[<a href="#ref_CVSTop">Top</a>]</span></font></h4>

The following summarizes the arguments of <span class="ncbi_script">cvs_core.sh</span>,
along with their default values.  Only
the target directory is mandatory.  The optional <span class="ncbi_script_a">--with/without-&lt;feature&gt</span> argument pairs include
or exclude portions of the Toolkit from the checked-out source.  While both members of the pair may appear
on the command line, only the final one controls the script's behavior.  Certain settings are
meaningful only for certain <span class="ncbi_script_a">&lt;platform&gt;</span>s (most often with respect to MS Windows platforms).

<p>&nbsp;
<p>
<table border=1 cellspacing=0>
<caption><font size=+1><span class="ncbi_script">cvs_core.sh</span>Arguments</font></caption>
  <tr>
     <th>Argument</th>
     <th>Description</th>
     <th>Permitted Values</th>
  </tr>

  <tr>
     <td><span class="ncbi_script_a">&lt;dir&gt;</span></td>
     <td>Path to where tree will be checked out; <em>required</em></td>
     <td>Valid writable directory name (cannot exist already);<br>name cannot start with "-"</td>
  </tr>

  <tr>
     <td><span class="ncbi_script_a">&lt;platform&gt;</span></td>
     <td>Obtain sources for the specified platform(s).</td>
     <td><i>unix</i> &nbsp;&nbsp;(Unix systems)<br>
         <i>msvc</i> &nbsp;&nbsp;(for Microsoft Visual C++ environment)<br>
         <i>mac</i> &nbsp;&nbsp;&nbsp;(Macintosh systems)<br>
         <i>cygwin</i> (Red Hat's Cygwin UNIX environment for MS Windows)<br>
         <i>all</i> &nbsp;&nbsp;&nbsp;(all systems)<br>
         <b><i>default:  all</i></b></td>
  </tr>

  <tr>
     <td><span class="ncbi_script_a">--with-cvs</span></td>
     <td>Include CVS-related directories in the resultant tree.</td>
     <td><b><i>default:  ON</i></b></td>
  </tr>

  <tr>
     <td><span class="ncbi_script_a">--without-cvs</span></td>
     <td>Exclude CVS-related directories from the resultant tree.</td>
     <td><i>default:  OFF</i></td>
  </tr>

  <tr>
     <td><span class="ncbi_script_a">--with-objects</span></td>
     <td>Generate ASN.1 serialization code in the <span class="ncbi_dir">objects/</span> directory.</td>
     <td><i>default:  OFF</i><br>(Unix platforms:  the code generation can be done later, during the build)<br>
         <font size=-1>(Note: <span class="ncbi_dir">objects/</span> is always checked out unless explicitly turned off by setting the <span class="ncbi_script_a">--without-objects</span> switch)</font></td>
  </tr>

  <tr>
     <td><span class="ncbi_script_a">--without-objects</span></td>
     <td>Do not check out the <span class="ncbi_dir">objects/</span> directory or generate ASN.1 serialization code.</td>
     <td><i>default:  OFF</i><br><font size=-1>(Note:  unless explicitly turned off by providing this argument, <span class="ncbi_dir">objects/</span> is always checked out )</font></td>
  </tr>

  <tr>
     <td><span class="ncbi_script_a">--with-ctools</span></td>
     <td>Checkout core projects responsible for working together with the NCBI C Toolkit.</td>
     <td><b><i>default:  ON</i></b></td>
  </tr>

  <tr>
     <td><span class="ncbi_script_a">--without-ctools</span></td>
     <td>Do not checkout core projects responsible for working together with the NCBI C Toolkit.</td>
     <td><i>default:  OFF</i></td>
  </tr>

  <tr>
     <td><span class="ncbi_script_a">--with-gui</span></td>
     <td>Checkout projects that depend on wxWindows.</td>
     <td><b><i>default:  ON</i></b></td>
  </tr>

  <tr>
     <td><span class="ncbi_script_a">--without-gui</span></td>
     <td>Do not checkout projects that depend on wxWindows.</td>
     <td><i>default:  OFF</i></td>
  </tr>

  <tr bgcolor="#ccccff">
     <td colspan="3" align="center"><b>The following have an affect only for <span class="ncbi_script_a">&lt;platform&gt;={msvc,all}</span></b></td>
  </tr>

  <tr>
     <td><span class="ncbi_script_a">--with-vc-cfgs<br>[=&lt;selection&gt;]</span></td>
     <td>Get multi-configuration Microsoft Visual C++ project files.</td>
     <td> <i>all</i> &nbsp;&nbsp;(get all project files)<br>
          <i>inhouse</i> &nbsp;&nbsp;(get only the NCBI inhouse project files)<br>
          <i>none</i> &nbsp;&nbsp;(get no project files)<br>
          <b><i>default:  all</i></b></td>
  </tr>

  <tr>
     <td><span class="ncbi_script_a">--without-vc-cfgs</span></td>
     <td>Do not get multi-configuration Microsoft Visual C++ project files.</td>
     <td><i>Default:  OFF</i><br>
          (<b><i>ON</i></b> is the same as <span class="ncbi_script_a">--with-vc-cfgs=none</span>)<br>
          <font size=-1>Note:  <span class="ncbi_script_a">--without-vc-cfgs</span> is not compatible with <span class="ncbi_script_a">--without-dizzy</span></font></td>

  </tr>

  <tr>
     <td><span class="ncbi_script_a">--with-dizzy</span></td>
     <td>Retain paths to <span class="ncbi_dir">\\DIZZY\</span> in Microsoft Visual C++ project files.</td>
     <td><i>default:  OFF</i></td>
  </tr>

  <tr>
     <td><span class="ncbi_script_a">--without-dizzy</span></td>
     <td>Remove paths to <span class="ncbi_dir">\\DIZZY\</span> in Microsoft Visual C++ project files.</td>
     <td><i>default:  OFF</i><br>
          <font size=-1>Note:  <span class="ncbi_script_a">--without-dizzy</span> is not compatible with <span class="ncbi_script_a">--without-vc-cfgs</span></font></td>
  </tr>
</table>

<p>
<br>
<a name="ref_CVS_CoreContents"></a>
<h4>Contents of the Portable Core Source Tree <font size=-2><span class=nava>[<a href="#ref_CVSTop">Top</a>]</span></font></h4>

In this section, all paths and filenames are in the CVS tree and unless otherwise specified, should
be taken as relative to the common root <span class="ncbi_cvs_path">$CVSROOT/internal/c++</span>.

<dl>
    <dt>Common Source</dt>
    <dd>The following are always recursively checked out, regardless of the arguments to <span class="ncbi_script">cvs_core.sh</span>:
        <p></p>
        <table border=0 cellspacing=5>
        <tr>
            <td><span class="ncbi_dir">doc</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_dir">include/corelib</span></td>
            <td><span class="ncbi_dir">src/corelib</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_dir">include/connect</span></td>
            <td><span class="ncbi_dir">src/connect/test</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_dir">include/serial</span></td>
            <td><span class="ncbi_dir">src/serial</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_dir">include/cgi</span></td>
            <td><span class="ncbi_dir">src/cgi</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_dir">include/html</span></td>
            <td><span class="ncbi_dir">src/html</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_dir">include/util</span></td>
            <td><span class="ncbi_dir">src/util</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_dir">include/hello</span></td>
            <td><span class="ncbi_dir">src/hello</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_dir">include/app</span></td>
            <td><span class="ncbi_dir">src/app</span></td>
        </tr>
        </table>
    </dd>
</dl>

<p>
<br>
<a name="ref_CVS_CoreOptions"></a>
<h4>Supplement Contents Using the <span class="ncbi_script">cvs_core.sh</span> Options <font size=-2><span class=nava>[<a href="#ref_CVSTop">Top</a>]</span></font></h4>

<dl>
    <dt>Platform-Specific Source</dt>
    <dd>In addition to the above common source, the various <span class="ncbi_script_a">&lt;platform&gt;</span> options will
    populate the remainder of the checked-out CVS source tree differently.  At present a
    laundry-list for each platform option is not provided here, however you may view the
    <a href="./lxr/source/scripts/cvs_core.sh">source</a> to examine the most current status.
    In general, the platform and argument-sensitive parts of the source reside in the following
    directories.

        <p></p>
        <table border=0 cellspacing=0>
        <tr>
            <td><span class="ncbi_dir">compilers</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_dir">connect/daemons</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_dir">connect/mitsock</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_dir">include/dbapi</span></td>
            <td><span class="ncbi_dir">src/dbapi</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_dir">scripts</span></td>
        </tr>
        </table>
    <p></p>
    </dd>

    <dt>Feature-Specific Source</dt>
    <dd>The <span class="ncbi_script_a">--with/--without-&lt;feature&gt;</span> options enable or inhibit portions of the CVS tree
    from being included in the checked-out out source tree.  Consult the list below to identify where a
    certain option affects the source tree.

        <p></p>
        <table border=0 cellspacing=5>
        <tr>
            <th align="left">Feature&nbsp;&nbsp;</th>
            <th align="left">Affected Directories</th>
        </tr>
        <tr>
            <td><span class="ncbi_script_a">cvs</span></td>
            <td><span class="ncbi_dir">*/CVS</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_script_a">ctools</span></td>
            <td><span class="ncbi_dir">include/ctools, src/ctools, compilers</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_script_a">dizzy</span></td>
            <td><span class="ncbi_dir">compilers</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_script_a">gui</span></td>
            <td><span class="ncbi_dir">include/gui, src/gui, compilers</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_script_a">objects</span></td>
            <td><span class="ncbi_dir">include/objects/*, src/objects/*, compilers, scripts, src</span></td>
        </tr>
        <tr>
            <td><span class="ncbi_script_a">vc-cfgs</span></td>
            <td><span class="ncbi_dir">compilers</span></td>
        </tr>
        </table>
    <p></p>
    </dd>
</dl>
</div>

<hr>

<div id="import_project">
<p>
<a name="ref_OutsideImport"></a>
<a name="ref_Import_Project"></a>
<h4><span class="ncbi_script">import_project.sh</span>:  Retrieve Source for an Existing Project <font size=-2><span class=nava>[<a href="#ref_CVSTop">Top</a>]</span></font></h4>

<dl>
    <dt>
    <dd>
<a href="scripts_usage.html#ref_Import_ProjectUsage">Usage</a> Summary <font size="-1"><a href="#ref_PathNote">(path note)</a></font>:<br>
<p class="ncbi_cmd">import_project.sh &lt;cvs_tree_path&gt; [builddir]</p>
    </dd>
</dl>

<p>
In many cases, you work on your own project which is a part of the
NCBI C++ tree, and you do not want to check out, update and rebuild
the whole NCBI C++ tree. -- Instead, you just want to use headers and
libraries of the pre-built NCBI C++ Toolkit to build your project.

<p>
The shell script <span class="ncbi_script">import_project.sh</span> will checkout
your project's <span class="ncbi_dir">src</span> and <span class="ncbi_dir">include</span> directories from CVS, and it will create a (temporary) makefile based on the project's
<a href="get_started.html#ref_MakefileTemplates">customized makefile</a>.
This makefile will also contain a reference to the pre-built NCBI C++ Toolkit.

<p>
For <a href="new_project.import.session">EXAMPLE</a>:

<pre class="ncbi_cmd">
   import_project.sh hello
</pre>

<br>
will check out the whole <span class="ncbi_proj">hello</span> demo project from the NCBI C++ tree
(<span class="ncbi_dir">internal/c++/{src,include}/hello/</span>), and create a
makefile <span class="ncbi_file">Makefile.hello_app</span> that uses the project's
customized makefile <span class="ncbi_file">Makefile.hello.app</span>.
Now you can just go to the created working directory
<span class="ncbi_dir">internal/c++/src/hello/</span> and build the demo application
<span class="ncbi_cgi">hello.cgi</span> using:

<pre class="ncbi_cmd">
   make -f Makefile.hello_app
</pre>
</div>

<hr>

<div id="update_core">
<p>
<a name="ref_Update_Core"></a>
<h4><span class="ncbi_script">update_core.sh</span>:  Update the Portable and Core Components <font size=-2><span class=nava>[<a href="#ref_CVSTop">Top</a>]</span></font></h4>

<dl>
    <dt>
    <dd>
<a href="scripts_usage.html#ref_Update_CoreUsage">Usage</a> Summary <font size="-1"><a href="#ref_PathNote">(path note)</a></font>:<br>
<p class="ncbi_cmd">update_core.sh [--no-projects] [&lt;dirs&gt;]</p>
    </dd>
</dl>

<p>
Once you have obtained the core C++ Toolkit sources, with <span class="ncbi_script">cvs_core.sh</span> or otherwise,
the local copies will become out of sync with the master CVS repository contents when other
developers commit their changes.  <span class="ncbi_script">update_core.sh</span> will update your local core source tree
with any changed files without the side-effect of simultaneously checking out non-core portions of the
tree.  Subdirectories <span class="ncbi_dir">*/CVS</span> and <span class="ncbi_dir">*/internal</span> do not get updated by this script.

<p>
The <span class="ncbi_script_a">--no-projects</span> switch excludes any <span class="ncbi_os">Windows</span> or <span class="ncbi_os">MacOS</span> project files from the update.
Specifically, those subdirectory names of the form <span class="ncbi_dir">*_prj</span> are skipped during the update
when this flag is set.

<p>
The list <span class="ncbi_script_a">[&lt;dirs&gt;]</span>, when present, identifies the set of directories relative to
the current directory to update.  The default list of updated directories is:
<ul>
<li><span class="ncbi_dir">.</span></li>
<li><span class="ncbi_dir">compilers</span></li>
<li><span class="ncbi_dir">doc</span></li>
<li><span class="ncbi_dir">include</span></li>
<li><span class="ncbi_dir">scripts</span></li>
<li><span class="ncbi_dir">src</span></li>
</ul>

Note that the default list is not pushed onto a user-supplied list of directories.
<p>
</div>

<hr>

<div id="update_projects">
<p>
<a name="ref_Update_Projects"></a>
<h4><span class="ncbi_script">update_projects.sh</span>:  Update Source for Specific Projects <font size=-2><span class=nava>[<a href="#ref_CVSTop">TOP</a>]</span></font></h4>

<dl>
    <dt>
    <dd>
<a href="scripts_usage.html#ref_Update_ProjectsUsage">Usage</a> Summary <font size="-1"><a href="#ref_PathNote">(path note)</a></font>:<br>
<p class="ncbi_cmd">update_projects.sh &lt;project-list&gt; [&lt;directory&gt;]</p>
    </dd>
</dl>

<p>
The script <span class="ncbi_script">update_projects.sh</span> facilitates work with those projects not in
the core C++ tree.  Because the source code and makefiles are distributed in more
than one subdirectory of $CVSROOT<span class="ncbi_dir">/internal/c++</span>, this script assembles
the set of required files and places them in your local C++ source tree.

<p>
<br>
The list of projects to obtain and/or update appear in <span class="ncbi_script_a">&lt;project-list&gt;</span>, formatted according
to the simple <a href="config.html#ref_ProjectList">syntax
used by the configure script</a>.   Project aliases and influencing how CVS recurses into subdirectories
are among the options available.

<p>
<br>
This script supports two modes of operation:
<ol>
    <li>
    <dl><dt>New C++ Source Tree</dt>
        <dd>
                If you specify a directory name, it will create the directory if
                necessary and check the specified portion of the C++ tree out into
                it, along with any additional infrastructure needed for the build
                system to work.  (If the directory already exists, it must be
                empty.)  It will then optionally configure and build the new tree.
        </dd>
    </dl>
    <p></p>
    </li>

    <li>
    <dl><dt>C++ Source Tree Exists</dt>
        <dd>
        If you run it from the top level of an existing checkout of the
        C++ source tree, it will update the sources and headers for the
        specified projects.  It will then optionally reconfigure and
                rebuild the tree.
        </dd>
    </dl>
    <p></p>
    </li>
</ol>
<br>
In either mode, if <span class="ncbi_script_a">&lt;project-list&gt;</span> contains neither a
directory nor an extension, the script will add the extension
<span class="ncbi_file">.lst</span> and look in the "system" directory -- which is either
<span class="ncbi_dir">internal/projects</span> subdir of
<span class="ncbi_script">update_projects.sh</span>'s dir or (if no such dir exists)
<span class="ncbi_dir">$NCBI/c++/scripts/internal/projects</span>.
</div>

<hr>

<a name="ref_New_Project"></a>
<h3>New Projects and New Modules <font size=-2><span class=nava>[<a href="#ref_CVSTop">Top</a>]</span></font></h3>

<p>
A more complete discussion of how to begin a new project can be found on the <a href="new_proj.html">"New Projects"</a> page.

<p>
<a name="ref_OutsideCreate"></a>
<h4><span class="ncbi_script">new_project.sh</span>:  Starting a New Project Outside the C++ Toolkit Tree <font size=-2><span class=nava>[<a href="#ref_CVSTop">Top</a>]</span></font></h4>

<dl>
    <dt>
    <dd>
<a href="scripts_usage.html#ref_New_ProjectUsage">Usage</a> Summary <font size="-1"><a href="#ref_PathNote">(path note)</a></font>:<br>
<p class="ncbi_cmd">new_project.sh &lt;name&gt; &lt;type&gt; [builddir]</p>
    </dd>
</dl>

<p>
This script will create a startup makefile for a new, from-scratch
project called <span class="ncbi_script_a">"name"</span> which uses the NCBI C++ Toolkit (and possibly the C Toolkit as
well).  For new libraries, <span class="ncbi_script_a">type=lib</span> while for new applications <span class="ncbi_script_a">type=app</span>.

<p>
Sample code will be included in the project directory for new applications.  Different samples
are available for <span class="ncbi_script_a">type=app[/basic]</span> (a command-line argument demo application based
on the <a href="libs.html#ref_SumXNCBI"><span class="ncbi_lib">corelib</span></a> library),
<span class="ncbi_script_a">type=app/cgi</span> (for a <a href="libs.html#ref_SumXCGI">CGI or Fast-CGI</a> application),
<span class="ncbi_script_a">type=app/objmgr</span> (for an application using the <span class="ncbi_term">Object Manager</span>) and <span class="ncbi_script_a">type=app/objects</span>
(for an application using ASN.1 objects).

<p></p>
You will need to slightly edit the resultant makefile to:
<ul>
  <li> specify the name of your library (or application)
  <li> specify the list of source files going to it
  <li> modify some preprocessor, compiler, etc.  flags, if needed
  <li> modify the set of additional libraries to link to it
       (if it's an application), if needed
</ul>


<p>
For <a href="new_project.create.session"> EXAMPLE</a>:

<pre class="ncbi_cmd">
   new_project.sh foo app/basic
</pre>

<br>
creates a model makefile <span class="ncbi_file">Makefile.foo_app</span> to build
an application using tools and flags hard-coded in <span class="ncbi_file">$NCBI/c++/Debug/build/Makefile.mk</span>,
and headers from <span class="ncbi_dir">$NCBI/c++/include/</span>.  The file <span class="ncbi_file">/tmp/foo/foo.cpp</span> is
also created; you can either replace this with your own <span class="ncbi_file">foo.cpp</span> or modify its sample
code as required.

<p></p>
Now, after specifying the application name, list of source files, etc.,
you can just go to the created working directory <span class="ncbi_dir">foo/</span> and build your application using:

<pre class="ncbi_cmd">
   make -f Makefile.foo_app
</pre>

<p>
You can easily change the active version of NCBI C++ Toolkit
by manually setting variable <span class="ncbi_make_var">$(builddir)</span> in the file
<span class="ncbi_file">Makefile.foo_app</span> to the desired Toolkit path, e.g.,
<span class="ncbi_make_var">builddir = $(NCBI)/c++/GCC-Release/build</span>

<p>
<br>
<a name="ref_Create"></a>
<h4>Creating a New Project Inside the C++ Toolkit Tree</a> <font size=-2><span class=nava>[<a href="#ref_CVSTop">Top</a>]</span></font></h4>

<p>
To create your new project (e.g., "bar_proj") directories in the
NCBI C++ Toolkit CVS tree (assuming that the whole NCBI C++ has been
<a href="#ref_Checkout">checked out</a> to directory <span class="ncbi_dir">foo/c++/</span>):

<font size="-1">
<pre class="ncbi_cmd">
    cd foo/c++/include && mkdir bar_proj && cvs add -m "Project Bar" bar_proj
    cd foo/c++/src     && mkdir bar_proj && cvs add -m "Project Bar" bar_proj
</pre>
</font>

From there, you can now <a href="new_mod.html">add</a> and edit your project C++ files.

<p>
NOTE: remember to add this new project directory to the <span class="ncbi_make_var">$(SUB_PROJ)</span>
list of the upper level <a href="makefiles.html#ref_MakefilesMeta">meta-makefile</a>
configurable template (e.g., for this particular case, to
<span class="ncbi_file">foo/c++/src/Makefile.in</span>).

<p>
<br>
<a name="ref_NewModule"></a>
<h4>Template Source Files for New Modules <font size=-2><span class=nava>[<a href="#ref_CVSTop">Top</a>]</span></font></h4>

<p>
Projects in the NCBI C++ Toolkit are composed of "modules".  In turn, a module is a basic
logical unit of organization for the source.  Usually, each C++ module consists of 2 files:

<ul>
  <li>
    <a href="framewrk.hpp">Header file(*.hpp)</a> --
    API for the external users.  Ideally, this file contains only
    (well-commented) declarations and inline function implementations for the public interface.
    No less, and no more.
  <li>
    <a href="framewrk.cpp">Source file(*.cpp)</a> --
    Definitions of non-inline functions and internally used things that
    should not be included to other modules.
</ul>

Each and every source file <em>must</em> include NCBI disclamer and (preferably)
CVS info. Then, the header file must be protected from double-includes.

<p>
The standard source templates <a href="framewrk.cpp">*.cpp</a> and <a href="framewrk.hpp">*.hpp</a>
allow one to simply cut-and-paste to start a new C++ file
(just dont forget to replace the "framewrk" stubs by your new module
name).  You may also use the samples checked out by <a href="#ref_New_Project"><span class="ncbi_script">new_project.sh</span></a>
as source file templates.

<!--#include virtual="./ssi/navlinks.shtml" -->

<table BORDER=0 CELLSPACING=0 WIDTH="100%" >
<script>
<!--
print_author('cpp-core', 'Denis Vakatov', '$Date$', 'ncbi.nlm.nih.gov');
print_author('cpp-core', 'Eugene Vasilchenko');
print_author('cpp-core', 'Anton Lavrentiev');
print_author('cpp-core', 'Diane Zimmerman');
print_author('cpp-core', 'Lewis Geer');
print_author('cpp-core', 'Chris Lanczycki');
// -->
</script>
</table>

<!--#include virtual="./ssi/footer.shtml" -->
