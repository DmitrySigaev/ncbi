<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>Installation and configuration</title>
  </head>

  <body>
	 <h1>Installation and configuration</h1>



	 <ul>
		<li> <a href="#ref_Source">NCBI C++ source code</a>
		<li> <a href="#ref_Ncbiconf">NCBI C++ configuration header "ncbiconf.h"</a>
		<li> <a href="#ref_Autoconf">Using "autoconf" utilities</a>
		<li> <a href="#ref_PreGen">Pre-generated configuration headers</a>
		<li> <a href="#ref_Compilers">List of supported compilers</a>
	 </ul>


	 <br></br>
	 <a name="ref_Source"><h2>NCBI C++ source code</h2></a>

	 <p>
	 The NCBI C++ source code can be obtained from internal NCBI
	 CVS tree(<i><b>"$CVSROOT/internal/cpp/"</b></i>) or
	 from a distribution archive. In either case, the root directory will
	 contain:
	 <ul>
		<li> <i><b>"doc/"</b></i> directory. -- 
		Here go the generic NCBI C++ documentation, manuals(e.g. including
		this one <i>"doc/config.html"</i>) and guidelines for
		<b>everybody</b> writing on C++ in NCBI SWG.

		<li> <i><b>"projects/"</b></i> directory. --
		It contains subdirectories for NCBI C++ projects(e.g. <i>"project/corelib/"</i>).
		For a more detailed information on the project directory structure, etc.
		see in
		<a href="new_proj.html">Starting new C++ project</a>.

		<li>
		<a href="http://sunland.gsfc.nasa.gov/info/autoconf/Top.html">autoconf</a>
		-related files used to <a href="#ref_Autoconf">configure</a>
		the NCBI C++ package, and
		<a href="#ref_PreGen">pre-generated configuration headers</a>
		as described beneath.
	 </ul>


	 <br></br>
	 <a name="ref_Ncbiconf"><h2>NCBI C++ configuration header <i>"ncbiconf.h"</i></h2></a>

	 <p>
	 Each and every NCBI C++ header files will include a
	 platform(compiler)-specific header file <i>"ncbiconf.h"</i>.
	 This header defines a set of preprocessor variables that
	 help other code to determine compiler-specific "features".
	 This information is also used in other standard NCBI C++
	 header files e.g. in order to properly define NCBI C++
	 <a href="types.html#ref_IntFixed">sized integer</a> and
	 <a href="types.html#ref_BigScalar"><i>BigScalar</i></a> types.


	 <br></br>
	 <br></br>
	 <a name="ref_Autoconf"><h2>Using "autoconf" utilities</h2></a>

	 <p>
	 It is a common practice on UNIX platform to use
	 <a href="http://sunland.gsfc.nasa.gov/info/autoconf/Top.html">autoconf</a>
	 tools to automatically generate compiler-specific header files like
	 <i>"ncbiconf.h"</i> and even makefiles that would work for the given
	 platform.

	 <p>
	 Usually, an external user will generate <i>"ncbiconf.h"</i> header specific
	 for his platform by merely executing <i>"configure"</i> script
	 from this directory using "sh" command interpretator(located in
	 <i>"/bin"</i> directory on practically all UNIX systems).
	 There is also a way to run this script for PC compilers like
	 MSVC++ -- if one has a "sh"(or
	 <a href="http://www.lns.cornell.edu/public/COMP/info/bash/bashref_toc.html">"bash"</a>)
	 <a href="http://www.gci-net.com/~users/c/cteeple/windowsnttrueshells.htp">emulator for MS Windows</a>.
	 Script <i>"configure.ms5"</i> sets MSVC++-specific environment variables/paths
	 and then runs the original <i>"configure"</i> script.
	 The resultant <i>"ncbiconf.h"</i> will be automagically copied to directory
	 <i>"<b>projects/</b>corelib/include/"</i>.

	 <p>
	 You can specify the C and C++ compilers and theirs flags by setting
	 environment variables
	 <a href="http://sunland.gsfc.nasa.gov/info/autoconf/Preset_Output_Variables.html"><i>CC, CFLAGS, CXX, CXXFLAGS and CPPFLAGS</i></a> (before running the
	 <i>"configure"</i> script).
	 For example, when you want to configure for the use of version of
	 <a href="http://corp.metabyte.com/~fbp/stl/index.html">
		STL adaptation effort</a>
	 plus a string library from
	 <a href="http://corp.metabyte.com/~fbp/stl/components.html">
		Moderna Software</a>
	 installed in NCBI for WorkShop Compilers 4.2:
<pre>
(csh)
setenv CC  "cc"
setenv CXX "CC"
setenv CPPFLAGS "-I/netopt/stlport/3.01"

(sh)
CC="cc"  ;  export CC
CXX="CC" ;  export CXX
CPPFLAGS="-I/netopt/stlport/3.01" ;  export CPPFLAGS
</pre>

	 An if you are planning to use WorkShop Compilers 5.0(they have
	 a "native" implementation of Standard C++ libs):
<pre>
(csh)
setenv CC  "/netopt/SUNWspro6/bin/cc"
setenv CXX "/netopt/SUNWspro6/bin/CC"

(sh)
CC="/netopt/SUNWspro6/bin/cc"  ;  export CC
CXX="/netopt/SUNWspro6/bin/CC" ;  export CXX
</pre>

	 Hint:  we recommend to always remove "config.cache" and remove
	 (or save somewhere else) <i>"projects/corelib/include/ncbiconf.h"</i>
	 before running the <i>"configure"</i> script.
	 

	 <br></br>
	 <br></br>
	 <a name="ref_PreGen"><h2>Pre-generated configuration headers</h2></a>

	 <p>
	 For the platforms that do not have "sh"(or at least "bash") installed
	 by default we ship pre-generated(as for e.g. MSVC++ 5.0 on MS Windows)
	 or hand-made(for, maybe, Mac) configuration headers:
	 <ul>
		<li> <i>"ncbiconf.ms5"</i> -- for MSVC++ 5.0 on PC
		(generated by <i>"configure.ms5"</i>)
	 </ul>
	 

	 <br></br>
	 <a name="ref_Compilers"><h2>List of supported compilers</h2></a>

	 <p>
	 As for now, at least the following compilers give enough support
	 (as concerns to the C++ and STL implementation) to build NCBI C++
	 libraries and tools:
	 <ul>
		<li> MSVC++ 5.0 for MS Windows on PC
		<li> WorkShop Compilers 5.0 for Solaris 2.6 on Sun
		<li> WorkShop Compilers 4.2 for Solaris 2.6 on Sun(with third-party STL)
	 </ul>


	 <br></br>
	 <hr>
	 <table border=0 width="100%" cellspacing=0>
		<tr>
		  <td><address><a href="mailto:vakatov@ncbi.nlm.nih.gov">Denis Vakatov</a></address></td>
		  <td align=right>($Revision$)</td></tr>
	 </table>
  </body>
</html>
