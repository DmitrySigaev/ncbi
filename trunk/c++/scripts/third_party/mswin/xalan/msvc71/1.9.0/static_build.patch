diff -urN xml-xalan.orig/c/src/xalanc/Include/VCPPDefinitions.hpp xml-xalan/c/src/xalanc/Include/VCPPDefinitions.hpp
--- xml-xalan.orig/c/src/xalanc/Include/VCPPDefinitions.hpp	2004-12-21 00:55:46.000000000 -0500
+++ xml-xalan/c/src/xalanc/Include/VCPPDefinitions.hpp	2005-04-05 14:59:46.810995000 -0400
@@ -26,8 +26,13 @@
 //  These defines provide the platform specific keywords that they need
 //  to do this.
 // ---------------------------------------------------------------------------
+#if defined(XALAN_DLL)
 #define XALAN_PLATFORM_EXPORT     __declspec(dllexport)
 #define XALAN_PLATFORM_IMPORT     __declspec(dllimport)
+#else
+#define XALAN_PLATFORM_EXPORT
+#define XALAN_PLATFORM_IMPORT
+#endif
 #define XALAN_PLATFORM_EXPORT_FUNCTION(T) XALAN_PLATFORM_EXPORT T
 #define XALAN_PLATFORM_IMPORT_FUNCTION(T) XALAN_PLATFORM_IMPORT T
 
diff -urN xml-xalan.orig/c/src/xalanc/XPathCAPI/XPathCAPI.h xml-xalan/c/src/xalanc/XPathCAPI/XPathCAPI.h
--- xml-xalan.orig/c/src/xalanc/XPathCAPI/XPathCAPI.h	2004-12-21 00:55:57.000000000 -0500
+++ xml-xalan/c/src/xalanc/XPathCAPI/XPathCAPI.h	2005-04-05 15:12:45.815237700 -0400
@@ -20,6 +20,7 @@
 
 #if defined(_MSC_VER)
 
+#if defined(XALAN_DLL)
 #if defined(XALAN_XPATHCAPI_BUILD_DLL)
 
 #define XALAN_XPATHCAPI_EXPORT __declspec(dllexport)
@@ -31,6 +32,10 @@
 #define XALAN_XPATHCAPI_EXPORT_FUNCTION(T) T __declspec(dllimport)
 
 #endif
+#else
+#define XALAN_XPATHCAPI_EXPORT 
+#define XALAN_XPATHCAPI_EXPORT_FUNCTION(T) T 
+#endif
 
 #else
 
