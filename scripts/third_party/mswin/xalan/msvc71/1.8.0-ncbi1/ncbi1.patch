diff -urN xml-xalan.orig/c/src/xalanc/PlatformSupport/XalanArrayAllocator.hpp xml-xalan/c/src/xalanc/PlatformSupport/XalanArrayAllocator.hpp
--- xml-xalan.orig/c/src/xalanc/PlatformSupport/XalanArrayAllocator.hpp	2004-04-28 04:33:07.000000000 -0400
+++ xml-xalan/c/src/xalanc/PlatformSupport/XalanArrayAllocator.hpp	2005-04-06 09:38:25.783405100 -0400
@@ -170,7 +170,7 @@
 		ListEntryType&	theNewEntry = m_list.back();
 
 		// Resize the vector to the appropriate size...
-		theNewEntry.second.resize(theBlockSize, VectorType::value_type(0));
+		theNewEntry.second.resize(theBlockSize, typename VectorType::value_type(0));
 
 		// Set the number of free spaces accordingly...
 		theNewEntry.first = theBlockSize - theCount;
diff -urN xml-xalan.orig/c/src/xalanc/XMLSupport/FormatterToXMLBase.cpp xml-xalan/c/src/xalanc/XMLSupport/FormatterToXMLBase.cpp
--- xml-xalan.orig/c/src/xalanc/XMLSupport/FormatterToXMLBase.cpp	2004-04-28 04:33:10.000000000 -0400
+++ xml-xalan/c/src/xalanc/XMLSupport/FormatterToXMLBase.cpp	2005-04-06 09:39:24.003272900 -0400
@@ -125,7 +125,7 @@
 	m_newlineStringLength(0),
 	m_needToOutputDoctypeDecl(false),
     // We must write the XML declaration if standalone is specified
-    m_shouldWriteXMLHeader(xmlDecl == true ? true : standalone.length() == 0),
+    m_shouldWriteXMLHeader(xmlDecl == true ? true : standalone.length() != 0),
 	m_elemStack()
 {
 	if(isEmpty(m_doctypePublic) == false)
